import{j as e}from"./ui-UIpCtT3r.js";import{c as T,C as d,d as N,e as v,g as c,L as P,i as I,u as B}from"./index-DMVSlINz.js";import{u as D}from"./router-CxXythJb.js";import{B as R}from"./badge-CIXRfmkI.js";import{A as k}from"./admin-layout-BMhrpvyD.js";import{r as w}from"./vendor-vA4cx1mx.js";import{S as E,a as q,b as $,c as O,d as u}from"./select-CQK1553m.js";import{T as S}from"./trending-up-BatoiHQK.js";import{R as G,L as M,a as V,X as z,Y as K,T as W,J as F,b as Q}from"./LineChart-8n8wheSt.js";import{U as L}from"./users-CGD53Qtc.js";import{B as X}from"./bell-D5zNslsE.js";import{S as Y}from"./settings-Blcd0dvr.js";import{U as H}from"./user-plus-4ldeG-Sj.js";import{C as y}from"./calendar-CYlMr0qt.js";import{P as A}from"./package-CP3Dtp7P.js";import{C as J}from"./credit-card-DTBtIUOk.js";import{C as Z}from"./chart-no-axes-column-increasing-DJSqD1B_.js";import{P as _}from"./percent-D7H-0Aok.js";import{C}from"./clock-DluLCsci.js";import{E as ee}from"./eye-GE2yFkBB.js";import{A as U}from"./activity-HpGUYvsN.js";import"./navbar-5CcLqczq.js";import"./proxy-CAhTMUof.js";import"./search-0bFur5DB.js";import"./calendar-check-DBfSly3E.js";import"./user-DxXpbN3a.js";import"./avatar-DJ_tL6P_.js";import"./dropdown-menu-DwBmztZZ.js";import"./chevron-right-D0P32XR-.js";import"./check-pZ3JKVe2.js";import"./circle-CRjqYs4g.js";import"./log-out-CiUJLpAa.js";import"./dialog-Ct2TP9w5.js";import"./menu-DQAb75no.js";import"./arrow-left-3dZ_zEs-.js";import"./folder-tree-Kq2bE1K6.js";import"./share-2-CQaeBUod.js";import"./circle-help-C8c3Z800.js";import"./book-open-B5Rj8pVZ.js";import"./index-BdQq_4o_.js";import"./index-BH3L9zMK.js";import"./chevron-down-CUS16Dcb.js";import"./index-BvR2MEzN.js";function se(t){const l=[],r=new Date;for(let s=t-1;s>=0;s--){const i=new Date;i.setDate(r.getDate()-s),l.push({date:i.toISOString().split("T")[0],count:Math.floor(Math.random()*8)+2})}return l}function te(){const[t,l]=w.useState("30"),[r,s]=w.useState([]);w.useEffect(()=>{s(se(parseInt(t)))},[t]);const{data:i,isLoading:n,error:m}=T({queryKey:["/api/admin/reports/new-users-by-day",t],staleTime:5*60*1e3,queryFn:async()=>{try{return await(await I("GET",`/api/admin/reports/new-users-by-day?days=${t}`)).json()}catch(o){return console.error("Erro ao buscar dados de usuários por dia:",o),r}},retry:1,retryDelay:1e3}),x=(o=>!o||o.length===0?r.map(h=>({...h,date:new Date(h.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})})):o.map(h=>({...h,date:new Date(h.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})})))(i),g=x.reduce((o,h)=>o+h.count,0),b=Math.round(g/x.length),a=Math.max(...x.map(o=>o.count));return n?e.jsxs(d,{className:"w-full border-0 shadow-lg",children:[e.jsx(N,{className:"bg-gradient-to-r from-gray-50 to-blue-50 border-b",children:e.jsxs(v,{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(S,{className:"h-5 w-5 mr-2 text-blue-600"}),"Novos Usuários por Dia"]})}),e.jsx(c,{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(P,{className:"h-8 w-8 animate-spin text-blue-500"}),e.jsx("p",{className:"text-gray-600",children:"Carregando dados..."})]})})]}):e.jsxs(d,{className:"w-full border-0 shadow-lg",children:[e.jsx(N,{className:"bg-gradient-to-r from-gray-50 to-blue-50 border-b",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs(v,{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(S,{className:"h-5 w-5 mr-2 text-blue-600"}),"Novos Usuários por Dia"]}),e.jsx("div",{className:"w-40",children:e.jsxs(E,{value:t,onValueChange:l,children:[e.jsx(q,{className:"bg-white border-gray-200",children:e.jsx($,{placeholder:"Período"})}),e.jsxs(O,{children:[e.jsx(u,{value:"7",children:"7 dias"}),e.jsx(u,{value:"15",children:"15 dias"}),e.jsx(u,{value:"30",children:"30 dias"}),e.jsx(u,{value:"60",children:"60 dias"}),e.jsx(u,{value:"90",children:"90 dias"})]})]})})]})}),e.jsxs(c,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:g}),e.jsx("div",{className:"text-sm text-blue-700",children:"Total"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-green-900",children:b}),e.jsx("div",{className:"text-sm text-green-700",children:"Média/Dia"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:a}),e.jsx("div",{className:"text-sm text-purple-700",children:"Máximo"})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(G,{width:"100%",height:"100%",children:e.jsxs(M,{data:x,margin:{top:5,right:20,left:10,bottom:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#0ea5e9",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#0ea5e9",stopOpacity:.1})]})}),e.jsx(V,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(z,{dataKey:"date",stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(K,{allowDecimals:!1,stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(W,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:o=>[`${o} usuários`,"Quantidade"],labelStyle:{color:"#374151",fontWeight:"600"}}),e.jsx(F,{}),e.jsx(Q,{type:"monotone",dataKey:"count",name:"Usuários",stroke:"#0ea5e9",strokeWidth:3,fill:"url(#colorUsers)",activeDot:{r:8,stroke:"#0ea5e9",strokeWidth:2,fill:"white"},dot:{r:4,fill:"#0ea5e9",stroke:"white",strokeWidth:2}})]})})}),m&&e.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"h-5 w-5 text-yellow-600 mr-2"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Usando dados simulados. Não foi possível carregar dados reais."})]})})]})]})}function j({title:t,value:l,icon:r,description:s,onClick:i,gradient:n="from-blue-500 to-blue-600",trend:m,trendValue:p}){return e.jsxs(d,{className:`group relative overflow-hidden border-0 shadow-lg hover:shadow-xl transition-all duration-300 ${i?"cursor-pointer transform hover:scale-[1.02]":""}`,onClick:i,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${n} opacity-5 group-hover:opacity-10 transition-opacity`}),e.jsxs(N,{className:"flex flex-row items-center justify-between pb-3 relative z-10",children:[e.jsx(v,{className:"text-lg font-semibold text-gray-800",children:t}),e.jsx("div",{className:`bg-gradient-to-br ${n} p-3 rounded-xl shadow-lg`,children:e.jsx("div",{className:"text-white",children:r})})]}),e.jsx(c,{className:"relative z-10",children:e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:l}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s})]}),m&&p&&e.jsxs("div",{className:`flex items-center text-sm font-medium ${m==="up"?"text-green-600":"text-red-600"}`,children:[m==="up"?e.jsx(S,{className:"h-4 w-4 mr-1"}):e.jsx(U,{className:"h-4 w-4 mr-1"}),p]})]})})]})}function re({status:t}){const r=(()=>{switch(t){case"completed":return{classes:"bg-gradient-to-r from-green-100 to-green-200 text-green-800 border-green-300",text:"Concluído"};case"confirmed":return{classes:"bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800 border-blue-300",text:"Confirmado"};case"canceled":return{classes:"bg-gradient-to-r from-red-100 to-red-200 text-red-800 border-red-300",text:"Cancelado"};case"pending":return{classes:"bg-gradient-to-r from-yellow-100 to-yellow-200 text-yellow-800 border-yellow-300",text:"Pendente"};default:return{classes:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 border-gray-300",text:t}}})();return e.jsx(R,{className:`${r.classes} border font-medium px-3 py-1`,children:r.text})}function f({title:t,description:l,icon:r,onClick:s,color:i="blue"}){const n={blue:"from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",green:"from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",purple:"from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700",orange:"from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700"};return e.jsx(d,{className:"group cursor-pointer transform transition-all duration-300 hover:scale-105 border-0 shadow-lg hover:shadow-xl",onClick:s,children:e.jsxs(c,{className:"p-6",children:[e.jsx("div",{className:`bg-gradient-to-br ${n[i]} p-4 rounded-xl mb-4 w-fit`,children:e.jsx("div",{className:"text-white",children:r})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:t}),e.jsx("p",{className:"text-gray-600 text-sm",children:l})]})})}function Qe(){var n,m,p,x,g,b;const[,t]=D(),{user:l}=B(),r={totalUsers:1247,totalProviders:89,totalClients:1158,totalServices:156,totalCategories:12,totalAppointments:2341,appointmentsByStatus:{pending:156,confirmed:1892,completed:245,canceled:48},recentAppointments:[{id:1,serviceId:1,providerId:2,clientId:3,date:new Date().toISOString().split("T")[0],startTime:"14:00",status:"confirmed"},{id:2,serviceId:3,providerId:2,clientId:4,date:new Date().toISOString().split("T")[0],startTime:"15:30",status:"pending"},{id:3,serviceId:5,providerId:3,clientId:7,date:new Date().toISOString().split("T")[0],startTime:"16:00",status:"completed"}]},{data:s,isLoading:i}=T({queryKey:["/api/admin/reports/summary"],queryFn:async()=>{try{return await(await I("GET","/api/admin/reports/summary")).json()}catch(a){return console.error("Erro ao carregar dados de resumo:",a),r}}});return i?e.jsx(k,{children:e.jsx("div",{className:"flex h-[50vh] items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-blue-500 border-t-transparent"}),e.jsx("p",{className:"text-gray-600",children:"Carregando dashboard..."})]})})}):e.jsx(k,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-blue-50 to-indigo-100",children:e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"rounded-2xl bg-white/90 shadow-lg border border-blue-100 px-6 py-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-blue-700 to-indigo-700 bg-clip-text text-transparent mb-2",children:"Painel do Administrador"}),e.jsx("p",{className:"text-gray-600 text-base sm:text-lg",children:"Bem-vindo de volta! Aqui está o resumo da sua plataforma."})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-3 rounded-xl shadow-md",children:e.jsx(X,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-3 rounded-xl shadow-md",children:e.jsx(Y,{className:"h-6 w-6 text-white"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(j,{title:"Total de Usuários",value:((n=s==null?void 0:s.totalUsers)==null?void 0:n.toLocaleString())||"0",icon:e.jsx(L,{className:"h-6 w-6"}),description:"Usuários cadastrados",gradient:"from-blue-500 to-blue-600",trend:"up",trendValue:"+12%",onClick:()=>t("/admin/users")}),e.jsx(j,{title:"Prestadores",value:(s==null?void 0:s.totalProviders)||0,icon:e.jsx(H,{className:"h-6 w-6"}),description:"Prestadores ativos",gradient:"from-green-500 to-green-600",trend:"up",trendValue:"+8%",onClick:()=>t("/admin/providers")}),e.jsx(j,{title:"Agendamentos",value:((m=s==null?void 0:s.totalAppointments)==null?void 0:m.toLocaleString())||"0",icon:e.jsx(y,{className:"h-6 w-6"}),description:"Total de agendamentos",gradient:"from-purple-500 to-purple-600",trend:"up",trendValue:"+15%",onClick:()=>t("/admin/appointments")}),e.jsx(j,{title:"Serviços",value:(s==null?void 0:s.totalServices)||0,icon:e.jsx(A,{className:"h-6 w-6"}),description:"Serviços disponíveis",gradient:"from-orange-500 to-orange-600",trend:"up",trendValue:"+5%",onClick:()=>t("/admin/services")})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(te,{})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ações Rápidas"}),e.jsx(f,{title:"Gerenciar Categorias",description:"Adicionar ou editar nichos e categorias de serviços",icon:e.jsx(A,{className:"h-6 w-6"}),color:"blue",onClick:()=>t("/admin/categories")}),e.jsx(f,{title:"Configurar Pagamentos",description:"Configurar taxas e integrações de pagamento",icon:e.jsx(J,{className:"h-6 w-6"}),color:"green",onClick:()=>t("/admin/payment-settings")}),e.jsx(f,{title:"Ver Relatórios",description:"Acessar estatísticas e relatórios detalhados",icon:e.jsx(Z,{className:"h-6 w-6"}),color:"purple",onClick:()=>t("/admin/reports")}),e.jsx(f,{title:"Promoções",description:"Gerenciar campanhas e cupons de desconto",icon:e.jsx(_,{className:"h-6 w-6"}),color:"orange",onClick:()=>t("/admin/promotions")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(d,{className:"border-0 shadow-lg bg-gradient-to-br from-yellow-50 to-yellow-100",children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Pendentes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:((p=s==null?void 0:s.appointmentsByStatus)==null?void 0:p.pending)||0})]}),e.jsx("div",{className:"bg-yellow-500 p-3 rounded-full",children:e.jsx(C,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(d,{className:"border-0 shadow-lg bg-gradient-to-br from-blue-50 to-blue-100",children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Confirmados"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:((x=s==null?void 0:s.appointmentsByStatus)==null?void 0:x.confirmed)||0})]}),e.jsx("div",{className:"bg-blue-500 p-3 rounded-full",children:e.jsx(y,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(d,{className:"border-0 shadow-lg bg-gradient-to-br from-green-50 to-green-100",children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Concluídos"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:((g=s==null?void 0:s.appointmentsByStatus)==null?void 0:g.completed)||0})]}),e.jsx("div",{className:"bg-green-500 p-3 rounded-full",children:e.jsx(ee,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(d,{className:"border-0 shadow-lg bg-gradient-to-br from-red-50 to-red-100",children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Cancelados"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:((b=s==null?void 0:s.appointmentsByStatus)==null?void 0:b.canceled)||0})]}),e.jsx("div",{className:"bg-red-500 p-3 rounded-full",children:e.jsx(U,{className:"h-6 w-6 text-white"})})]})})})]}),e.jsxs(d,{className:"border-0 shadow-lg",children:[e.jsx(N,{className:"bg-gradient-to-r from-gray-50 to-blue-50 border-b",children:e.jsxs(v,{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(C,{className:"h-5 w-5 mr-2 text-blue-600"}),"Agendamentos Recentes"]})}),e.jsx(c,{className:"p-6",children:s!=null&&s.recentAppointments&&s.recentAppointments.length>0?e.jsx("div",{className:"space-y-4",children:s.recentAppointments.map(a=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white rounded-xl border border-gray-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-full mr-4",children:e.jsx(C,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900",children:["Serviço #",a.serviceId]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Cliente #",a.clientId," • Prestador #",a.providerId]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[new Date(a.date).toLocaleDateString("pt-BR")," às ",a.startTime]})]})]}),e.jsx(re,{status:a.status})]},a.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"bg-gray-100 p-4 rounded-full w-fit mx-auto mb-4",children:e.jsx(y,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Nenhum agendamento recente encontrado"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Os agendamentos aparecerão aqui quando forem criados"})]})})]})]})})})}export{Qe as default};
