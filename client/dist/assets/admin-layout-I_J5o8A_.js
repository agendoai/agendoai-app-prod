import{j as e}from"./ui-UIpCtT3r.js";import{r as n}from"./vendor-vA4cx1mx.js";import{u as N}from"./router-CxXythJb.js";import{j as E,u as v,b as C,l as R,X as B,r as F}from"./index-BJ9Cw0LR.js";import{N as W}from"./navbar-YJYqy7V_.js";import{B as i}from"./button-BvsVcTDx.js";import{B as P}from"./badge-BQpU5zw7.js";import{A as $,a as H,b as V}from"./avatar-DEanbPY_.js";import{D as q,a as X,b as G,c as J,d as w,e as p}from"./dropdown-menu-Dyfg7Gk4.js";import{U as k}from"./user-C2y4PfJ8.js";import{S as K}from"./settings-WRZm2y6w.js";import{L as y}from"./log-out-CdVFLkWN.js";import{D as Q,a as Y,b as Z,c as _,d as ee,e as se}from"./dialog-BlryVO8p.js";import{M as ae}from"./menu-B7gXVrLX.js";import{B as oe}from"./bell-vRE7a1ng.js";import{A as te}from"./arrow-left-EWHBe2nW.js";import{U as ne}from"./users-ZhvK7Ip9.js";import{C as ie}from"./calendar-tibBNAR3.js";import{T as re}from"./trending-up-BcBXLPRG.js";import{F as le}from"./folder-tree-Duy3Amda.js";import{C as ce}from"./credit-card-CO61cKh_.js";import{S as de}from"./share-2-B19OuGMQ.js";import{C as me}from"./circle-help-CxLgceap.js";import{B as he}from"./book-open-Esw08_-n.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=E("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);function ue({userType:r="admin"}){const{user:s,logoutMutation:m}=v(),[,l]=N(),{toast:o}=C(),c=()=>{if(!s||!s.name)return r.substring(0,2).toUpperCase();const t=s.name.split(" ");return t.length===1?t[0].substring(0,2).toUpperCase():(t[0][0]+t[t.length-1][0]).toUpperCase()},g=()=>{localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),window.authToken&&(window.authToken=void 0),console.log("ðŸ”‘ Token removido diretamente do localStorage e sessionStorage"),o({title:"Logout realizado",description:"VocÃª saiu da sua conta com sucesso."}),setTimeout(()=>{console.log("ðŸ”„ Recarregando pÃ¡gina..."),window.location.reload()},500)};return e.jsxs(q,{children:[e.jsx(X,{asChild:!0,children:e.jsx(i,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:e.jsxs($,{className:"h-8 w-8",children:[e.jsx(H,{src:(s==null?void 0:s.profileImage)||void 0,alt:(s==null?void 0:s.name)||"UsuÃ¡rio"}),e.jsx(V,{children:c()})]})})}),e.jsxs(G,{align:"end",className:"w-56",children:[e.jsx(J,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:(s==null?void 0:s.name)||"Administrador"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s==null?void 0:s.email})]})}),e.jsx(w,{}),e.jsxs(p,{onClick:()=>l(`/${r}/profile`),children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Perfil"})]}),e.jsxs(p,{onClick:()=>l(`/${r}/settings`),children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"ConfiguraÃ§Ãµes"})]}),e.jsx(w,{}),e.jsxs(p,{onClick:g,className:"text-red-600",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Sair"})]})]})]})}function We({children:r,title:s="AdministraÃ§Ã£o",showBackButton:m=!1,backButtonAction:l}){const[o,c]=N(),{user:g,logoutMutation:t}=v(),{unreadCount:j}=R(),[fe,S]=n.useState(!1),[D,h]=n.useState(!1),[x,d]=n.useState(!1),u=n.useRef(null),{toast:L}=C();n.useEffect(()=>{(o.startsWith("/admin/documentation")||o.startsWith("/admin/project-documentation")||o.startsWith("/admin/testing-documentation"))&&S(!0)},[o]),n.useEffect(()=>{function a(f){u.current&&!u.current.contains(f.target)&&d(!1)}return x?document.addEventListener("mousedown",a):document.removeEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[x]);const A=()=>{l?l():window.history.back()},T=()=>{h(!0)},I=()=>{h(!1),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),window.authToken&&(window.authToken=void 0),console.log("ðŸ”‘ Token removido diretamente do localStorage e sessionStorage"),L({title:"Logout realizado",description:"VocÃª saiu da sua conta com sucesso."}),setTimeout(()=>{console.log("ðŸ”„ Recarregando pÃ¡gina..."),window.location.reload()},500)},M=a=>o.startsWith(a),b=[{href:"/admin/dashboard",label:"Dashboard",icon:e.jsx(xe,{className:"h-5 w-5"})},{href:"/admin/users",label:"UsuÃ¡rios",icon:e.jsx(k,{className:"h-5 w-5"})},{href:"/admin/providers",label:"Prestadores",icon:e.jsx(ne,{className:"h-5 w-5"})},{href:"/admin/appointments",label:"Agendamentos",icon:e.jsx(ie,{className:"h-5 w-5"})}],U=[{href:"/admin/reports",label:"RelatÃ³rios",icon:e.jsx(re,{className:"h-5 w-5"})},{href:"/admin/categories",label:"Categorias",icon:e.jsx(le,{className:"h-5 w-5"})},{href:"/admin/financial-settings",label:"Financeiro",icon:e.jsx(ce,{className:"h-5 w-5"})},{href:"/admin/integrations-settings",label:"IntegraÃ§Ãµes",icon:e.jsx(de,{className:"h-5 w-5"})}],z=[{href:"/admin/support",label:"Suporte",icon:e.jsx(me,{className:"h-5 w-5"})},{href:"/admin/documentation",label:"DocumentaÃ§Ã£o",icon:e.jsx(he,{className:"h-5 w-5"})}];return e.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[e.jsx("header",{className:"bg-gradient-to-r from-blue-800 via-blue-900 to-indigo-900 text-white shadow-lg z-50",children:e.jsxs("div",{className:"container mx-auto py-4 px-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(i,{variant:"ghost",size:"icon",className:"text-white",onClick:()=>d(!0),children:e.jsx(ae,{className:"h-6 w-6"})}),e.jsx("h1",{className:"text-lg sm:text-xl font-bold tracking-wide drop-shadow-md select-none",children:m?s:"Painel Admin"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(i,{variant:"ghost",className:"relative p-2 text-white hover:bg-blue-700/80 focus:bg-blue-700/90",onClick:()=>c("/admin/notifications"),children:[e.jsx(oe,{className:"h-6 w-6 text-white"}),j>0&&e.jsx(P,{variant:"destructive",className:"absolute -top-1 -right-1 w-5 h-5 flex items-center justify-center p-0 text-[10px]",children:j})]}),e.jsx(ue,{userType:"admin"})]})]})}),m&&e.jsxs("div",{className:"sticky top-0 z-50 border-b bg-background h-14 flex items-center px-4",children:[e.jsx("button",{onClick:A,className:"mr-3 rounded-full p-1 hover:bg-muted",children:e.jsx(te,{className:"h-5 w-5"})}),s&&e.jsx("h1",{className:"text-lg font-semibold",children:s})]}),x&&e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsxs("div",{ref:u,className:"w-80 h-full bg-white shadow-2xl flex flex-col animate-slide-in",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[e.jsx("span",{className:"text-2xl font-bold text-indigo-700 select-none",children:"AgendoAI"}),e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>d(!1),children:e.jsx(B,{className:"h-6 w-6 text-gray-500"})})]}),e.jsx("nav",{className:"flex-1 py-6 px-4 space-y-2",children:[...b,...U,...z].map(a=>e.jsxs("button",{onClick:()=>{c(a.href),d(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-colors
                    ${M(a.href)?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-50"}
                  `,children:[a.icon,e.jsx("span",{children:a.label})]},a.href))}),e.jsx("div",{className:"mt-auto p-6 border-t border-gray-100",children:e.jsxs("button",{onClick:T,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(y,{className:"h-5 w-5"}),e.jsx("span",{children:"Sair"})]})})]}),e.jsx("div",{className:"flex-1",onClick:()=>d(!1)})]}),e.jsx("main",{className:F("flex-1",m&&"pt-2"),children:r}),e.jsx("div",{className:"lg:hidden",children:e.jsx(W,{items:b.map(a=>({icon:a.icon,label:a.label,href:a.href,isActive:(f,O)=>f.startsWith(O)})),layoutId:"adminNav",onNavigate:a=>c(a),className:"lg:hidden"})}),e.jsx(Q,{open:D,onOpenChange:h,children:e.jsxs(Y,{className:"bg-white",children:[e.jsxs(Z,{children:[e.jsx(_,{children:"Sair do Sistema"}),e.jsx(ee,{children:"Tem certeza que deseja sair do painel administrativo?"})]}),e.jsxs(se,{children:[e.jsx(i,{variant:"outline",onClick:()=>h(!1),children:"Cancelar"}),e.jsx(i,{variant:"destructive",onClick:I,children:"Sair"})]})]})})]})}export{We as A};
