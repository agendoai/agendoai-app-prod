import{j as e}from"./ui-UIpCtT3r.js";import{r as o}from"./vendor-vA4cx1mx.js";import{D as we,ac as be,B as c,X as D,b as ye,a as Ce,c as Ae,L as Te,a2 as Se,C as f,d as p,e as v,f as O,g as w,T as U,h as De,i as J}from"./index-DMVSlINz.js";import{u as ke}from"./useMutation-mYWno7MC.js";import{A as W}from"./admin-layout-BMhrpvyD.js";import{D as Ie,a as Pe,b as ze,c as Ee,d as Me,e as $e}from"./dialog-Ct2TP9w5.js";import{S as L}from"./square-pen-D-ChMROE.js";import{C as k}from"./check-pZ3JKVe2.js";import{T as Y,b as Z,c as S,d as i,e as _,f as n}from"./table-BurWIJog.js";import{D as ee,a as se,b as te,e as x}from"./dropdown-menu-DwBmztZZ.js";import{B as ae}from"./badge-CIXRfmkI.js";import{A as re,b as le,a as ie}from"./alert-93oPSpR2.js";import{S as Re,a as Oe,b as Ve,c as Be,d as T}from"./select-CQK1553m.js";import{I as Fe}from"./input-swbZ2nNg.js";import{T as Le,a as qe,b as V,c as B}from"./tabs-BeATRqWY.js";import{P as He,a as Qe,b as Ge}from"./popover-Vvm4dbOt.js";import{C as Ke}from"./calendar-CjSP4W6P.js";import{C as b}from"./calendar-CYlMr0qt.js";import{C as F}from"./clock-DluLCsci.js";import{C as Xe}from"./calendar-range-BB1lPiwC.js";import{C as Ue}from"./circle-check-big-CXpzSzX6.js";import{C as Je}from"./circle-x-DeTx4Uam.js";import{B as ne}from"./bell-D5zNslsE.js";import{C as We}from"./chart-column-increasing-BROjL5Oc.js";import{S as Ye}from"./search-0bFur5DB.js";import{E as me}from"./ellipsis-BX3rdPVm.js";import{E as de}from"./eye-GE2yFkBB.js";import{f as ce}from"./format-CGvBu07F.js";import{p as Ze}from"./pt-BR-Cxqo7XV3.js";import"./router-CxXythJb.js";import"./navbar-5CcLqczq.js";import"./proxy-CAhTMUof.js";import"./calendar-check-DBfSly3E.js";import"./user-DxXpbN3a.js";import"./avatar-DJ_tL6P_.js";import"./settings-Blcd0dvr.js";import"./log-out-CiUJLpAa.js";import"./menu-DQAb75no.js";import"./arrow-left-3dZ_zEs-.js";import"./users-CGD53Qtc.js";import"./trending-up-BatoiHQK.js";import"./folder-tree-Kq2bE1K6.js";import"./credit-card-DTBtIUOk.js";import"./share-2-CQaeBUod.js";import"./circle-help-C8c3Z800.js";import"./book-open-B5Rj8pVZ.js";import"./chevron-right-D0P32XR-.js";import"./circle-CRjqYs4g.js";import"./index-BdQq_4o_.js";import"./index-BH3L9zMK.js";import"./chevron-down-CUS16Dcb.js";import"./en-US-xSPtgCq_.js";import"./endOfMonth-CH6FLORf.js";import"./isSameDay-BJjwZdUf.js";import"./addDays-BQ37Zmqx.js";import"./subDays-K6OA95hK.js";import"./chevron-left-D3HQY9r6.js";const _e=({appointment:a,isOpen:y,isEditMode:C=!1,onClose:h,onEdit:I,onStatusChange:A,renderStatusBadge:P})=>a?e.jsx(Ie,{open:y,onOpenChange:d=>!d&&h(),children:e.jsxs(Pe,{className:"sm:max-w-[650px]",children:[e.jsxs(ze,{children:[e.jsx(Ee,{children:C?"Editar Agendamento":"Detalhes do Agendamento"}),e.jsx(Me,{children:C?"Altere as informações do agendamento conforme necessário.":"Informações detalhadas sobre o agendamento selecionado."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"ID do Agendamento"}),e.jsx("p",{className:"mt-1 text-sm",children:a.id})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("div",{className:"mt-1",children:P(a.status)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Data"}),e.jsx("p",{className:"mt-1 text-sm",children:we(a.date)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Horário"}),e.jsxs("p",{className:"mt-1 text-sm",children:[a.startTime," - ",a.endTime]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Cliente"}),e.jsx("p",{className:"mt-1 text-sm",children:a.clientName||`Cliente #${a.clientId}`})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Prestador"}),e.jsx("p",{className:"mt-1 text-sm",children:a.providerName||`Prestador #${a.providerId}`})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Serviço"}),e.jsx("p",{className:"mt-1 text-sm",children:a.serviceName||`Serviço #${a.serviceId}`})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Valor"}),e.jsx("p",{className:"mt-1 text-sm",children:be(a.totalPrice)})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Método de Pagamento"}),e.jsx("p",{className:"mt-1 text-sm",children:a.paymentMethod||"Não informado"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Status do Pagamento"}),e.jsx("p",{className:"mt-1 text-sm",children:a.paymentStatus||"Não processado"})]}),a.notes&&e.jsxs("div",{className:"mt-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Observações"}),e.jsx("p",{className:"mt-1 text-sm",children:a.notes})]})]}),e.jsxs($e,{className:"gap-2",children:[e.jsx(c,{variant:"outline",onClick:h,children:"Fechar"}),!C&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{variant:"default",onClick:()=>I(a),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Editar"]}),a.status==="pending"&&e.jsxs(c,{variant:"default",className:"bg-blue-600 hover:bg-blue-700",onClick:()=>{A(a.id,"confirmed"),h()},children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Confirmar"]}),a.status==="confirmed"&&e.jsxs(c,{variant:"default",className:"bg-green-600 hover:bg-green-700",onClick:()=>{A(a.id,"completed"),h()},children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Concluir"]}),["pending","confirmed"].includes(a.status)&&e.jsxs(c,{variant:"destructive",onClick:()=>{A(a.id,"canceled"),h()},children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Cancelar"]})]})]})]})}):null;function at(){const{toast:a}=ye(),[y,C]=o.useState(null),[h,I]=o.useState(""),[A,P]=o.useState("monitor"),[d,q]=o.useState(void 0),[N,oe]=o.useState(!0),[g,xe]=o.useState([]),[he,H]=o.useState(!1),[je,Q]=o.useState(null),[ue,G]=o.useState(!1),z=Ce(),{data:r,isLoading:ge,dataUpdatedAt:K}=Ae({queryKey:["/api/admin/appointments",{date:d==null?void 0:d.toISOString().split("T")[0]}],queryFn:async()=>{try{const s=d?`?date=${d.toISOString().split("T")[0]}`:"";return await(await J("GET",`/api/admin/appointments${s}`)).json()}catch(s){return console.error("Erro ao carregar agendamentos:",s),[]}},refetchInterval:N?1e4:!1});o.useEffect(()=>{if(r&&r.length>0){const s=new Date,t=r.filter(l=>{if(!l.createdAt)return!1;const R=new Date(l.createdAt);return(s.getTime()-R.getTime())/(1e3*60)<10&&l.status==="pending"});t.length>0&&g.length!==t.length&&(xe(t),g.length<t.length&&a({title:"Novos agendamentos",description:`${t.length-g.length} novos agendamentos recebidos.`}))}},[r,g.length,a]);const Ne=o.useCallback(()=>{z.invalidateQueries({queryKey:["/api/admin/appointments"]}),a({title:"Atualizando dados",description:"Os dados estão sendo atualizados..."})},[z,a]),m=o.useMemo(()=>{if(!r)return{total:0,pending:0,confirmed:0,completed:0,canceled:0,today:0,upcoming:0,revenue:0};const s=new Date().toISOString().split("T")[0];return{total:r.length,pending:r.filter(t=>t.status==="pending").length,confirmed:r.filter(t=>t.status==="confirmed").length,completed:r.filter(t=>t.status==="completed").length,canceled:r.filter(t=>t.status==="canceled").length,today:r.filter(t=>t.date===s).length,upcoming:r.filter(t=>new Date(t.date)>new Date&&t.status!=="canceled").length,revenue:r.filter(t=>t.status==="completed").reduce((t,l)=>t+(l.totalPrice||0),0)}},[r]),fe=ke({mutationFn:async({id:s,data:t})=>{try{if(!s||s<=0)throw new Error("ID de agendamento inválido");if(!t||Object.keys(t).length===0)throw new Error("Dados de atualização ausentes");return await(await J("PUT",`/api/admin/appointments/${s}`,t)).json()}catch(l){throw console.error("Erro completo na atualização:",l),l}},onSuccess:s=>{console.log("Agendamento atualizado com sucesso:",s),z.invalidateQueries({queryKey:["/api/admin/appointments"]}),a({title:"Agendamento atualizado",description:"O agendamento foi atualizado com sucesso."})},onError:s=>{console.error("Erro na mutation:",s),a({title:"Erro ao atualizar agendamento",description:s.message||"Ocorreu um erro ao tentar atualizar o agendamento",variant:"destructive"})}}),pe=s=>{Q(s),G(!0),H(!0)},ve=()=>{H(!1),Q(null),G(!1)},j=(s,t)=>{fe.mutate({id:s,data:{status:t}})},E=s=>{let t="",l="";switch(s){case"completed":t="bg-green-100 text-green-800 hover:bg-green-100 text-xs",l="Concluído";break;case"confirmed":t="bg-blue-100 text-blue-800 hover:bg-blue-100 text-xs",l="Confirmado";break;case"canceled":t="bg-red-100 text-red-800 hover:bg-red-100 text-xs",l="Cancelado";break;case"pending":t="bg-yellow-100 text-yellow-800 hover:bg-yellow-100 text-xs",l="Pendente";break;default:t="bg-gray-100 text-gray-800 hover:bg-gray-100 text-xs",l=s}return e.jsx(ae,{variant:"outline",className:t,children:l})},M=s=>new Date(s).toLocaleDateString("pt-BR"),$=s=>s===null?"N/A":`R$ ${(s/100).toFixed(2).replace(".",",")}`,u=r==null?void 0:r.filter(s=>{if(y&&s.status!==y)return!1;if(h){const t=h.toLowerCase(),l=(s.clientName||"").toLowerCase(),R=(s.providerName||"").toLowerCase(),X=(s.serviceName||"").toLowerCase();return l.includes(t)||R.includes(t)||X.includes(t)}return!0});return ge?e.jsxs(W,{children:[e.jsxs("div",{className:"container mx-auto py-4 sm:py-6 px-4 sm:px-6",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-6",children:"Gerenciamento de Agendamentos"}),e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(Te,{className:"h-8 w-8 animate-spin text-primary"})})]}),e.jsx(_e,{appointment:je,isOpen:he,isEditMode:ue,onClose:ve,onEdit:pe,onStatusChange:j,renderStatusBadge:E})]}):e.jsx(W,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:e.jsxs("div",{className:"container mx-auto py-4 sm:py-6 px-4 sm:px-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-white to-blue-50 rounded-2xl shadow-lg border border-blue-100 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl shadow-lg",children:e.jsx(b,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-700 bg-clip-text text-transparent",children:"Monitor de Agendamentos"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gerencie e acompanhe todos os agendamentos da plataforma"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsxs(c,{variant:"outline",size:"sm",className:"gap-1 text-xs sm:text-sm bg-white/80 backdrop-blur-sm border-blue-200 hover:bg-blue-50 hover:border-blue-300 transition-all duration-200 shadow-sm",onClick:Ne,children:[e.jsx(Se,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Atualizar"}),e.jsx("span",{className:"sm:hidden",children:"Atualizar"})]}),e.jsxs(c,{variant:N?"default":"outline",size:"sm",className:`gap-1 text-xs sm:text-sm transition-all duration-200 shadow-sm ${N?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white":"bg-white/80 backdrop-blur-sm border-gray-200 hover:bg-gray-50"}`,onClick:()=>oe(!N),children:[e.jsx(F,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:N?"Auto (10s)":"Manual"}),e.jsx("span",{className:"sm:hidden",children:N?"Auto":"Manual"})]}),e.jsxs(He,{children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(c,{variant:"outline",size:"sm",className:"gap-1 text-xs sm:text-sm bg-white/80 backdrop-blur-sm border-purple-200 hover:bg-purple-50 hover:border-purple-300 transition-all duration-200 shadow-sm",children:[e.jsx(Xe,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:d?ce(d,"dd/MM/yyyy"):"Todas as datas"}),e.jsx("span",{className:"sm:hidden",children:d?ce(d,"dd/MM"):"Data"})]})}),e.jsxs(Ge,{className:"w-auto p-0 shadow-xl border-0 rounded-xl",align:"end",children:[e.jsx(Ke,{mode:"single",selected:d,onSelect:q,locale:Ze,initialFocus:!0,className:"rounded-xl"}),d&&e.jsx("div",{className:"p-3 border-t border-gray-100 flex justify-end bg-gradient-to-r from-gray-50 to-white",children:e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>q(void 0),className:"text-gray-600 hover:text-gray-800",children:"Remover filtro"})})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg p-6 text-white transform hover:scale-105 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total de Agendamentos"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold mt-1",children:r.length})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(b,{className:"h-6 w-6 sm:h-8 sm:w-8"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg p-6 text-white transform hover:scale-105 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Confirmados"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold mt-1",children:r.filter(s=>s.status==="confirmed").length})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Ue,{className:"h-6 w-6 sm:h-8 sm:w-8"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-500 rounded-2xl shadow-lg p-6 text-white transform hover:scale-105 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"Pendentes"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold mt-1",children:r.filter(s=>s.status==="pending").length})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(F,{className:"h-6 w-6 sm:h-8 sm:w-8"})})]})}),e.jsx("div",{className:"bg-gradient-to-br from-red-500 to-pink-600 rounded-2xl shadow-lg p-6 text-white transform hover:scale-105 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-red-100 text-sm font-medium",children:"Cancelados"}),e.jsx("p",{className:"text-2xl sm:text-3xl font-bold mt-1",children:r.filter(s=>s.status==="canceled").length})]}),e.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Je,{className:"h-6 w-6 sm:h-8 sm:w-8"})})]})})]}),e.jsxs(Le,{defaultValue:"monitor",value:A,onValueChange:P,className:"mb-6",children:[e.jsxs(qe,{className:"grid w-full grid-cols-1 sm:grid-cols-3",children:[e.jsxs(V,{value:"monitor",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(ne,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Monitor"}),g.length>0&&e.jsx(ae,{className:"ml-1 sm:ml-auto h-4 sm:h-5 px-1 bg-red-500 hover:bg-red-600 text-xs",children:g.length})]}),e.jsxs(V,{value:"all",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(b,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Todos"})]}),e.jsxs(V,{value:"statistics",className:"flex items-center gap-2 text-xs sm:text-sm",children:[e.jsx(We,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Estatísticas"})]})]}),e.jsx(B,{value:"monitor",children:e.jsxs(f,{children:[e.jsxs(p,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Monitor em Tempo Real"}),e.jsx(O,{children:"Visualize e gerencie os agendamentos mais recentes"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Atualizado: ",K?new Date(K).toLocaleTimeString():"--:--:--"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-start sm:items-center mt-4",children:[e.jsxs("div",{className:"flex-1 relative w-full",children:[e.jsx(Ye,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Fe,{placeholder:"Buscar por cliente, prestador ou serviço...",value:h,onChange:s=>I(s.target.value),className:"pl-8 text-sm"})]}),e.jsx("div",{className:"w-full sm:w-40",children:e.jsxs(Re,{value:y||"all",onValueChange:s=>C(s==="all"?null:s),children:[e.jsx(Oe,{className:"text-sm",children:e.jsx(Ve,{placeholder:"Status"})}),e.jsxs(Be,{children:[e.jsx(T,{value:"all",children:"Todos"}),e.jsx(T,{value:"pending",children:"Pendente"}),e.jsx(T,{value:"confirmed",children:"Confirmado"}),e.jsx(T,{value:"completed",children:"Concluído"}),e.jsx(T,{value:"canceled",children:"Cancelado"})]})]})})]})]}),e.jsxs(w,{children:[g.length>0&&e.jsx("div",{className:"mb-6 animate-pulse",children:e.jsxs(f,{className:"border-red-300 bg-red-50",children:[e.jsx(p,{className:"pb-2",children:e.jsxs(v,{className:"text-sm sm:text-base flex items-center",children:[e.jsx(ne,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2 text-red-600"}),"Novos Agendamentos"]})}),e.jsx(w,{children:e.jsx("div",{className:"grid gap-3",children:g.map(s=>e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white p-3 rounded-md border border-red-200 gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm sm:text-base truncate",children:s.clientName||`Cliente #${s.clientId}`}),e.jsxs("div",{className:"text-xs sm:text-sm mt-1 text-gray-600",children:[s.serviceName||`Serviço #${s.serviceId}`," • ",M(s.date)," • ",s.startTime]})]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(c,{size:"sm",variant:"outline",className:"text-blue-600 text-xs flex-1 sm:flex-none",onClick:()=>j(s.id,"confirmed"),children:[e.jsx(b,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Confirmar"}),e.jsx("span",{className:"sm:hidden",children:"OK"})]}),e.jsxs(c,{size:"sm",variant:"outline",className:"text-red-600 text-xs flex-1 sm:flex-none",onClick:()=>j(s.id,"canceled"),children:[e.jsx(D,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Recusar"}),e.jsx("span",{className:"sm:hidden",children:"X"})]})]})]},s.id))})})]})}),u&&u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Y,{className:"min-w-full",children:[e.jsx(Z,{children:e.jsxs(S,{children:[e.jsx(i,{className:"text-xs sm:text-sm",children:"ID"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Data"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Horário"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Cliente"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Prestador"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Serviço"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Valor"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Status"}),e.jsx(i,{className:"text-right text-xs sm:text-sm",children:"Ações"})]})}),e.jsx(_,{children:u.map(s=>e.jsxs(S,{children:[e.jsx(n,{className:"font-medium text-xs sm:text-sm",children:s.id}),e.jsx(n,{className:"text-xs sm:text-sm",children:M(s.date)}),e.jsxs(n,{className:"text-xs sm:text-sm",children:[s.startTime," - ",s.endTime]}),e.jsx(n,{className:"text-xs sm:text-sm max-w-20 sm:max-w-none truncate",children:s.clientName||`Cliente #${s.clientId}`}),e.jsx(n,{className:"text-xs sm:text-sm max-w-20 sm:max-w-none truncate",children:s.providerName||`Prestador #${s.providerId}`}),e.jsx(n,{className:"text-xs sm:text-sm max-w-20 sm:max-w-none truncate",children:s.serviceName||`Serviço #${s.serviceId}`}),e.jsx(n,{className:"text-xs sm:text-sm",children:$(s.totalPrice)}),e.jsx(n,{className:"text-xs sm:text-sm",children:E(s.status)}),e.jsx(n,{className:"text-right",children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8",children:e.jsx(me,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),e.jsxs(te,{align:"end",className:"text-xs sm:text-sm",children:[e.jsxs(x,{className:"cursor-pointer",children:[e.jsx(de,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Ver Detalhes"})]}),e.jsxs(x,{className:"cursor-pointer",children:[e.jsx(L,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Editar"})]}),s.status!=="confirmed"&&e.jsxs(x,{className:"cursor-pointer text-blue-600",onClick:()=>j(s.id,"confirmed"),children:[e.jsx(b,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Confirmar"})]}),s.status!=="completed"&&e.jsxs(x,{className:"cursor-pointer text-green-600",onClick:()=>j(s.id,"completed"),children:[e.jsx(k,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Concluir"})]}),s.status!=="canceled"&&e.jsxs(x,{className:"cursor-pointer text-red-600",onClick:()=>j(s.id,"canceled"),children:[e.jsx(D,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Cancelar"})]})]})]})})]},s.id))})]})}):e.jsx("div",{className:"py-6",children:e.jsxs(re,{children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx(le,{children:"Nenhum agendamento encontrado"}),e.jsx(ie,{children:"Não foram encontrados agendamentos com os filtros aplicados."})]})})]}),e.jsxs(De,{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-4 text-xs sm:text-sm",children:[e.jsxs("div",{className:"text-muted-foreground",children:["Mostrando ",(u==null?void 0:u.length)||0," de ",(r==null?void 0:r.length)||0," agendamentos"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"h-3 w-3"}),e.jsx("span",{children:N?"Atualização automática ativada":"Atualização automática desativada"})]})]})]})}),e.jsx(B,{value:"all",children:e.jsxs(f,{children:[e.jsxs(p,{children:[e.jsx(v,{children:"Todos os Agendamentos"}),e.jsx(O,{children:"Visualize e filtre todos os agendamentos da plataforma"})]}),e.jsx(w,{children:u&&u.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Y,{className:"min-w-full",children:[e.jsx(Z,{children:e.jsxs(S,{children:[e.jsx(i,{className:"text-xs sm:text-sm",children:"ID"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Data"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Horário"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Cliente"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Prestador"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Serviço"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Valor"}),e.jsx(i,{className:"text-xs sm:text-sm",children:"Status"}),e.jsx(i,{className:"text-right text-xs sm:text-sm",children:"Ações"})]})}),e.jsx(_,{children:u.map(s=>e.jsxs(S,{children:[e.jsx(n,{className:"font-medium text-xs sm:text-sm",children:s.id}),e.jsx(n,{className:"text-xs sm:text-sm",children:M(s.date)}),e.jsxs(n,{className:"text-xs sm:text-sm",children:[s.startTime," - ",s.endTime]}),e.jsx(n,{className:"text-xs sm:text-sm max-w-20 sm:max-w-none truncate",children:s.clientName||`Cliente #${s.clientId}`}),e.jsx(n,{className:"text-xs sm:text-sm max-w-20 sm:max-w-none truncate",children:s.providerName||`Prestador #${s.providerId}`}),e.jsx(n,{className:"text-xs sm:text-sm max-w-20 sm:max-w-none truncate",children:s.serviceName||`Serviço #${s.serviceId}`}),e.jsx(n,{className:"text-xs sm:text-sm",children:$(s.totalPrice)}),e.jsx(n,{className:"text-xs sm:text-sm",children:E(s.status)}),e.jsx(n,{className:"text-right",children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8",children:e.jsx(me,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),e.jsxs(te,{align:"end",className:"text-xs sm:text-sm",children:[e.jsxs(x,{className:"cursor-pointer",children:[e.jsx(de,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Ver Detalhes"})]}),e.jsxs(x,{className:"cursor-pointer",children:[e.jsx(L,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Editar"})]}),s.status!=="confirmed"&&e.jsxs(x,{className:"cursor-pointer text-blue-600",onClick:()=>j(s.id,"confirmed"),children:[e.jsx(b,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Confirmar"})]}),s.status!=="completed"&&e.jsxs(x,{className:"cursor-pointer text-green-600",onClick:()=>j(s.id,"completed"),children:[e.jsx(k,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Concluir"})]}),s.status!=="canceled"&&e.jsxs(x,{className:"cursor-pointer text-red-600",onClick:()=>j(s.id,"canceled"),children:[e.jsx(D,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{children:"Cancelar"})]})]})]})})]},s.id))})]})}):e.jsx("div",{className:"py-6",children:e.jsxs(re,{children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx(le,{children:"Nenhum agendamento encontrado"}),e.jsx(ie,{children:"Não foram encontrados agendamentos com os filtros aplicados."})]})})})]})}),e.jsx(B,{value:"statistics",children:e.jsxs(f,{children:[e.jsxs(p,{children:[e.jsx(v,{children:"Estatísticas de Agendamentos"}),e.jsx(O,{children:"Visualize métricas importantes sobre os agendamentos"})]}),e.jsx(w,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(f,{children:[e.jsx(p,{className:"pb-2",children:e.jsx(v,{className:"text-sm sm:text-base",children:"Visão Geral"})}),e.jsx(w,{children:e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium text-xs sm:text-sm",children:"Total de Agendamentos"}),e.jsx("span",{className:"text-xs sm:text-sm",children:m.total})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium text-xs sm:text-sm",children:"Agendamentos Hoje"}),e.jsx("span",{className:"text-xs sm:text-sm",children:m.today})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium text-xs sm:text-sm",children:"Próximos Agendamentos"}),e.jsx("span",{className:"text-xs sm:text-sm",children:m.upcoming})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-medium text-xs sm:text-sm",children:"Receita Total"}),e.jsx("span",{className:"text-xs sm:text-sm",children:$(m.revenue)})]})]})})]}),e.jsxs(f,{children:[e.jsx(p,{className:"pb-2",children:e.jsx(v,{className:"text-sm sm:text-base",children:"Distribuição por Status"})}),e.jsx(w,{children:e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx("div",{className:"w-full bg-muted rounded-full h-3 sm:h-4 overflow-hidden",children:m.total>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-full bg-yellow-400",style:{width:`${m.pending/m.total*100}%`,float:"left"}}),e.jsx("div",{className:"h-full bg-blue-400",style:{width:`${m.confirmed/m.total*100}%`,float:"left"}}),e.jsx("div",{className:"h-full bg-green-400",style:{width:`${m.completed/m.total*100}%`,float:"left"}}),e.jsx("div",{className:"h-full bg-red-400",style:{width:`${m.canceled/m.total*100}%`,float:"left"}})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),e.jsxs("span",{className:"text-xs sm:text-sm",children:["Pendentes: ",m.pending]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),e.jsxs("span",{className:"text-xs sm:text-sm",children:["Confirmados: ",m.confirmed]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),e.jsxs("span",{className:"text-xs sm:text-sm",children:["Concluídos: ",m.completed]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),e.jsxs("span",{className:"text-xs sm:text-sm",children:["Cancelados: ",m.canceled]})]})]})]})})]})]})})]})})]})]})})})}export{at as default};
