import{m as V,r as x,a as B,u as M,R,j as e,t as h}from"./index-DFO2lo2s.js";import{u as S,t as C,o as I,s as l,e as $}from"./zod-BMBsLIH7.js";import{I as o}from"./input-DGvqAMIq.js";import{B as k}from"./button-6IH7luFD.js";import{C as T}from"./circle-check-big-rkgNqVi1.js";import{C as P}from"./calendar-CXCri533.js";import{M as E}from"./mail-Gdb5LOLb.js";import{L as b}from"./lock-XCq0dHTY.js";import{E as g}from"./eye-off-BusxWFXa.js";import{E as w}from"./eye-CcbN9PIV.js";import{U as A}from"./user-WwS7npix.js";import{U as O}from"./users-BzOlSFYN.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=V("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]),U=I({email:l().email({message:"Email inválido"}),password:l().min(6,{message:"Senha deve ter pelo menos 6 caracteres"})}),z=I({email:l().email({message:"Email inválido"}),password:l().min(6,{message:"Senha deve ter pelo menos 6 caracteres"}),confirmPassword:l(),name:l().min(1,{message:"Nome é obrigatório"}),phone:l().min(10,{message:"Telefone é obrigatório"}).regex(/^\d{10,15}$/,{message:"Telefone inválido"}),cpf:l().min(11,{message:"CPF é obrigatório"}),userType:$(["client","provider"])}).refine(a=>a.password===a.confirmPassword,{message:"As senhas não conferem",path:["confirmPassword"]});function ae(){const[a,j]=x.useState("login"),[d,N]=x.useState(!1),[y,L]=x.useState(!1),[c,f]=x.useState(!1),[,v]=B(),{user:n,isLoading:p}=M();R.useEffect(()=>{if(n&&!p){const s=n.userType==="client"?"/client/dashboard":n.userType==="provider"?"/provider/dashboard":n.userType==="admin"?"/admin/dashboard":"/";v(s)}},[n,p,v]);const i=S({resolver:C(U),defaultValues:{email:"",password:""}}),t=S({resolver:C(z),defaultValues:{email:"",password:"",confirmPassword:"",name:"",phone:"",cpf:"",userType:"client"}});if(p)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#009ffd] to-[#a1ffce] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Verificando autenticação..."})]})});if(n)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#009ffd] to-[#a1ffce] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Redirecionando..."})]})});async function D(s){f(!0);try{const r=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"});if(!r.ok)throw new Error(await r.text());const m=await r.json();h({title:"Login realizado!",description:`Bem-vindo(a), ${m.name||m.email}`}),window.location.reload()}catch(r){h({title:"Erro ao entrar",description:r.message||"Verifique seus dados.",variant:"destructive"})}finally{f(!1)}}async function F(s){f(!0);try{const{confirmPassword:r,...m}=s,u=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m),credentials:"include"});if(!u.ok)throw new Error(await u.text());const J=await u.json();h({title:"Conta criada!",description:"Bem-vindo(a) ao AgendoAI!"}),window.location.reload()}catch(r){h({title:"Erro ao cadastrar",description:r.message||"Verifique seus dados.",variant:"destructive"})}finally{f(!1)}}return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white p-2",children:[e.jsxs("div",{className:"mb-4 w-full max-w-sm text-center text-[#222]",children:[e.jsx("h1",{className:"text-4xl font-extrabold mb-1 tracking-tight drop-shadow",children:"AgendoAI"}),e.jsx("p",{className:"text-lg mb-4 font-light",children:"Revolucione seus agendamentos com inteligência artificial"}),e.jsxs("div",{className:"flex justify-center gap-3 mb-2 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-gradient-to-r from-[#009ffd] to-[#a1ffce] text-[#222] px-3 py-1 rounded-full font-semibold shadow-sm",children:[e.jsx(T,{className:"h-4 w-4 text-[#009ffd]"})," Agendamento inteligente"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-gradient-to-r from-[#009ffd] to-[#a1ffce] text-[#222] px-3 py-1 rounded-full font-semibold shadow-sm",children:[e.jsx(P,{className:"h-4 w-4 text-[#a1ffce]"})," Gestão de agenda"]})]})]}),e.jsxs("div",{className:"w-full max-w-sm bg-white rounded-2xl border-2 border-[#009ffd]/40 shadow-xl p-7 flex flex-col items-center",children:[e.jsx("img",{src:"/AgendoAilogo.png",alt:"AgendoAI Logo",className:"h-16 w-auto mb-4 mt-2 drop-shadow-2xl",style:{maxWidth:120}}),e.jsxs("div",{className:"flex w-full mb-6 mt-2",children:[e.jsx("button",{className:`flex-1 py-2 rounded-l-xl text-base font-bold tracking-wide transition-all duration-200 ${a==="login"?"bg-gradient-to-r from-[#009ffd] to-[#a1ffce] text-[#222] shadow-lg":"bg-white text-[#555]/60 hover:bg-[#f0f8ff]"}`,onClick:()=>j("login"),type:"button",style:{boxShadow:a==="login"?"0 0 8px #009ffd88":""},children:"Entrar"}),e.jsx("button",{className:`flex-1 py-2 rounded-r-xl text-base font-bold tracking-wide transition-all duration-200 ${a==="register"?"bg-gradient-to-r from-[#009ffd] to-[#a1ffce] text-[#222] shadow-lg":"bg-white text-[#555]/60 hover:bg-[#f0f8ff]"}`,onClick:()=>j("register"),type:"button",style:{boxShadow:a==="register"?"0 0 8px #009ffd88":""},children:"Cadastrar"})]}),a==="login"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-extrabold text-[#222] mb-1 tracking-tight",children:"Bem-vindo de volta!"}),e.jsx("p",{className:"text-[#555] mb-4 text-sm",children:"Acesse sua conta para continuar"}),e.jsxs("form",{onSubmit:i.handleSubmit(D),className:"w-full space-y-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx(o,{type:"email",placeholder:"E-mail",...i.register("email"),className:"h-12 bg-white border-2 border-[#009ffd]/20 rounded-xl text-[#222] placeholder:text-[#888] focus:bg-white focus:border-[#009ffd] pl-12 shadow-sm transition-all",autoComplete:"email"}),e.jsx(E,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#009ffd] h-5 w-5"}),i.formState.errors.email&&e.jsx("p",{className:"text-xs text-pink-600 mt-1 font-semibold animate-pulse",children:i.formState.errors.email.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{type:d?"text":"password",placeholder:"Senha",...i.register("password"),className:"h-12 bg-white border-2 border-[#009ffd]/20 rounded-xl text-[#222] placeholder:text-[#888] focus:bg-white focus:border-[#009ffd] pl-12 pr-12 shadow-sm transition-all",autoComplete:"current-password"}),e.jsx(b,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#009ffd] h-5 w-5"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#009ffd] hover:text-[#222] transition-colors",onClick:()=>N(s=>!s),tabIndex:-1,children:d?e.jsx(g,{className:"h-5 w-5"}):e.jsx(w,{className:"h-5 w-5"})}),i.formState.errors.password&&e.jsx("p",{className:"text-xs text-pink-600 mt-1 font-semibold animate-pulse",children:i.formState.errors.password.message})]}),e.jsx(k,{type:"submit",className:"w-full h-12 mt-2 bg-gradient-to-r from-[#009ffd] to-[#a1ffce] text-[#222] font-extrabold shadow-xl hover:brightness-110 hover:from-[#009ffd] hover:to-[#a1ffce] transition-all duration-200",disabled:c,style:{boxShadow:"0 0 16px #009ffd55"},children:c?e.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[e.jsx("span",{className:"w-4 h-4 border-2 border-[#009ffd] border-t-transparent rounded-full animate-spin"}),"Entrando..."]}):"Entrar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-extrabold text-[#222] mb-1 tracking-tight",children:"Crie sua conta"}),e.jsx("p",{className:"text-[#555] mb-4 text-sm",children:"Desbloqueie benefícios exclusivos!"}),e.jsxs("form",{onSubmit:t.handleSubmit(F),className:"w-full space-y-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx(o,{type:"email",placeholder:"E-mail",...t.register("email"),className:"h-12 bg-white border-2 border-[#009ffd]/20 rounded-xl text-[#222] placeholder:text-[#888] focus:bg-white focus:border-[#009ffd] pl-12 shadow-sm transition-all",autoComplete:"email"}),e.jsx(E,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#009ffd] h-5 w-5"}),t.formState.errors.email&&e.jsx("p",{className:"text-xs text-pink-600 mt-1 font-semibold animate-pulse",children:t.formState.errors.email.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{type:"text",placeholder:"Nome",...t.register("name"),className:"h-12 bg-white border-2 border-[#009ffd]/20 rounded-xl text-[#222] placeholder:text-[#888] focus:bg-white focus:border-[#009ffd] pl-12 shadow-sm transition-all",autoComplete:"name"}),e.jsx(A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#009ffd] h-5 w-5"}),t.formState.errors.name&&e.jsx("p",{className:"text-xs text-pink-600 mt-1 font-semibold animate-pulse",children:t.formState.errors.name.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{type:d?"text":"password",placeholder:"Senha",...t.register("password"),className:"h-12 bg-white border-2 border-[#009ffd]/20 rounded-xl text-[#222] placeholder:text-[#888] focus:bg-white focus:border-[#009ffd] pl-12 pr-12 shadow-sm transition-all",autoComplete:"new-password"}),e.jsx(b,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#009ffd] h-5 w-5"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#009ffd] hover:text-[#222] transition-colors",onClick:()=>N(s=>!s),tabIndex:-1,children:d?e.jsx(g,{className:"h-5 w-5"}):e.jsx(w,{className:"h-5 w-5"})}),t.formState.errors.password&&e.jsx("p",{className:"text-xs text-pink-600 mt-1 font-semibold animate-pulse",children:t.formState.errors.password.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{type:y?"text":"password",placeholder:"Confirmar senha",...t.register("confirmPassword"),className:"h-12 bg-white border-2 border-[#009ffd]/20 rounded-xl text-[#222] placeholder:text-[#888] focus:bg-white focus:border-[#009ffd] pl-12 pr-12 shadow-sm transition-all",autoComplete:"new-password"}),e.jsx(b,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#009ffd] h-5 w-5"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#009ffd] hover:text-[#222] transition-colors",onClick:()=>L(s=>!s),tabIndex:-1,children:y?e.jsx(g,{className:"h-5 w-5"}):e.jsx(w,{className:"h-5 w-5"})}),t.formState.errors.confirmPassword&&e.jsx("p",{className:"text-xs text-pink-600 mt-1 font-semibold animate-pulse",children:t.formState.errors.confirmPassword.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{type:"text",placeholder:"Telefone (DDD + número)",...t.register("phone"),className:"h-12 bg-white border-2 border-[#009ffd]/20 rounded-xl text-[#222] placeholder:text-[#888] focus:bg-white focus:border-[#009ffd] pl-12 shadow-sm transition-all",autoComplete:"tel",maxLength:15,inputMode:"numeric"}),e.jsx(A,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#009ffd] h-5 w-5"}),t.formState.errors.phone&&e.jsx("p",{className:"text-xs text-pink-600 mt-1 font-semibold animate-pulse",children:t.formState.errors.phone.message})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:`flex-1 py-2 rounded-xl text-xs font-bold border-2 transition-all duration-200 ${t.watch("userType")==="client"?"border-[#009ffd] bg-gradient-to-r from-[#a1ffce] to-[#009ffd] text-[#222] shadow-md":"border-[#009ffd]/20 bg-white text-[#888] hover:bg-[#f0f8ff]"}`,onClick:()=>t.setValue("userType","client"),style:{boxShadow:t.watch("userType")==="client"?"0 0 8px #009ffd88":""},children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(O,{className:"h-4 w-4 text-[#009ffd]"})," Cliente"]})}),e.jsx("button",{type:"button",className:`flex-1 py-2 rounded-xl text-xs font-bold border-2 transition-all duration-200 ${t.watch("userType")==="provider"?"border-[#009ffd] bg-gradient-to-r from-[#009ffd] to-[#a1ffce] text-[#222] shadow-md":"border-[#009ffd]/20 bg-white text-[#888] hover:bg-[#f0f8ff]"}`,onClick:()=>t.setValue("userType","provider"),style:{boxShadow:t.watch("userType")==="provider"?"0 0 8px #009ffd88":""},children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(P,{className:"h-4 w-4 text-[#a1ffce]"})," Prestador"]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{type:"text",placeholder:"CPF",...t.register("cpf"),className:"h-12 bg-white border-2 border-[#009ffd]/20 rounded-xl text-[#222] placeholder:text-[#888] focus:bg-white focus:border-[#009ffd] pl-12 shadow-sm transition-all",maxLength:18,autoComplete:"cpf"}),e.jsx(q,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#009ffd] h-5 w-5"}),t.formState.errors.cpf&&e.jsx("p",{className:"text-xs text-pink-600 mt-1 font-semibold animate-pulse",children:t.formState.errors.cpf.message})]}),e.jsxs("div",{className:"text-xs text-[#888] text-center",children:["Ao continuar, você concorda com os ",e.jsx("span",{className:"underline cursor-pointer",children:"Termos do Serviço"})," e o ",e.jsx("span",{className:"underline cursor-pointer",children:"Aviso de Privacidade"}),"."]}),e.jsx(k,{type:"submit",className:"w-full h-12 mt-2 bg-gradient-to-r from-[#009ffd] to-[#a1ffce] text-[#222] font-extrabold shadow-xl hover:brightness-110 hover:from-[#009ffd] hover:to-[#a1ffce] transition-all duration-200",disabled:c,style:{boxShadow:"0 0 16px #009ffd55"},children:c?e.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[e.jsx("span",{className:"w-4 h-4 border-2 border-[#009ffd] border-t-transparent rounded-full animate-spin"}),"Criando conta..."]}):e.jsxs("span",{className:"flex items-center gap-2 justify-center",children:["Criar conta ",e.jsx(T,{className:"h-4 w-4"})]})})]})]}),e.jsxs("div",{className:"w-full text-center mt-6 text-xs text-[#bbb] font-semibold",children:["© ",new Date().getFullYear()," AgendoAI. Todos os direitos reservados."]})]})]})}export{ae as default};
