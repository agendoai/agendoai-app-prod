import{m as V,r as h,a as B,u as M,R,j as e,t as p}from"./index-BdrEJuYD.js";import{u as S,t as C,o as I,s as o,e as $}from"./zod-Cjvu1gcX.js";import{I as a}from"./input-BRNzA_b4.js";import{B as T}from"./button-CynjWJoH.js";import{C as P}from"./circle-check-big-CiI_Z36v.js";import{C as A}from"./calendar-CiGw-_KP.js";import{M as E}from"./mail-BNu_crym.js";import{L as f}from"./lock-CMrU4PAI.js";import{E as b}from"./eye-off-DitTrUep.js";import{E as y}from"./eye-BM0enQ_h.js";import{U as k}from"./user-DCpoqoA-.js";import{U as O}from"./users--EJM8Ox4.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=V("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]),U=I({email:o().email({message:"Email inválido"}),password:o().min(6,{message:"Senha deve ter pelo menos 6 caracteres"})}),z=I({email:o().email({message:"Email inválido"}),password:o().min(6,{message:"Senha deve ter pelo menos 6 caracteres"}),confirmPassword:o(),name:o().min(1,{message:"Nome é obrigatório"}),phone:o().min(10,{message:"Telefone é obrigatório"}).regex(/^\d{10,15}$/,{message:"Telefone inválido"}),cpf:o().min(11,{message:"CPF é obrigatório"}),userType:$(["client","provider"])}).refine(d=>d.password===d.confirmPassword,{message:"As senhas não conferem",path:["confirmPassword"]});function re(){const[d,w]=h.useState("login"),[i,j]=h.useState(!1),[N,L]=h.useState(!1),[c,m]=h.useState(!1),[,v]=B(),{user:n,isLoading:u}=M();R.useEffect(()=>{if(n&&!u){const s=n.userType==="client"?"/client/dashboard":n.userType==="provider"?"/provider/dashboard":n.userType==="admin"?"/admin/dashboard":"/";v(s)}},[n,u,v]);const l=S({resolver:C(U),defaultValues:{email:"",password:""}}),t=S({resolver:C(z),defaultValues:{email:"",password:"",confirmPassword:"",name:"",phone:"",cpf:"",userType:"client"}});if(u)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#58c9d1]/5 to-[#58c9d1]/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#58c9d1] mx-auto mb-3"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Verificando autenticação..."})]})});if(n)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#58c9d1]/5 to-[#58c9d1]/10 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#58c9d1] mx-auto mb-3"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Redirecionando..."})]})});async function D(s){m(!0);try{const r=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"});if(!r.ok)throw new Error(await r.text());const x=await r.json();p({title:"Login realizado!",description:`Bem-vindo(a), ${x.name||x.email}`}),window.location.reload()}catch(r){p({title:"Erro ao entrar",description:r.message||"Verifique seus dados.",variant:"destructive"})}finally{m(!1)}}async function F(s){m(!0);try{const{confirmPassword:r,...x}=s,g=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x),credentials:"include"});if(!g.ok)throw new Error(await g.text());const J=await g.json();p({title:"Conta criada!",description:"Bem-vindo(a) ao AgendoAI!"}),window.location.reload()}catch(r){p({title:"Erro ao cadastrar",description:r.message||"Verifique seus dados.",variant:"destructive"})}finally{m(!1)}}return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-[#58c9d1]/5 to-[#58c9d1]/10 p-3",children:[e.jsxs("div",{className:"mb-4 w-full max-w-sm text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2 text-gray-900",children:"AgendoAI"}),e.jsx("p",{className:"text-sm mb-3 text-gray-600",children:"Revolucione seus agendamentos com IA"}),e.jsxs("div",{className:"flex justify-center gap-2 mb-3 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1 bg-[#58c9d1]/20 text-[#58c9d1] px-2 py-1 rounded-full font-medium",children:[e.jsx(P,{className:"h-3 w-3"})," Agendamento inteligente"]}),e.jsxs("span",{className:"flex items-center gap-1 bg-[#58c9d1]/20 text-[#58c9d1] px-2 py-1 rounded-full font-medium",children:[e.jsx(A,{className:"h-3 w-3"})," Gestão de agenda"]})]})]}),e.jsxs("div",{className:"w-full max-w-sm bg-white/95 backdrop-blur-sm rounded-xl border border-[#58c9d1]/20 shadow-lg p-4",children:[e.jsx("img",{src:"/AgendoAilogo.png",alt:"AgendoAI Logo",className:"h-12 w-auto mx-auto mb-4",style:{maxWidth:100}}),e.jsxs("div",{className:"flex w-full mb-4",children:[e.jsx("button",{className:`flex-1 py-2 rounded-l-lg text-sm font-medium transition-all duration-200 ${d==="login"?"bg-[#58c9d1] text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>w("login"),type:"button",children:"Entrar"}),e.jsx("button",{className:`flex-1 py-2 rounded-r-lg text-sm font-medium transition-all duration-200 ${d==="register"?"bg-[#58c9d1] text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>w("register"),type:"button",children:"Cadastrar"})]}),d==="login"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1 text-center",children:"Bem-vindo de volta!"}),e.jsx("p",{className:"text-gray-600 mb-4 text-xs text-center",children:"Acesse sua conta para continuar"}),e.jsxs("form",{onSubmit:l.handleSubmit(D),className:"w-full space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(a,{type:"email",placeholder:"E-mail",...l.register("email"),className:"h-10 bg-white border border-[#58c9d1]/30 rounded-lg text-gray-900 placeholder:text-gray-500 focus:border-[#58c9d1] pl-10 text-sm",autoComplete:"email"}),e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#58c9d1] h-4 w-4"}),l.formState.errors.email&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:l.formState.errors.email.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{type:i?"text":"password",placeholder:"Senha",...l.register("password"),className:"h-10 bg-white border border-[#58c9d1]/30 rounded-lg text-gray-900 placeholder:text-gray-500 focus:border-[#58c9d1] pl-10 pr-10 text-sm",autoComplete:"current-password"}),e.jsx(f,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#58c9d1] h-4 w-4"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#58c9d1] hover:text-gray-700 transition-colors",onClick:()=>j(s=>!s),tabIndex:-1,children:i?e.jsx(b,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"})}),l.formState.errors.password&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:l.formState.errors.password.message})]}),e.jsx(T,{type:"submit",className:"w-full h-10 mt-2 bg-[#58c9d1] text-white font-medium shadow-md hover:bg-[#58c9d1]/90 transition-all",disabled:c,children:c?e.jsxs("span",{className:"flex items-center gap-2 justify-center text-sm",children:[e.jsx("span",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Entrando..."]}):"Entrar"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-1 text-center",children:"Crie sua conta"}),e.jsx("p",{className:"text-gray-600 mb-4 text-xs text-center",children:"Desbloqueie benefícios exclusivos!"}),e.jsxs("form",{onSubmit:t.handleSubmit(F),className:"w-full space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(a,{type:"email",placeholder:"E-mail",...t.register("email"),className:"h-10 bg-white border border-[#58c9d1]/30 rounded-lg text-gray-900 placeholder:text-gray-500 focus:border-[#58c9d1] pl-10 text-sm",autoComplete:"email"}),e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#58c9d1] h-4 w-4"}),t.formState.errors.email&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t.formState.errors.email.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{type:"text",placeholder:"Nome",...t.register("name"),className:"h-10 bg-white border border-[#58c9d1]/30 rounded-lg text-gray-900 placeholder:text-gray-500 focus:border-[#58c9d1] pl-10 text-sm",autoComplete:"name"}),e.jsx(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#58c9d1] h-4 w-4"}),t.formState.errors.name&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t.formState.errors.name.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{type:i?"text":"password",placeholder:"Senha",...t.register("password"),className:"h-10 bg-white border border-[#58c9d1]/30 rounded-lg text-gray-900 placeholder:text-gray-500 focus:border-[#58c9d1] pl-10 pr-10 text-sm",autoComplete:"new-password"}),e.jsx(f,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#58c9d1] h-4 w-4"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#58c9d1] hover:text-gray-700 transition-colors",onClick:()=>j(s=>!s),tabIndex:-1,children:i?e.jsx(b,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"})}),t.formState.errors.password&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t.formState.errors.password.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{type:N?"text":"password",placeholder:"Confirmar senha",...t.register("confirmPassword"),className:"h-10 bg-white border border-[#58c9d1]/30 rounded-lg text-gray-900 placeholder:text-gray-500 focus:border-[#58c9d1] pl-10 pr-10 text-sm",autoComplete:"new-password"}),e.jsx(f,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#58c9d1] h-4 w-4"}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#58c9d1] hover:text-gray-700 transition-colors",onClick:()=>L(s=>!s),tabIndex:-1,children:N?e.jsx(b,{className:"h-4 w-4"}):e.jsx(y,{className:"h-4 w-4"})}),t.formState.errors.confirmPassword&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t.formState.errors.confirmPassword.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{type:"text",placeholder:"Telefone (DDD + número)",...t.register("phone"),className:"h-10 bg-white border border-[#58c9d1]/30 rounded-lg text-gray-900 placeholder:text-gray-500 focus:border-[#58c9d1] pl-10 text-sm",autoComplete:"tel",maxLength:15,inputMode:"numeric"}),e.jsx(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#58c9d1] h-4 w-4"}),t.formState.errors.phone&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t.formState.errors.phone.message})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:`flex-1 py-2 rounded-lg text-xs font-medium border transition-all duration-200 ${t.watch("userType")==="client"?"border-[#58c9d1] bg-[#58c9d1] text-white shadow-md":"border-gray-300 bg-white text-gray-600 hover:bg-gray-50"}`,onClick:()=>t.setValue("userType","client"),children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(O,{className:"h-3 w-3"})," Cliente"]})}),e.jsx("button",{type:"button",className:`flex-1 py-2 rounded-lg text-xs font-medium border transition-all duration-200 ${t.watch("userType")==="provider"?"border-[#58c9d1] bg-[#58c9d1] text-white shadow-md":"border-gray-300 bg-white text-gray-600 hover:bg-gray-50"}`,onClick:()=>t.setValue("userType","provider"),children:e.jsxs("div",{className:"flex items-center gap-1 justify-center",children:[e.jsx(A,{className:"h-3 w-3"})," Prestador"]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{type:"text",placeholder:"CPF",...t.register("cpf"),className:"h-10 bg-white border border-[#58c9d1]/30 rounded-lg text-gray-900 placeholder:text-gray-500 focus:border-[#58c9d1] pl-10 text-sm",maxLength:18,autoComplete:"cpf"}),e.jsx(q,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#58c9d1] h-4 w-4"}),t.formState.errors.cpf&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:t.formState.errors.cpf.message})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Ao continuar, você concorda com os ",e.jsx("span",{className:"underline cursor-pointer",children:"Termos do Serviço"})," e o ",e.jsx("span",{className:"underline cursor-pointer",children:"Aviso de Privacidade"}),"."]}),e.jsx(T,{type:"submit",className:"w-full h-10 mt-2 bg-[#58c9d1] text-white font-medium shadow-md hover:bg-[#58c9d1]/90 transition-all",disabled:c,children:c?e.jsxs("span",{className:"flex items-center gap-2 justify-center text-sm",children:[e.jsx("span",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Criando conta..."]}):e.jsxs("span",{className:"flex items-center gap-2 justify-center text-sm",children:["Criar conta ",e.jsx(P,{className:"h-3 w-3"})]})})]})]}),e.jsxs("div",{className:"w-full text-center mt-4 text-xs text-gray-400 font-medium",children:["© ",new Date().getFullYear()," AgendoAI. Todos os direitos reservados."]})]})]})}export{re as default};
