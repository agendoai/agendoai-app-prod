import{j as e}from"./ui-UIpCtT3r.js";import{r as m}from"./vendor-vA4cx1mx.js";import{j as je,b as Fe,c as oe,C as te,g as le,d as Pe,e as Te,q as O,i as E}from"./index-DEm1NP11.js";import{u as $}from"./useMutation-CZu5JiEY.js";import{u as qe}from"./router-CxXythJb.js";import{A as ne}from"./admin-layout-ykZIX_RR.js";import{B as o}from"./button-j6LGAhsQ.js";import{I as w}from"./input-EMniG8vG.js";import{L as h}from"./label-BEQPN1sl.js";import{D as A,a as L,b as R,c as W,d as X,e as M}from"./dialog-7q2nDW2H.js";import{A as ce,a as de,b as me,c as ue}from"./accordion-CS34ci22.js";import{T as Y}from"./textarea-Cncp_VYG.js";import{B as _}from"./badge-B2JTkC27.js";import{S as he,a as xe,b as ge,c as pe,d as be}from"./select-DG5YpObX.js";import{A as Ie}from"./arrow-left-BNqHqGt7.js";import{P as j}from"./plus-DxJwgG-n.js";import{P as D}from"./pencil-C19kw0Sa.js";import{T as B}from"./trash-2-DEdfKrkg.js";import{C as H}from"./clock-CLU1zMjH.js";import{S as ee}from"./save-BVekLZ3I.js";import{P as Oe}from"./package-D52W9p5z.js";import{C as $e}from"./chart-column-Dv65wXVe.js";import{T as Ae}from"./target-DWHo-ktY.js";import{F as Le,Z as Me,P as Be,D as He,U as Ue,M as Ke}from"./zap-DM8qWL7R.js";import{U as Ve}from"./users-3MvLCU5y.js";import{T as Qe}from"./trending-up-CmjJoqLV.js";import{S as Ge}from"./star-CDSNpheT.js";import{B as Ze}from"./book-open-kkhGP1dL.js";import{C as Je}from"./camera-D75InJHQ.js";import{B as Re}from"./briefcase-BYTW5vVa.js";import{H as We}from"./house-CfLQCnfM.js";import{H as Xe,C as Ye}from"./heart-4P5QbpB6.js";import{S as _e}from"./scissors-ioZHRjAf.js";import"./navbar-hjdp4XdK.js";import"./proxy-B8DL77xD.js";import"./search-C7LrDLVs.js";import"./calendar-check-6xqeojHy.js";import"./user-DI19obd1.js";import"./avatar-CPD-kDAN.js";import"./dropdown-menu-Ctl7CAWq.js";import"./chevron-right-C68Zab6b.js";import"./check-BuvXqBRH.js";import"./circle-D47_QxzJ.js";import"./settings-CsNNlMhC.js";import"./log-out-Da473VaU.js";import"./menu-DOVbXHf9.js";import"./bell-DVVHxsNh.js";import"./calendar-eMUANn8Q.js";import"./folder-tree-DfzwPfNK.js";import"./credit-card-C2LZP3Yi.js";import"./share-2-15h8ONA_.js";import"./circle-help-JrPfi8Lq.js";import"./chevron-down-nAvHMQ-K.js";import"./index-BdQq_4o_.js";import"./index-BH3L9zMK.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=je("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=je("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),z=C=>{const u={scissors:_e,car:Ye,heart:Xe,home:We,briefcase:Re,camera:Je,music:Ke,utensils:Ue,dumbbell:He,palette:Be,book:Ze,zap:Me,star:Ge,trending:Qe,users:Ve,folder:Le,clock:H,layers:U,target:Ae,chart:$e,default:Oe};return u[C==null?void 0:C.toLowerCase()]||u.default};function cr(){const[,C]=qe(),{toast:u}=Fe(),[ss,K]=m.useState(null),[rs,as]=m.useState(null),[is,os]=m.useState(null),[ts,ls]=m.useState(null),[fe,F]=m.useState(!1),[ve,S]=m.useState(!1),[Ne,P]=m.useState(!1),[ye,T]=m.useState(!1),[f,we]=m.useState("niche"),[q,Ce]=m.useState(null),[n,v]=m.useState({id:0,name:"",description:"",icon:""}),[i,x]=m.useState({id:0,name:"",description:"",icon:"",color:"#38bdf8",nicheId:0}),[c,N]=m.useState({id:0,name:"",description:"",duration:60,categoryId:0}),{data:b=[],isLoading:Se}=oe({queryKey:["/api/admin/niches"],queryFn:async()=>{try{return await(await E("GET","/api/admin/niches")).json()}catch(s){return console.error("Erro ao carregar nichos:",s),[]}}}),{data:se={},isLoading:ke}=oe({queryKey:["/lucide/icons"],queryFn:async()=>{try{return await(await fetch("https://lucide.dev/api/categories")).json()}catch(s){return console.error("Erro ao carregar ícones:",s),{}}}}),V=$({mutationFn:async s=>{const r=s.id?"PUT":"POST",t=s.id?`/api/admin/niches/${s.id}`:"/api/admin/niches";console.log("Enviando solicitação para criar/atualizar nicho:",t,s);const l=await E(r,t,s);if(!l.ok){const d=await l.json();throw console.error("Erro na resposta do servidor:",d),new Error(d.error||"Erro desconhecido ao processar nicho")}return await l.json()},onSuccess:s=>{console.log("Nicho criado/atualizado com sucesso:",s),u({title:n.id?"Nicho atualizado":"Nicho criado",description:`O nicho foi ${n.id?"atualizado":"criado"} com sucesso.`}),O.invalidateQueries({queryKey:["/api/admin/niches"]}),F(!1),I()},onError:s=>{console.error("Erro ao processar nicho:",s),u({title:"Erro",description:`Erro ao ${n.id?"atualizar":"criar"} nicho: ${s.message}`,variant:"destructive"})}}),Q=$({mutationFn:async s=>{const r=s.id?"PUT":"POST",t=s.id?`/api/admin/categories/${s.id}`:"/api/admin/categories";console.log("Enviando solicitação para criar/atualizar categoria:",t,s);const l=await E(r,t,s);if(!l.ok)try{const d=await l.json();throw console.error("Erro na resposta do servidor:",d),new Error(d.error||"Erro desconhecido ao processar categoria")}catch(d){throw console.error("Erro ao processar resposta de erro:",d),new Error("Erro ao criar categoria. Verifique se já existe uma categoria com o mesmo nome neste nicho.")}return await l.json()},onSuccess:s=>{console.log("Categoria criada/atualizada com sucesso:",s),u({title:i.id?"Categoria atualizada":"Categoria criada",description:`A categoria foi ${i.id?"atualizada":"criada"} com sucesso.`}),O.invalidateQueries({queryKey:["/api/admin/niches"]}),S(!1),I()},onError:s=>{var r;console.error("Erro ao processar categoria:",s),(r=s.message)!=null&&r.includes("Já existe uma categoria com o nome")?K("Já existe uma categoria cadastrada com este nome."):K(`Erro ao ${i.id?"atualizar":"criar"} categoria: ${s.message}`)}}),G=$({mutationFn:async s=>{const r=s.id===0,t=r?"POST":"PUT",l=r?"/api/services":`/api/services/${s.id}`,{id:d,...a}=s,y=r?a:s;console.log("Enviando solicitação para criar/atualizar serviço:",l,y);const g=await E(t,l,y);if(!g.ok){const k=await g.json();throw console.error("Erro na resposta do servidor:",k),new Error(k.error||"Erro desconhecido ao processar serviço")}return await g.json()},onSuccess:s=>{console.log("Serviço criado/atualizado com sucesso:",s),u({title:c.id?"Serviço atualizado":"Serviço criado",description:`O serviço foi ${c.id?"atualizado":"criado"} com sucesso.`}),O.invalidateQueries({queryKey:["/api/admin/niches"]}),P(!1),I()},onError:s=>{console.error("Erro ao processar serviço:",s),u({title:"Erro",description:`Erro ao ${c.id?"atualizar":"criar"} serviço: ${s.message}`,variant:"destructive"})}}),Z=$({mutationFn:async()=>{if(!q)return;let s="";switch(f){case"niche":s=`/api/admin/niches/${q}`;break;case"category":s=`/api/admin/categories/${q}`;break;case"service":s=`/api/services/${q}`;break}return await(await E("DELETE",s)).json()},onSuccess:()=>{u({title:"Item excluído",description:`O ${f} foi excluído com sucesso.`}),O.invalidateQueries({queryKey:["/api/admin/niches"]}),T(!1),I()},onError:s=>{u({title:"Erro",description:`Erro ao excluir ${f}: ${s.message}`,variant:"destructive"})}}),I=()=>{v({id:0,name:"",description:"",icon:""}),x({id:0,name:"",description:"",icon:"",color:"#38bdf8",nicheId:0}),N({id:0,name:"",description:"",duration:60,categoryId:0})},re=s=>{v(s?{id:s.id,name:s.name,description:s.description||"",icon:s.icon||""}:{id:0,name:"",description:"",icon:""}),F(!0)},ae=(s,r)=>{K(null),s?x({id:s.id,name:s.name,description:s.description||"",icon:s.icon||"",color:s.color||"#38bdf8",nicheId:s.nicheId}):r&&x({id:0,name:"",description:"",icon:"",color:"#38bdf8",nicheId:r}),S(!0)},ie=(s,r)=>{s?N({id:s.id,name:s.name,description:s.description||"",duration:s.duration,categoryId:s.categoryId}):r&&N({id:0,name:"",description:"",duration:60,categoryId:r}),P(!0)},J=(s,r)=>{we(s),Ce(r),T(!0)},Ee=s=>{s.preventDefault(),V.mutate(n)},De=s=>{s.preventDefault(),Q.mutate(i)},ze=s=>{s.preventDefault(),G.mutate(c)};return Se||ke?e.jsx(ne,{children:e.jsx("div",{className:"flex h-screen items-center justify-center",children:e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})})}):e.jsx(ne,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:[e.jsx("div",{className:"bg-white border-b border-blue-100 shadow-sm",children:e.jsx("div",{className:"container mx-auto py-8 px-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>C("/admin/dashboard"),className:"mr-4 hover:bg-blue-100",children:e.jsx(Ie,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl",children:e.jsx(U,{className:"h-8 w-8 text-white"})}),"Hierarquia de Categorias"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Organize nichos, categorias e serviços em uma estrutura hierárquica"})]})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:b?b.length:0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Nichos"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:b?b.reduce((s,r)=>{var t;return s+(((t=r.categories)==null?void 0:t.length)||0)},0):0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Categorias"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:b?b.reduce((s,r)=>{var t;return s+(((t=r.categories)==null?void 0:t.reduce((l,d)=>{var a;return l+(((a=d.services)==null?void 0:a.length)||0)},0))||0)},0):0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Serviços"})]})]})]})})}),e.jsx("div",{className:"container mx-auto py-8 px-6",children:e.jsx("div",{className:"grid grid-cols-1 gap-6",children:b.length===0?e.jsx(te,{className:"shadow-xl border-0 bg-gradient-to-br from-white to-blue-50",children:e.jsxs(le,{className:"flex flex-col items-center justify-center p-16",children:[e.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(U,{className:"h-12 w-12 text-blue-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Nenhum nicho cadastrado"}),e.jsx("p",{className:"text-gray-600 text-center mb-8 max-w-md",children:"Comece criando um nicho para organizar suas categorias e serviços em uma estrutura hierárquica."}),e.jsxs(o,{onClick:()=>re(),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 rounded-lg px-8 py-3",children:[e.jsx(j,{className:"mr-2 h-5 w-5"}),"Criar Primeiro Nicho"]})]})}):e.jsxs(te,{className:"shadow-xl border-0 bg-gradient-to-br from-white to-blue-50",children:[e.jsxs(Pe,{className:"pb-4",children:[e.jsxs(Te,{className:"text-2xl font-bold text-blue-900 flex items-center gap-2",children:[e.jsx(U,{className:"h-6 w-6 text-blue-500"}),"Estrutura Hierárquica"]}),e.jsx("p",{className:"text-gray-600",children:"Gerencie a hierarquia completa de nichos, categorias e serviços"}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(o,{className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold px-6 py-2 rounded-xl shadow flex items-center gap-2",onClick:()=>{x({id:0,name:"",description:"",icon:"",color:"#38bdf8",nicheId:0}),S(!0)},children:[e.jsx(j,{className:"h-5 w-5"})," Adicionar Categoria"]})})]}),e.jsx(le,{children:e.jsx(ce,{type:"multiple",className:"w-full space-y-2",children:b.map(s=>{var t,l,d;const r=z(s.icon||"default");return e.jsxs(de,{value:`niche-${s.id}`,className:"border-2 border-blue-100 rounded-xl overflow-hidden bg-white shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx(me,{className:"flex-1 hover:no-underline [&[data-state=open]>div>div]:rotate-180",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-3 rounded-full mr-4 shadow-lg",children:e.jsx(r,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-lg text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(_,{className:"bg-blue-100 text-blue-700 hover:bg-blue-200 border-0",children:[((t=s.categories)==null?void 0:t.length)||0," categorias"]}),e.jsxs(_,{className:"bg-green-100 text-green-700 hover:bg-green-200 border-0",children:[((l=s.categories)==null?void 0:l.reduce((a,y)=>{var g;return a+(((g=y.services)==null?void 0:g.length)||0)},0))||0," serviços"]})]})]})]})}),e.jsxs("div",{className:"flex mr-2",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:a=>{a.stopPropagation(),re(s)},className:"h-10 w-10 mr-2 hover:bg-blue-100",children:e.jsx(D,{className:"h-4 w-4 text-blue-600"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:a=>{a.stopPropagation(),J("niche",s.id)},className:"h-10 w-10 text-red-500 hover:bg-red-100",children:e.jsx(B,{className:"h-4 w-4"})})]})]}),e.jsx(ue,{className:"px-6 pb-6",children:e.jsxs("div",{className:"ml-6 border-l-2 border-blue-200 pl-6",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>ae(void 0,s.id),className:"mb-6 bg-white hover:bg-blue-50 border-blue-200 text-blue-700 rounded-lg",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Adicionar Categoria"]}),((d=s.categories)==null?void 0:d.length)>0?e.jsx(ce,{type:"multiple",className:"w-full space-y-3",children:s.categories.map(a=>{var g,k;const y=z(a.icon||"default");return e.jsxs(de,{value:`category-${a.id}`,className:"border border-gray-200 rounded-lg overflow-hidden bg-gray-50 hover:bg-gray-100 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx(me,{className:"flex-1 hover:no-underline [&[data-state=open]>div>div]:rotate-180",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-full mr-3 shadow-md",style:{backgroundColor:a.color||"#3B82F6"},children:e.jsx(y,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:a.name}),e.jsxs(_,{className:"ml-2 bg-purple-100 text-purple-700 hover:bg-purple-200 border-0",children:[((g=a.services)==null?void 0:g.length)||0," serviços"]})]})]})}),e.jsxs("div",{className:"flex mr-2",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:p=>{p.stopPropagation(),ae(a)},className:"h-8 w-8 mr-1 hover:bg-blue-100",children:e.jsx(D,{className:"h-4 w-4 text-blue-600"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:p=>{p.stopPropagation(),J("category",a.id)},className:"h-8 w-8 text-red-500 hover:bg-red-100",children:e.jsx(B,{className:"h-4 w-4"})})]})]}),e.jsx(ue,{className:"px-4 pb-4",children:e.jsxs("div",{className:"ml-4 border-l-2 border-gray-300 pl-4",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>ie(void 0,a.id),className:"mb-4 bg-white hover:bg-gray-50 border-gray-300 text-gray-700 rounded-lg",children:[e.jsx(j,{className:"mr-2 h-4 w-4"}),"Adicionar Serviço"]}),((k=a.services)==null?void 0:k.length)>0?e.jsx("div",{className:"space-y-3",children:a.services.map(p=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-white border border-gray-200 shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-2 rounded-full mr-3",children:e.jsx(H,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:p.name}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[p.duration," minutos"]})]})]})]}),e.jsxs("div",{className:"flex",children:[e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>ie(p),className:"h-8 w-8 mr-1 hover:bg-blue-100",children:e.jsx(D,{className:"h-4 w-4 text-blue-600"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>J("service",p.id),className:"h-8 w-8 text-red-500 hover:bg-red-100",children:e.jsx(B,{className:"h-4 w-4"})})]})]},`service-${p.id}`))}):e.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:[e.jsx(H,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Nenhum serviço cadastrado nesta categoria."})]})]})})]},`category-${a.id}`)})}):e.jsxs("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[e.jsx(es,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Nenhuma categoria cadastrada neste nicho."})]})]})})]},`niche-${s.id}`)})})})]})})}),e.jsx(A,{open:fe,onOpenChange:F,children:e.jsxs(L,{className:"backdrop-blur-md backdrop:bg-blue-100/60 border-0 shadow-2xl rounded-2xl max-w-md",children:[e.jsxs(R,{children:[e.jsxs(W,{className:"text-xl font-bold text-blue-900 flex items-center gap-2",children:[n.id?e.jsx(D,{className:"h-5 w-5 text-blue-500"}):e.jsx(j,{className:"h-5 w-5 text-green-500"}),n.id?"Editar Nicho":"Criar Novo Nicho"]}),e.jsx(X,{className:"text-gray-600",children:n.id?"Atualize as informações do nicho existente.":"Preencha as informações para criar um novo nicho."})]}),e.jsxs("form",{onSubmit:Ee,children:[e.jsxs("div",{className:"space-y-5 py-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"niche-name",className:"font-semibold text-blue-800",children:"Nome do Nicho *"}),e.jsx(w,{id:"niche-name",name:"name",value:n.name,onChange:s=>v({...n,name:s.target.value}),placeholder:"Ex: Beleza e Estética",className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"niche-description",className:"font-semibold text-blue-800",children:"Descrição"}),e.jsx(Y,{id:"niche-description",name:"description",value:n.description,onChange:s=>v({...n,description:s.target.value}),placeholder:"Descreva este nicho de mercado...",rows:3,className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"niche-icon",className:"font-semibold text-blue-800",children:"Ícone *"}),e.jsxs(he,{onValueChange:s=>v({...n,icon:s}),defaultValue:n.icon,children:[e.jsx(xe,{className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100",children:e.jsx(ge,{placeholder:"Selecione um ícone"})}),e.jsx(pe,{children:Object.keys(se||{}).map(s=>e.jsx(be,{value:s,children:s},s))})]})]})]}),e.jsxs(M,{className:"mt-6 gap-2",children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>F(!1),className:"rounded-lg border-blue-200 hover:bg-blue-100",children:"Cancelar"}),e.jsx(o,{type:"submit",disabled:V.isPending,className:"rounded-lg font-semibold shadow-md bg-blue-600 hover:bg-blue-700",children:V.isPending?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),n.id?"Atualizar":"Criar"," Nicho"]})})]})]})]})}),e.jsx(A,{open:ve,onOpenChange:S,children:e.jsxs(L,{className:"fixed left-1/2 top-1/2 z-50 flex w-full max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col border-2 border-blue-100 bg-white shadow-2xl rounded-3xl p-0 overflow-hidden max-h-[90vh]",style:{"--radix-dialog-overlay-background":"transparent","--radix-dialog-overlay-backdrop-filter":"none",padding:0},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-gradient-to-r from-blue-400 via-sky-300 to-indigo-400 rounded-t-3xl"}),e.jsxs("div",{className:"p-6 pt-6 overflow-y-auto max-h-[80vh]",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 p-4 rounded-xl shadow-lg",children:e.jsx(j,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-extrabold text-blue-900 leading-tight",children:i.id?"Editar Categoria":"Criar Nova Categoria"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:i.id?"Atualize as informações da categoria existente.":"Preencha as informações para criar uma nova categoria."})]})]}),e.jsxs("form",{onSubmit:De,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"category-name",className:"font-semibold text-blue-800",children:"Nome da Categoria *"}),e.jsx(w,{id:"category-name",name:"name",value:i.name,onChange:s=>x({...i,name:s.target.value}),placeholder:"Ex: Cabelo",className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-all",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"category-description",className:"font-semibold text-blue-800",children:"Descrição"}),e.jsx(Y,{id:"category-description",name:"description",value:i.description,onChange:s=>x({...i,description:s.target.value}),placeholder:"Descreva esta categoria...",rows:3,className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-all"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"category-icon",className:"font-semibold text-blue-800",children:"Ícone *"}),e.jsxs(he,{onValueChange:s=>x({...i,icon:s}),defaultValue:i.icon,children:[e.jsx(xe,{className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-all bg-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[i.icon&&z(i.icon)?e.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5",children:z(i.icon)({className:"w-5 h-5 text-blue-500"})}):null,e.jsx(ge,{placeholder:"Selecione um ícone"})]})}),e.jsx(pe,{className:"bg-white border-2 border-blue-100 shadow-2xl rounded-lg",children:Object.keys(se||{}).map(s=>{const r=z(s);return e.jsxs(be,{value:s,className:"flex items-center gap-2 px-3 py-2 hover:bg-blue-50",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5",children:r?e.jsx(r,{className:"w-5 h-5 text-blue-500"}):null}),e.jsx("span",{className:"text-gray-700",children:s})]},s)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"category-color",className:"font-semibold text-blue-800",children:"Cor *"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(w,{id:"category-color",name:"color",type:"color",value:i.color,onChange:s=>x({...i,color:s.target.value}),className:"w-12 h-10 rounded-lg border-2 border-blue-200"}),e.jsx(w,{type:"text",value:i.color,onChange:s=>x({...i,color:s.target.value}),className:"flex-1 rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 transition-all"})]})]})]})]}),e.jsxs(M,{className:"mt-8 gap-2",children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>S(!1),className:"rounded-lg border-blue-200 hover:bg-blue-50",children:"Cancelar"}),e.jsx(o,{type:"submit",disabled:Q.isPending,className:"rounded-lg font-semibold shadow-md bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 px-8 py-2 text-base",children:Q.isPending?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),i.id?"Atualizar":"Criar"," Categoria"]})})]})]})]})]})}),e.jsx(A,{open:Ne,onOpenChange:P,children:e.jsxs(L,{className:"backdrop-blur-md backdrop:bg-blue-100/60 border-0 shadow-2xl rounded-2xl max-w-md",children:[e.jsxs(R,{children:[e.jsxs(W,{className:"text-xl font-bold text-blue-900 flex items-center gap-2",children:[c.id?e.jsx(D,{className:"h-5 w-5 text-blue-500"}):e.jsx(j,{className:"h-5 w-5 text-green-500"}),c.id?"Editar Serviço":"Criar Novo Serviço"]}),e.jsx(X,{className:"text-gray-600",children:c.id?"Atualize as informações do serviço existente.":"Preencha as informações para criar um novo serviço."})]}),e.jsxs("form",{onSubmit:ze,children:[e.jsxs("div",{className:"space-y-5 py-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"service-name",className:"font-semibold text-blue-800",children:"Nome do Serviço *"}),e.jsx(w,{id:"service-name",name:"name",value:c.name,onChange:s=>N({...c,name:s.target.value}),placeholder:"Ex: Corte de Cabelo Feminino",className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"service-description",className:"font-semibold text-blue-800",children:"Descrição"}),e.jsx(Y,{id:"service-description",name:"description",value:c.description,onChange:s=>N({...c,description:s.target.value}),placeholder:"Descreva este serviço...",rows:3,className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"service-duration",className:"font-semibold text-blue-800",children:"Duração (minutos) *"}),e.jsx(w,{id:"service-duration",name:"duration",type:"number",min:"5",step:"5",value:c.duration,onChange:s=>N({...c,duration:parseInt(s.target.value)||30}),placeholder:"30",className:"rounded-lg border-blue-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100",required:!0})]})]}),e.jsxs(M,{className:"mt-6 gap-2",children:[e.jsx(o,{type:"button",variant:"outline",onClick:()=>P(!1),className:"rounded-lg border-blue-200 hover:bg-blue-100",children:"Cancelar"}),e.jsx(o,{type:"submit",disabled:G.isPending,className:"rounded-lg font-semibold shadow-md bg-blue-600 hover:bg-blue-700",children:G.isPending?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),c.id?"Atualizar":"Criar"," Serviço"]})})]})]})]})}),e.jsx(A,{open:ye,onOpenChange:T,children:e.jsxs(L,{className:"backdrop-blur-md backdrop:bg-red-100/60 border-0 shadow-2xl rounded-2xl",children:[e.jsxs(R,{children:[e.jsxs(W,{className:"text-xl font-bold text-red-700 flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-red-500"}),"Confirmar exclusão"]}),e.jsxs(X,{className:"text-gray-700",children:[f==="niche"&&"Tem certeza que deseja excluir este nicho? Todas as categorias e serviços relacionados também serão excluídos.",f==="category"&&"Tem certeza que deseja excluir esta categoria? Todos os serviços relacionados também serão excluídos.",f==="service"&&"Tem certeza que deseja excluir este serviço?"]})]}),e.jsxs(M,{className:"gap-2",children:[e.jsx(o,{variant:"outline",onClick:()=>T(!1),className:"rounded-lg border-blue-200 hover:bg-blue-100",children:"Cancelar"}),e.jsx(o,{variant:"destructive",onClick:()=>Z.mutate(),disabled:Z.isPending,className:"rounded-lg font-semibold shadow-md bg-red-600 hover:bg-red-700",children:Z.isPending?"Excluindo...":"Sim, excluir"})]})]})})]})})}export{cr as default};
