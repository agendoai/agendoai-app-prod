import{j as a}from"./ui-UIpCtT3r.js";import{r as h}from"./vendor-vA4cx1mx.js";import{j as C,b as N,c as b,C as T,d as w,e as y,f as E,g as P,B as c,X as S,q as z}from"./index-DMVSlINz.js";import{u as k}from"./useMutation-mYWno7MC.js";import{A}from"./AdminLayout-bauCSgLQ.js";import{I as q}from"./input-swbZ2nNg.js";import{S as r}from"./skeleton-CgQ25LnD.js";import{T as I,b as L,c as m,d as u,e as B,f as n}from"./table-BurWIJog.js";import{S as F}from"./save-BS2hpAuB.js";import"./router-CxXythJb.js";import"./dropdown-menu-DwBmztZZ.js";import"./chevron-right-D0P32XR-.js";import"./check-pZ3JKVe2.js";import"./circle-CRjqYs4g.js";import"./avatar-DJ_tL6P_.js";import"./badge-CIXRfmkI.js";import"./sheet-46XB4-U3.js";import"./menu-DQAb75no.js";import"./log-out-CiUJLpAa.js";import"./settings-Blcd0dvr.js";import"./users-CGD53Qtc.js";import"./chart-pie-BcDzbHki.js";import"./calendar-CYlMr0qt.js";import"./message-square-CHbKsffD.js";import"./file-text-CgPtDB9Y.js";import"./dollar-sign-ByvZRex2.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=C("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);function ca(){const{toast:t}=N(),[p,o]=h.useState(null),[x,l]=h.useState(""),{data:i=[],isLoading:f=!1}=b({queryKey:["/api/admin/category-fees"],refetchOnWindowFocus:!1,enabled:!1}),d=k({mutationFn:async({categoryId:e,feePercent:s})=>(t({title:"Funcionalidade desativada",description:"O sistema de marketplace foi removido. Esta funcionalidade não está mais disponível.",variant:"destructive"}),null),onSuccess:()=>{t({title:"Taxa atualizada",description:"A taxa da categoria foi atualizada com sucesso."}),z.invalidateQueries({queryKey:["/api/admin/category-fees"]}),o(null)},onError:e=>{t({title:"Erro ao atualizar taxa",description:e.message||"Ocorreu um erro ao atualizar a taxa da categoria.",variant:"destructive"})}}),j=e=>{o(e.id),l(e.feePercent.toString())},g=()=>{o(null),l("")},v=e=>{const s=parseFloat(x);if(isNaN(s)||s<0||s>100){t({title:"Valor inválido",description:"A taxa deve ser um número entre 0 e 100.",variant:"destructive"});return}d.mutate({categoryId:e,feePercent:s})};return a.jsx(A,{children:a.jsxs("div",{className:"container py-6",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-8",children:"Gerenciar Taxas por Categoria"}),a.jsxs(T,{children:[a.jsxs(w,{children:[a.jsx(y,{children:"Taxas de Comissão por Categoria"}),a.jsx(E,{children:"Configure as taxas de comissão específicas para cada categoria. A taxa padrão da plataforma (10%) é aplicada quando não há uma taxa específica definida."})]}),a.jsx(P,{children:f?a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{className:"h-10 w-full"}),a.jsx(r,{className:"h-10 w-full"}),a.jsx(r,{className:"h-10 w-full"}),a.jsx(r,{className:"h-10 w-full"})]}):a.jsxs(I,{children:[a.jsx(L,{children:a.jsxs(m,{children:[a.jsx(u,{children:"Categoria"}),a.jsx(u,{children:"Taxa (%)"}),a.jsx(u,{className:"w-[100px]",children:"Ações"})]})}),a.jsx(B,{children:(i==null?void 0:i.length)===0?a.jsx(m,{children:a.jsx(n,{colSpan:3,className:"text-center text-muted-foreground py-6",children:"Nenhuma categoria encontrada."})}):i==null?void 0:i.map(e=>a.jsxs(m,{children:[a.jsx(n,{className:"font-medium",children:e.name}),a.jsx(n,{children:p===e.id?a.jsx(q,{type:"number",min:"0",max:"100",step:"0.1",value:x,onChange:s=>l(s.target.value),className:"w-24"}):a.jsxs("span",{children:[e.feePercent,"%"]})}),a.jsx(n,{children:p===e.id?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(c,{size:"sm",variant:"ghost",onClick:()=>v(e.id),disabled:d.isPending,children:a.jsx(F,{className:"h-4 w-4"})}),a.jsx(c,{size:"sm",variant:"ghost",onClick:g,disabled:d.isPending,children:a.jsx(S,{className:"h-4 w-4"})})]}):a.jsx(c,{size:"sm",variant:"ghost",onClick:()=>j(e),children:a.jsx(H,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})})}export{ca as default};
