import{m as C,c as N,r as h,d as b,j as a,C as T,f as w,g as y,h as E,i as P,X as S,q as z}from"./index-DOe1OCu1.js";import{u as k}from"./useMutation-Lmj9MX3Y.js";import{A}from"./AdminLayout-CQlelrI7.js";import{B as c}from"./button-C168b4m4.js";import{I as q}from"./input-BHH75Tpk.js";import{S as r}from"./skeleton-B-0dSqkR.js";import{T as I,b as L,c as m,d as p,e as B,f as n}from"./table-CpYERuu-.js";import{S as F}from"./save-C3GtLHVl.js";import"./dropdown-menu-BOCN3PER.js";import"./index-DdZceiuF.js";import"./index-CtQ14QdP.js";import"./index-C933frGi.js";import"./index-tIxYtZzE.js";import"./index-DbsNQ1RS.js";import"./index-CQF81cx3.js";import"./chevron-right-D4BSFwhT.js";import"./check-C4wNsCXx.js";import"./circle-DjQT6JQX.js";import"./avatar-DkIWG9bC.js";import"./badge-Bzn9UYFT.js";import"./sheet-B7ZKKDV6.js";import"./index-DxOiueDc.js";import"./menu-ylsVJAGl.js";import"./log-out-Bcm4dD8k.js";import"./settings-CM1XtqIa.js";import"./users-CKUz_ceh.js";import"./chart-pie-Z7CRhCgQ.js";import"./calendar-Mn3IWFfL.js";import"./message-square-BIM01sf-.js";import"./file-text-D617h84C.js";import"./dollar-sign-D5ikk9cU.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=C("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);function ha(){const{toast:t}=N(),[u,o]=h.useState(null),[x,l]=h.useState(""),{data:i=[],isLoading:f=!1}=b({queryKey:["/api/admin/category-fees"],refetchOnWindowFocus:!1,enabled:!1}),d=k({mutationFn:async({categoryId:e,feePercent:s})=>(t({title:"Funcionalidade desativada",description:"O sistema de marketplace foi removido. Esta funcionalidade não está mais disponível.",variant:"destructive"}),null),onSuccess:()=>{t({title:"Taxa atualizada",description:"A taxa da categoria foi atualizada com sucesso."}),z.invalidateQueries({queryKey:["/api/admin/category-fees"]}),o(null)},onError:e=>{t({title:"Erro ao atualizar taxa",description:e.message||"Ocorreu um erro ao atualizar a taxa da categoria.",variant:"destructive"})}}),j=e=>{o(e.id),l(e.feePercent.toString())},g=()=>{o(null),l("")},v=e=>{const s=parseFloat(x);if(isNaN(s)||s<0||s>100){t({title:"Valor inválido",description:"A taxa deve ser um número entre 0 e 100.",variant:"destructive"});return}d.mutate({categoryId:e,feePercent:s})};return a.jsx(A,{children:a.jsxs("div",{className:"container py-6",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-8",children:"Gerenciar Taxas por Categoria"}),a.jsxs(T,{children:[a.jsxs(w,{children:[a.jsx(y,{children:"Taxas de Comissão por Categoria"}),a.jsx(E,{children:"Configure as taxas de comissão específicas para cada categoria. A taxa padrão da plataforma (10%) é aplicada quando não há uma taxa específica definida."})]}),a.jsx(P,{children:f?a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{className:"h-10 w-full"}),a.jsx(r,{className:"h-10 w-full"}),a.jsx(r,{className:"h-10 w-full"}),a.jsx(r,{className:"h-10 w-full"})]}):a.jsxs(I,{children:[a.jsx(L,{children:a.jsxs(m,{children:[a.jsx(p,{children:"Categoria"}),a.jsx(p,{children:"Taxa (%)"}),a.jsx(p,{className:"w-[100px]",children:"Ações"})]})}),a.jsx(B,{children:(i==null?void 0:i.length)===0?a.jsx(m,{children:a.jsx(n,{colSpan:3,className:"text-center text-muted-foreground py-6",children:"Nenhuma categoria encontrada."})}):i==null?void 0:i.map(e=>a.jsxs(m,{children:[a.jsx(n,{className:"font-medium",children:e.name}),a.jsx(n,{children:u===e.id?a.jsx(q,{type:"number",min:"0",max:"100",step:"0.1",value:x,onChange:s=>l(s.target.value),className:"w-24"}):a.jsxs("span",{children:[e.feePercent,"%"]})}),a.jsx(n,{children:u===e.id?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(c,{size:"sm",variant:"ghost",onClick:()=>v(e.id),disabled:d.isPending,children:a.jsx(F,{className:"h-4 w-4"})}),a.jsx(c,{size:"sm",variant:"ghost",onClick:g,disabled:d.isPending,children:a.jsx(S,{className:"h-4 w-4"})})]}):a.jsx(c,{size:"sm",variant:"ghost",onClick:()=>j(e),children:a.jsx(H,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})})}export{ha as default};
