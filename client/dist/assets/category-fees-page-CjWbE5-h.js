import{m as C,c as N,r as h,d as b,j as a,C as T,f as w,g as y,h as E,i as P,X as S,q as z}from"./index-DlYle-HK.js";import{u as k}from"./useMutation-DGOmPVD5.js";import{A}from"./AdminLayout-CQzxIq1i.js";import{B as c}from"./button-0YWTsIWD.js";import{I as q}from"./input-DSZJflgw.js";import{S as r}from"./skeleton-ALyld-kH.js";import{T as I,b as L,c as m,d as p,e as B,f as n}from"./table-BwOB_AhB.js";import{S as F}from"./save-BdSIuAjG.js";import"./dropdown-menu-QmsU4ZtQ.js";import"./index-XDpD7AfN.js";import"./index-BFjopokf.js";import"./index-COYZuLqD.js";import"./index-BuB8ogb1.js";import"./index-bkFsOTdp.js";import"./index-BBr4QLH3.js";import"./chevron-right-CMIMwi26.js";import"./check-B4G7YtLf.js";import"./circle-CGwfQvWY.js";import"./avatar-D38M3gQ1.js";import"./badge-CHUQCCUH.js";import"./sheet-BJDA-4Yv.js";import"./index-DOmVfBTy.js";import"./menu-BPr4aO1K.js";import"./log-out-DFz9Lucp.js";import"./settings-DgxQfKxR.js";import"./users-kyBtF-jk.js";import"./chart-pie-BVw-ZGhz.js";import"./calendar-DIqdCud3.js";import"./message-square-xhK-fczP.js";import"./file-text-vT1GLS6i.js";import"./dollar-sign-PQvuyeTj.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=C("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);function ha(){const{toast:t}=N(),[u,o]=h.useState(null),[x,l]=h.useState(""),{data:i=[],isLoading:f=!1}=b({queryKey:["/api/admin/category-fees"],refetchOnWindowFocus:!1,enabled:!1}),d=k({mutationFn:async({categoryId:e,feePercent:s})=>(t({title:"Funcionalidade desativada",description:"O sistema de marketplace foi removido. Esta funcionalidade não está mais disponível.",variant:"destructive"}),null),onSuccess:()=>{t({title:"Taxa atualizada",description:"A taxa da categoria foi atualizada com sucesso."}),z.invalidateQueries({queryKey:["/api/admin/category-fees"]}),o(null)},onError:e=>{t({title:"Erro ao atualizar taxa",description:e.message||"Ocorreu um erro ao atualizar a taxa da categoria.",variant:"destructive"})}}),j=e=>{o(e.id),l(e.feePercent.toString())},g=()=>{o(null),l("")},v=e=>{const s=parseFloat(x);if(isNaN(s)||s<0||s>100){t({title:"Valor inválido",description:"A taxa deve ser um número entre 0 e 100.",variant:"destructive"});return}d.mutate({categoryId:e,feePercent:s})};return a.jsx(A,{children:a.jsxs("div",{className:"container py-6",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight mb-8",children:"Gerenciar Taxas por Categoria"}),a.jsxs(T,{children:[a.jsxs(w,{children:[a.jsx(y,{children:"Taxas de Comissão por Categoria"}),a.jsx(E,{children:"Configure as taxas de comissão específicas para cada categoria. A taxa padrão da plataforma (10%) é aplicada quando não há uma taxa específica definida."})]}),a.jsx(P,{children:f?a.jsxs("div",{className:"space-y-2",children:[a.jsx(r,{className:"h-10 w-full"}),a.jsx(r,{className:"h-10 w-full"}),a.jsx(r,{className:"h-10 w-full"}),a.jsx(r,{className:"h-10 w-full"})]}):a.jsxs(I,{children:[a.jsx(L,{children:a.jsxs(m,{children:[a.jsx(p,{children:"Categoria"}),a.jsx(p,{children:"Taxa (%)"}),a.jsx(p,{className:"w-[100px]",children:"Ações"})]})}),a.jsx(B,{children:(i==null?void 0:i.length)===0?a.jsx(m,{children:a.jsx(n,{colSpan:3,className:"text-center text-muted-foreground py-6",children:"Nenhuma categoria encontrada."})}):i==null?void 0:i.map(e=>a.jsxs(m,{children:[a.jsx(n,{className:"font-medium",children:e.name}),a.jsx(n,{children:u===e.id?a.jsx(q,{type:"number",min:"0",max:"100",step:"0.1",value:x,onChange:s=>l(s.target.value),className:"w-24"}):a.jsxs("span",{children:[e.feePercent,"%"]})}),a.jsx(n,{children:u===e.id?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(c,{size:"sm",variant:"ghost",onClick:()=>v(e.id),disabled:d.isPending,children:a.jsx(F,{className:"h-4 w-4"})}),a.jsx(c,{size:"sm",variant:"ghost",onClick:g,disabled:d.isPending,children:a.jsx(S,{className:"h-4 w-4"})})]}):a.jsx(c,{size:"sm",variant:"ghost",onClick:()=>j(e),children:a.jsx(H,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})})}export{ha as default};
