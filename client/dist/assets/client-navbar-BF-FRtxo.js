import{j as e}from"./ui-UIpCtT3r.js";import{r as A}from"./vendor-vA4cx1mx.js";import{u as P,L as f}from"./router-CxXythJb.js";import{l as B,d as z,e as I,f as D,h as H,u as O,X as R}from"./index-BJ9Cw0LR.js";import{A as E,a as U,b as F}from"./avatar-DEanbPY_.js";import{B as n}from"./button-BvsVcTDx.js";import{S as V,a as W,b as X}from"./sheet-NdLuqHVB.js";import{I as q}from"./input-CNw_l4dQ.js";import{P as G,a as J,b as K}from"./popover-Cm05a-D6.js";import{T as Q,a as Y,b as T,c as S}from"./tabs-0uPJ4FVU.js";import{B as p}from"./badge-BQpU5zw7.js";import{S as k}from"./separator-B7JIGNlt.js";import{B as L}from"./bell-vRE7a1ng.js";import{f as Z}from"./format-CGvBu07F.js";import{p as _}from"./pt-BR-Cxqo7XV3.js";import{T as b,a as w,b as y,c as C}from"./tooltip-COUzrM8n.js";import{m as M}from"./proxy-Bw6ASuXk.js";import{M as ee}from"./menu-B7gXVrLX.js";import{H as se}from"./house-CCMYCVaH.js";import{S as $}from"./search-ByWcnwgm.js";import{C as ae}from"./calendar-check-DUwfC2Eu.js";import{U as te}from"./user-C2y4PfJ8.js";import{L as re}from"./log-out-CdVFLkWN.js";function le({onClose:t}={}){const{notifications:r,markAsRead:m,clearAllNotifications:h}=B(),[u,c]=A.useState(!1),i=r.filter(a=>!a.read).length,o=a=>{m(a)},j=()=>{h(),c(!1),t&&t()},d=a=>{const x=new Date().getTime()-a.getTime(),s=Math.floor(x/1e3),g=Math.floor(s/60),N=Math.floor(g/60),v=Math.floor(N/24);return s<60?"Agora mesmo":g<60?`${g} min atrás`:N<24?`${N} h atrás`:v<7?`${v} ${v===1?"dia":"dias"} atrás`:Z(a,"dd/MM/yyyy",{locale:_})};return e.jsxs(G,{open:u,onOpenChange:c,children:[e.jsx(J,{asChild:!0,children:e.jsxs(n,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(L,{className:"h-5 w-5"}),i>0&&e.jsx(p,{variant:"destructive",className:"absolute -top-1 -right-1 px-1.5 py-0.5 min-w-5 h-5 flex items-center justify-center rounded-full",children:i>9?"9+":i})]})}),e.jsx(K,{align:"end",className:"w-80 p-0",children:e.jsxs(Q,{defaultValue:"all",className:"w-full",children:[e.jsxs(z,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(I,{className:"text-base",children:"Notificações"}),e.jsxs(Y,{className:"grid w-[160px] grid-cols-2",children:[e.jsx(T,{value:"all",children:"Todas"}),e.jsx(T,{value:"unread",children:"Não lidas"})]})]}),e.jsx(D,{children:i>0?`Você tem ${i} notificação${i!==1?"ções":""} não lida${i!==1?"s":""}`:"Nenhuma notificação não lida"})]}),e.jsx(S,{value:"all",className:"max-h-[400px] overflow-auto",children:r.length>0?r.map(a=>e.jsxs("div",{className:`p-3 ${a.read?"bg-background":"bg-accent/20"}`,onClick:()=>!a.read&&o(a.id),children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:a.title}),e.jsx("span",{className:"text-xs text-muted-foreground",children:d(new Date(a.createdAt))})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.message}),a.type&&e.jsx(p,{className:"mt-2",variant:"outline",children:a.type}),a!==r[r.length-1]&&e.jsx(k,{className:"mt-3"})]},a.id)):e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Nenhuma notificação"})}),e.jsx(S,{value:"unread",className:"max-h-[400px] overflow-auto",children:r.filter(a=>!a.read).length>0?r.filter(a=>!a.read).map(a=>e.jsxs("div",{className:"p-3 bg-accent/20",onClick:()=>o(a.id),children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:a.title}),e.jsx("span",{className:"text-xs text-muted-foreground",children:d(new Date(a.createdAt))})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.message}),a.type&&e.jsx(p,{className:"mt-2",variant:"outline",children:a.type}),a!==r.filter(l=>!l.read)[r.filter(l=>!l.read).length-1]&&e.jsx(k,{className:"mt-3"})]},a.id)):e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Nenhuma notificação não lida"})}),r.length>0&&e.jsx(H,{className:"border-t p-2 flex justify-center",children:e.jsx(n,{variant:"outline",size:"sm",className:"w-full",onClick:j,children:"Limpar todas"})})]})})]})}function Me(){var x;const{user:t,logoutMutation:r}=O(),{unreadCount:m}=B(),[h]=P(),[u,c]=A.useState(!1),[i,o]=A.useState(!1),j=()=>{r.mutate(void 0,{onSuccess:()=>{window.location.reload()},onError:s=>{console.error("Erro no logout:",s)}})},d=[{href:"/client/dashboard",label:"Início",icon:se,isActive:s=>s==="/client/dashboard"||s==="/client"||s==="/"},{href:"/client/search",label:"Buscar",icon:$,isActive:s=>s.startsWith("/client/search")},{href:"/client/appointments",label:"Agenda",icon:ae,isActive:s=>s.includes("appointments")||s.includes("agendamentos")},{href:"/profile",label:"Perfil",icon:te,isActive:s=>s.includes("profile")||s.includes("perfil")||s.includes("settings")}],a=()=>{o(!i)},l=s=>s.isActive?s.isActive(h):h===s.href;return e.jsxs(M.header,{className:"sticky top-0 z-40 bg-white border-b shadow-sm",initial:{y:-60,opacity:0},animate:{y:0,opacity:1},transition:{duration:.3},children:[e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 flex h-16 items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{children:e.jsxs(w,{children:[e.jsx(y,{asChild:!0,children:e.jsx(V,{asChild:!0,className:"lg:hidden",children:e.jsxs(n,{variant:"ghost",size:"icon",onClick:()=>c(!0),children:[e.jsx(ee,{className:"h-6 w-6"}),e.jsx("span",{className:"sr-only",children:"Abrir menu"})]})})}),e.jsx(C,{children:"Menu"})]})}),e.jsx(f,{href:"/",children:e.jsx("div",{className:"flex items-center",children:e.jsx(M.h1,{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-primary/80",whileHover:{scale:1.05},transition:{duration:.2},children:"AgendoAI"})})}),e.jsx("nav",{className:"ml-8 hidden lg:flex lg:items-center lg:space-x-4",children:d.map(s=>e.jsx(n,{asChild:!0,variant:l(s)?"default":"ghost",className:l(s)?"bg-primary/10 text-primary hover:bg-primary/20":"",children:e.jsxs(f,{href:s.href,children:[e.jsx(s.icon,{className:"mr-2 h-4 w-4"}),s.label]})},s.href))})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("form",{className:"hidden md:flex relative w-full max-w-sm",children:[e.jsx($,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(q,{type:"search",placeholder:"Buscar serviços...",className:"pl-8"})]}),e.jsx(b,{children:e.jsxs(w,{children:[e.jsx(y,{asChild:!0,children:e.jsxs("div",{className:"relative",children:[e.jsxs(n,{variant:"ghost",size:"icon",onClick:a,className:"relative",children:[e.jsx(L,{className:"h-5 w-5"}),m>0&&e.jsx(p,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:m})]}),i&&e.jsx(le,{onClose:()=>o(!1)})]})}),e.jsx(C,{children:"Notificações"})]})}),e.jsx(b,{children:e.jsxs(w,{children:[e.jsx(y,{asChild:!0,children:e.jsx(f,{href:"/client/profile","aria-label":"Perfil do usuário",children:e.jsxs(E,{className:"cursor-pointer hover:ring-2 hover:ring-offset-2 hover:ring-primary/20 transition-all",children:[e.jsx(U,{src:(t==null?void 0:t.profileImage)||""}),e.jsx(F,{className:"bg-primary text-white uppercase",children:((x=t==null?void 0:t.name)==null?void 0:x.charAt(0))||"U"})]})})}),e.jsx(C,{children:(t==null?void 0:t.name)||"Perfil"})]})})]})]}),e.jsx(W,{open:u,onOpenChange:c,children:e.jsxs(X,{side:"left",className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Menu"})}),e.jsx(n,{size:"icon",variant:"ghost",onClick:()=>c(!1),children:e.jsx(R,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex flex-col gap-2 mt-6",children:[d.map(s=>e.jsx(n,{asChild:!0,variant:l(s)?"default":"ghost",className:`justify-start transition-all duration-150 ${l(s)?"bg-[#58c9d1] text-white shadow-md":"text-[#58c9d1] hover:bg-[#58c9d1]/10 hover:text-[#58c9d1]"} border-0`,style:{boxShadow:l(s)?"0 2px 8px 0 #58c9d133":void 0},onClick:()=>c(!1),children:e.jsxs(f,{href:s.href,className:"flex items-center",children:[e.jsx(s.icon,{className:`mr-2 h-5 w-5 ${l(s)?"text-white":"text-[#58c9d1]"}`}),s.label]})},s.href)),e.jsxs(n,{variant:"outline",className:"justify-start mt-4 text-[#58c9d1] border-[#58c9d1] hover:bg-[#58c9d1]/10 hover:text-[#58c9d1]",onClick:j,children:[e.jsx(re,{className:"mr-2 h-5 w-5 text-[#58c9d1]"}),"Sair"]})]})]})})]})}export{Me as C,le as N};
