import{r as w,d as v,j as e,C as o,i as x,L as c}from"./index-DOe1OCu1.js";import{P as C}from"./provider-layout-nV42KACr.js";import{I as L}from"./input-BHH75Tpk.js";import{B as h}from"./button-C168b4m4.js";import{S as d}from"./skeleton-B-0dSqkR.js";import{T,b as P,c as p,d as r,e as S,f as l}from"./table-CpYERuu-.js";import{U as j}from"./user-BQOYdOBU.js";import{S as A}from"./search-Bjz8DxPP.js";import{M as u}from"./mail-CYxLHYG_.js";import{P as N}from"./phone-CT1DF7q7.js";import{C as b}from"./calendar-Mn3IWFfL.js";import{M as B}from"./map-pin-Z18Glv-N.js";import"./arrow-left-BPt4aJQo.js";function _(){const[t,f]=w.useState(""),{data:m,isLoading:g}=v({queryKey:["/api/provider/clients"],retry:1}),a=m==null?void 0:m.filter(s=>s.name.toLowerCase().includes(t.toLowerCase())||s.email.toLowerCase().includes(t.toLowerCase())||s.phone&&s.phone.includes(t)),i=s=>s?new Date(s).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):"Sem registros",y=()=>g?e.jsx("div",{className:"space-y-3",children:Array(5).fill(0).map((s,n)=>e.jsx(o,{children:e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{className:"h-6 w-48"}),e.jsx(d,{className:"h-4 w-32"})]}),e.jsx(d,{className:"h-10 w-24"})]})})},n))}):a!=null&&a.length?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"hidden md:block overflow-hidden rounded-xl border border-gray-200 shadow-sm mb-6",children:e.jsxs(T,{children:[e.jsx(P,{children:e.jsxs(p,{className:"bg-gray-50 border-b-2 border-blue-600",children:[e.jsx(r,{className:"text-gray-700 font-semibold",children:"Nome"}),e.jsx(r,{className:"text-gray-700 font-semibold",children:"Contato"}),e.jsx(r,{className:"text-gray-700 font-semibold",children:"Agendamentos"}),e.jsx(r,{className:"text-gray-700 font-semibold",children:"Último Atendimento"}),e.jsx(r,{className:"text-right text-gray-700 font-semibold",children:"Ações"})]})}),e.jsx(S,{children:a==null?void 0:a.map((s,n)=>e.jsxs(p,{className:n%2===0?"bg-white":"bg-gray-50",children:[e.jsx(l,{className:"font-bold text-gray-900",children:s.name}),e.jsx(l,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex items-center text-xs text-blue-600 mb-1",children:[e.jsx(u,{className:"h-3 w-3 mr-1"})," ",s.email]}),s.phone&&e.jsxs("span",{className:"flex items-center text-xs text-green-600",children:[e.jsx(N,{className:"h-3 w-3 mr-1"})," ",s.phone]})]})}),e.jsx(l,{children:e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full text-xs font-semibold",children:[s.appointmentCount," atendimentos"]})}),e.jsx(l,{children:e.jsxs("span",{className:"flex items-center text-xs text-orange-500",children:[e.jsx(b,{className:"h-3 w-3 mr-1"})," ",i(s.lastAppointment)]})}),e.jsx(l,{className:"text-right",children:e.jsx(c,{href:`/provider/clients/${s.id}`,children:e.jsx(h,{className:"bg-blue-700 hover:bg-blue-800 text-white rounded px-4 py-1 text-xs font-semibold",children:"Ver histórico"})})})]},s.id))})]})}),e.jsx("div",{className:"md:hidden",children:a==null?void 0:a.map(s=>e.jsx(o,{className:"bg-white shadow-lg rounded-xl p-4 mb-3",children:e.jsx(x,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:s.name}),e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full text-xs font-semibold",children:[s.appointmentCount," atendimentos"]})]}),e.jsxs("div",{className:"flex items-center text-blue-600",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm",children:s.phone})]}),e.jsxs("div",{className:"flex items-center text-orange-500",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{className:"text-sm",children:["Último atendimento: ",i(s.lastAppointment)]})]}),s.address&&e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm",children:s.address})]}),e.jsx("div",{className:"mt-2",children:e.jsx(c,{href:`/provider/clients/${s.id}`,children:e.jsx(h,{className:"bg-blue-700 hover:bg-blue-800 text-white rounded w-full px-4 py-2 text-sm font-semibold",children:"Ver histórico"})})})]})})},s.id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium",children:"Nenhum cliente encontrado"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:t?"Tente usar termos diferentes na busca":"Você ainda não possui clientes"})]});return e.jsx(C,{children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(j,{className:"h-8 w-8 text-blue-600"}),"Meus Clientes"]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-3 h-5 w-5 text-blue-600"}),e.jsx(L,{className:"pl-12 py-3 rounded-lg shadow border border-gray-200 placeholder:text-gray-400",placeholder:"Buscar clientes por nome, email ou telefone",value:t,onChange:s=>f(s.target.value)})]})}),y()]})})}export{_ as default};
