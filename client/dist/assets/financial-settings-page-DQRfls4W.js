import{j as e}from"./ui-UIpCtT3r.js";import{r as T}from"./vendor-vA4cx1mx.js";import{u as Ye}from"./router-CxXythJb.js";import{j as Je,b as es,c as P,B as g,a2 as y,C as I,d as W,e as $,f as _,g as M,q as me,i as b}from"./index-DyNThJGx.js";import{u as L}from"./useMutation-upcUYYIZ.js";import{u as ve,t as fe,o as $e,p as F,b as w,s as D,e as ss,n as f,Z as xe,c as ye}from"./zod-BPPSwYm9.js";import{C as N}from"./checkbox-CYLOwepX.js";import{I as h}from"./input-Cpt0D0t5.js";import{L as as}from"./label-BRQ1ms59.js";import{S as be}from"./separator-BO2ZN1UN.js";import{T as rs,a as ns,b as G,c as Q}from"./tabs-DxyIPEUL.js";import{S as H,a as R,b as z,c as B,d as C}from"./select-U8nqgpyh.js";import{F as Ce,a as t,b as c,d as l,c as d,f as m,e as x}from"./form-BhR49_6F.js";import{A as Ne,b as Se,c as we,d as De,e as Fe,f as Te,h as Ae}from"./alert-dialog-BXMrrpMc.js";import{T as os,b as is,c as Ee,d as K,e as ts,f as V}from"./table-C2M5mzvm.js";import{D as cs,a as ls,b as ds,c as ms,d as xs,e as ps}from"./dialog-C-gXrtRk.js";import{P as ke,a as Pe,b as Ie}from"./popover-CdbiayGx.js";import{B as pe}from"./badge-8936XTFZ.js";import{C as Me}from"./calendar-BeTNI8-t.js";import{A as hs}from"./admin-layout-nn1idvIF.js";import{A as us}from"./arrow-left-DD0ygwFe.js";import{C as js}from"./credit-card-BAr81XRd.js";import{W as gs}from"./wallet-Bx047SDf.js";import{P as he}from"./percent-DW1rUY60.js";import{D as U}from"./dollar-sign-CmkMivcb.js";import{P as Le}from"./plus-DVP-Dd5X.js";import{S as vs}from"./square-pen-CRBmSquH.js";import{T as fs}from"./trash-2-mf_zJC69.js";import{S as Ke}from"./save-EOyhNXoY.js";import{C as Ve}from"./circle-check-big-7tEvZbks.js";import{C as qe}from"./circle-x-CdtECqvj.js";import"./index-BH3L9zMK.js";import"./check-l4wqyeDa.js";import"./index-BdQq_4o_.js";import"./chevron-down-DiXfwTNR.js";import"./en-US-xSPtgCq_.js";import"./endOfMonth-CH6FLORf.js";import"./format-CGvBu07F.js";import"./isSameDay-BJjwZdUf.js";import"./addDays-BQ37Zmqx.js";import"./subDays-K6OA95hK.js";import"./chevron-right-DM1GZBJV.js";import"./chevron-left-BADql8Jf.js";import"./navbar-KiPP5LKi.js";import"./proxy-DTNweHv3.js";import"./search-7vo4URqD.js";import"./calendar-check-CFgGdJAu.js";import"./user-CHl9goRc.js";import"./avatar-SFIqVQOH.js";import"./dropdown-menu-BQgRWKCC.js";import"./circle-BxF79SA4.js";import"./settings-DHajXvJe.js";import"./log-out-CF9-_D6G.js";import"./menu-B3vjIUbu.js";import"./bell-_h50M4t4.js";import"./users-CrYhhpEH.js";import"./calendar-CqpYA11m.js";import"./trending-up-Dpcw5jBC.js";import"./folder-tree-aeBltaha.js";import"./share-2-CRUUAGC-.js";import"./circle-help-CfCL-ES9.js";import"./book-open-VNdz4dX-.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=Je("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),ys=$e({id:f().optional(),fixedServiceFee:F(i=>{const o=parseFloat(i);return isNaN(o)?0:o},f().min(0,"O valor da taxa deve ser maior ou igual a 0")),minServiceFee:F(i=>{const o=parseFloat(i);return isNaN(o)?0:o},f().min(0,"O valor mínimo deve ser maior ou igual a 0")),maxServiceFee:F(i=>{const o=parseFloat(i);return isNaN(o)?0:o},f().min(0,"O valor máximo deve ser maior ou igual a 0")),payoutSchedule:ss(["instant","daily","weekly","monthly"]),stripeEnabled:w(),stripeLiveMode:w(),stripePublicKey:D(),stripeSecretKey:D(),stripeWebhookSecret:D().optional(),stripeConnectEnabled:w(),asaasEnabled:w().default(!1),asaasLiveMode:w().default(!1),asaasApiKey:D(),asaasWebhookToken:D().optional(),asaasWalletId:D().optional(),asaasSplitEnabled:w().default(!1),enableCoupons:w().default(!0),maxDiscountPercentage:F(i=>{const o=parseFloat(i);return isNaN(o)?0:o},f().min(0,"O desconto máximo deve ser maior ou igual a 0").max(100,"O desconto máximo não pode exceder 100%")),defaultExpirationDays:F(i=>{const o=parseInt(i);return isNaN(o)?30:o},f().min(1,"O período de expiração deve ser de pelo menos 1 dia"))}).superRefine((i,o)=>{i.stripeEnabled&&(i.stripePublicKey.trim()===""&&o.addIssue({code:xe.custom,message:"A chave pública do Stripe é obrigatória quando o Stripe está ativado",path:["stripePublicKey"]}),i.stripeSecretKey.trim()===""&&o.addIssue({code:xe.custom,message:"A chave secreta do Stripe é obrigatória quando o Stripe está ativado",path:["stripeSecretKey"]})),i.asaasEnabled&&i.asaasApiKey.trim()===""&&o.addIssue({code:xe.custom,message:"A chave API do Asaas é obrigatória quando o Asaas está ativado",path:["asaasApiKey"]})}).refine(i=>i.maxServiceFee>=i.minServiceFee,{message:"O valor máximo da taxa deve ser maior ou igual ao valor mínimo",path:["maxServiceFee"]}),bs=$e({id:f().optional(),code:D().min(3,"O código precisa ter pelo menos 3 caracteres").max(20,"O código não pode ter mais de 20 caracteres").regex(/^[A-Z0-9]+$/,"O código deve conter apenas letras maiúsculas e números"),description:D().min(3,"A descrição precisa ter pelo menos 3 caracteres"),discountPercentage:F(i=>{const o=parseFloat(i);return isNaN(o)?0:o},f().min(0,"O percentual deve ser maior ou igual a 0").max(100,"O percentual não pode exceder 100%")),discountValue:F(i=>{const o=parseFloat(i);return isNaN(o)?0:o},f().min(0,"O valor deve ser maior ou igual a 0")),startDate:ye(),endDate:ye(),maxUses:F(i=>{const o=parseInt(i);return isNaN(o)?0:o},f().min(0,"O número máximo de usos deve ser maior ou igual a 0")),providerId:f().optional().nullable(),serviceId:f().optional().nullable(),categoryId:f().optional().nullable(),nicheId:f().optional().nullable(),isActive:w().default(!0)}).refine(i=>i.discountPercentage>0||i.discountValue>0,{message:"É necessário definir um valor de desconto percentual ou fixo",path:["discountPercentage"]}).refine(i=>i.endDate>=i.startDate,{message:"A data de término deve ser igual ou posterior à data de início",path:["endDate"]});function Ea(){const[,i]=Ye(),{toast:o}=es(),[Z,X]=T.useState("payment-providers"),[Y,J]=T.useState(!1),[A,ue]=T.useState(null),[_e,ee]=T.useState(!1),[E,je]=T.useState(null),[He,q]=T.useState(!1),[se,ae]=T.useState(null),r=ve({resolver:fe(ys),defaultValues:{fixedServiceFee:5,minServiceFee:2,maxServiceFee:50,payoutSchedule:"weekly",stripeEnabled:!1,stripeLiveMode:!1,stripePublicKey:"",stripeSecretKey:"",stripeWebhookSecret:"",stripeConnectEnabled:!1,asaasEnabled:!1,asaasLiveMode:!1,asaasApiKey:"",asaasWebhookToken:"",asaasWalletId:"",asaasSplitEnabled:!1,enableCoupons:!0,maxDiscountPercentage:50,defaultExpirationDays:30}}),u=ve({resolver:fe(bs),defaultValues:{code:"",description:"",discountPercentage:0,discountValue:0,startDate:new Date,endDate:new Date(new Date().setDate(new Date().getDate()+30)),maxUses:100,isActive:!0,providerId:null,serviceId:null,categoryId:null,nicheId:null}}),{data:v,isLoading:Re}=P({queryKey:["/api/admin/financial-settings"],queryFn:async()=>{try{return await(await b("GET","/api/admin/financial-settings")).json()}catch(s){console.error("Erro ao carregar configurações financeiras:",s);return}}}),{data:re,isLoading:ze}=P({queryKey:["/api/admin/coupons"],queryFn:async()=>{try{return await(await b("GET","/api/admin/coupons")).json()}catch(s){return console.error("Erro ao carregar cupons:",s),[]}}}),{data:ne}=P({queryKey:["/api/niches"],queryFn:async()=>{try{return await(await b("GET","/api/niches")).json()}catch(s){return console.error("Erro ao carregar niches:",s),[]}}}),{data:oe}=P({queryKey:["/api/categories"],queryFn:async()=>{try{return await(await b("GET","/api/categories")).json()}catch(s){return console.error("Erro ao carregar categorias:",s),[]}}}),{data:ie}=P({queryKey:["/api/services"],queryFn:async()=>{try{return await(await b("GET","/api/services")).json()}catch(s){return console.error("Erro ao carregar serviços:",s),[]}}}),{data:te}=P({queryKey:["/api/users?userType=provider"],queryFn:async()=>{try{return await(await b("GET","/api/users?userType=provider")).json()}catch(s){return console.error("Erro ao carregar prestadores:",s),[]}}}),O=L({mutationFn:async s=>{try{const a=s.id||(v==null?void 0:v.id),n=a?`/api/admin/financial-settings/${a}`:"/api/admin/financial-settings",p=a?"PATCH":"POST";console.log(`Enviando ${p} para ${n} com dados:`,s);const j=await b(p,n,s);if(!j.ok){const S=await j.json().catch(()=>null);throw console.error("Resposta de erro do servidor:",S),new Error((S==null?void 0:S.error)||`Erro ${j.status}: ${j.statusText}`)}return await j.json()}catch(a){throw console.error("Erro na requisição:",a),a}},onSuccess:s=>{o({title:"Configurações salvas",description:"As configurações financeiras foram atualizadas com sucesso."}),me.invalidateQueries({queryKey:["/api/admin/financial-settings"]})},onError:s=>{o({title:"Erro",description:`Erro ao salvar configurações: ${s instanceof Error?s.message:String(s)}`,variant:"destructive"})}}),ce=L({mutationFn:async()=>{const s=r.getValues().stripeSecretKey,a=r.getValues().stripeLiveMode;if(v!=null&&v.id)try{const p=r.getValues(),j={...p,id:v.id,fixedServiceFee:Math.round(parseFloat(p.fixedServiceFee.toString())*100),serviceFee:Math.round(parseFloat(p.fixedServiceFee.toString())*100),minServiceFee:Math.round(parseFloat(p.minServiceFee.toString())*100),maxServiceFee:Math.round(parseFloat(p.maxServiceFee.toString())*100),stripeSecretKey:s,stripeLiveMode:a};await O.mutateAsync(j)}catch(p){console.error("Erro ao salvar configurações antes do teste Stripe:",p)}return await(await b("POST","/api/admin/financial-settings/test-stripe",{stripeSecretKey:s,stripeLiveMode:a})).json()},onSuccess:s=>{ue({success:s.success,message:s.message||(s.success?"Conexão estabelecida com sucesso!":"Falha na conexão")}),J(!0)},onError:s=>{ue({success:!1,message:`Erro ao testar conexão: ${s.message}`}),J(!0)}}),k=L({mutationFn:async()=>{const s=r.getValues().asaasApiKey,a=r.getValues().asaasLiveMode;if(v!=null&&v.id)try{const p=r.getValues(),j={...p,id:v.id,fixedServiceFee:Math.round(parseFloat(p.fixedServiceFee.toString())*100),serviceFee:Math.round(parseFloat(p.fixedServiceFee.toString())*100),minServiceFee:Math.round(parseFloat(p.minServiceFee.toString())*100),maxServiceFee:Math.round(parseFloat(p.maxServiceFee.toString())*100),asaasApiKey:s,asaasLiveMode:a};await O.mutateAsync(j)}catch(p){console.error("Erro ao salvar configurações antes do teste Asaas:",p)}return await(await b("POST","/api/admin/financial-settings/test-asaas",{asaasApiKey:s,asaasLiveMode:a})).json()},onSuccess:s=>{je({success:s.success,message:s.message||(s.success?"Conexão estabelecida com sucesso!":"Falha na conexão")}),ee(!0)},onError:s=>{je({success:!1,message:`Erro ao testar conexão: ${s.message}`}),ee(!0)}}),le=L({mutationFn:async()=>await(await b("GET","/api/admin/asaas/balance")).json(),onSuccess:s=>{o({title:"Saldo consultado",description:`Saldo da plataforma: R$ ${(s.balance/100).toFixed(2)}`})},onError:s=>{o({title:"Erro",description:`Erro ao consultar saldo: ${s.message}`,variant:"destructive"})}}),de=L({mutationFn:async s=>{try{const a={...s,discountPercentage:s.discountPercentage*100,discountValue:s.discountValue*100,startDate:s.startDate.toISOString(),endDate:s.endDate.toISOString()},n=s.id?"PATCH":"POST",p=s.id?`/api/admin/coupons/${s.id}`:"/api/admin/coupons",j=await b(n,p,a);if(!j.ok){const S=await j.json().catch(()=>null);throw new Error((S==null?void 0:S.error)||`Erro ${j.status}: ${j.statusText}`)}return await j.json()}catch(a){throw console.error("Erro ao salvar cupom:",a),a}},onSuccess:()=>{o({title:"Cupom salvo",description:"O cupom de desconto foi salvo com sucesso."}),me.invalidateQueries({queryKey:["/api/admin/coupons"]}),q(!1),ae(null),u.reset({code:"",description:"",discountPercentage:0,discountValue:0,startDate:new Date,endDate:new Date(new Date().setDate(new Date().getDate()+30)),maxUses:100,isActive:!0,providerId:null,serviceId:null,categoryId:null,nicheId:null})},onError:s=>{o({title:"Erro",description:`Erro ao salvar cupom: ${s instanceof Error?s.message:String(s)}`,variant:"destructive"})}}),Be=L({mutationFn:async s=>{try{const a=await b("DELETE",`/api/admin/coupons/${s}`);if(!a.ok){const n=await a.json().catch(()=>null);throw new Error((n==null?void 0:n.error)||`Erro ${a.status}: ${a.statusText}`)}return!0}catch(a){throw console.error("Erro ao excluir cupom:",a),a}},onSuccess:()=>{o({title:"Cupom excluído",description:"O cupom de desconto foi excluído com sucesso."}),me.invalidateQueries({queryKey:["/api/admin/coupons"]})},onError:s=>{o({title:"Erro",description:`Erro ao excluir cupom: ${s instanceof Error?s.message:String(s)}`,variant:"destructive"})}}),Ue=async s=>{try{const a=Math.round(parseFloat(s.fixedServiceFee.toString())*100),n={...s,id:v==null?void 0:v.id,fixedServiceFee:a,serviceFee:a,minServiceFee:Math.round(parseFloat(s.minServiceFee.toString())*100),maxServiceFee:Math.round(parseFloat(s.maxServiceFee.toString())*100),maxDiscountPercentage:Math.round(parseFloat(s.maxDiscountPercentage.toString())),defaultExpirationDays:Math.round(parseFloat(s.defaultExpirationDays.toString())),stripeEnabled:!!s.stripeEnabled,stripeLiveMode:!!s.stripeLiveMode,stripeConnectEnabled:!!s.stripeConnectEnabled,asaasEnabled:!!s.asaasEnabled,asaasLiveMode:!!s.asaasLiveMode,asaasSplitEnabled:!!s.asaasSplitEnabled,enableCoupons:!!s.enableCoupons,stripePublicKey:s.stripePublicKey||"",stripeSecretKey:s.stripeSecretKey||"",stripeWebhookSecret:s.stripeWebhookSecret||"",asaasApiKey:s.asaasApiKey||"",asaasWebhookToken:s.asaasWebhookToken||"",asaasWalletId:s.asaasWalletId||"",payoutSchedule:s.payoutSchedule||"weekly"};await O.mutateAsync(n)}catch(a){console.error("Erro ao formatar/enviar dados:",a)}},ge=()=>{ae(null),u.reset({code:"",description:"",discountPercentage:0,discountValue:0,startDate:new Date,endDate:new Date(new Date().setDate(new Date().getDate()+r.getValues().defaultExpirationDays||30)),maxUses:100,isActive:!0,providerId:null,serviceId:null,categoryId:null,nicheId:null}),q(!0)},Ge=s=>{ae(s),u.reset({id:s.id,code:s.code,description:s.description,discountPercentage:s.discountPercentage/100,discountValue:s.discountValue/100,startDate:new Date(s.startDate),endDate:new Date(s.endDate),maxUses:s.maxUses,isActive:s.isActive,providerId:s.providerId||null,serviceId:s.serviceId||null,categoryId:s.categoryId||null,nicheId:s.nicheId||null}),q(!0)},Qe=s=>{de.mutate(s)},Ze=s=>{confirm("Tem certeza de que deseja excluir este cupom de desconto?")&&Be.mutate(s)},Xe=()=>{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let a="";for(let n=0;n<8;n++)a+=s.charAt(Math.floor(Math.random()*s.length));u.setValue("code",a)};return e.jsxs(hs,{children:[e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs(g,{variant:"ghost",size:"sm",onClick:()=>i("/admin/dashboard"),className:"mr-2",children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"Voltar"]}),e.jsx("h1",{className:"text-2xl font-semibold",children:"Configurações Financeiras"})]})}),e.jsxs(rs,{defaultValue:"payment-providers",value:Z,onValueChange:X,className:"w-full",children:[e.jsxs(ns,{className:"grid w-full grid-cols-1 sm:grid-cols-4",children:[e.jsxs(G,{value:"payment-providers",className:"text-xs sm:text-sm",children:[e.jsx(js,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Stripe"}),e.jsx("span",{className:"sm:hidden",children:"Stripe"})]}),e.jsxs(G,{value:"asaas",className:"text-xs sm:text-sm",children:[e.jsx(gs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Asaas"}),e.jsx("span",{className:"sm:hidden",children:"Asaas"})]}),e.jsxs(G,{value:"fees",className:"text-xs sm:text-sm",children:[e.jsx(he,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Taxas"}),e.jsx("span",{className:"sm:hidden",children:"Taxas"})]}),e.jsxs(G,{value:"coupons",className:"text-xs sm:text-sm",children:[e.jsx(Oe,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Cupons"}),e.jsx("span",{className:"sm:hidden",children:"Cupons"})]})]}),e.jsx("div",{className:"mt-6",children:Re?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(y,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Carregando configurações..."})]}):e.jsx(Ce,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(Ue),children:[e.jsxs(Q,{value:"payment-providers",className:"space-y-6",children:[e.jsxs(I,{children:[e.jsxs(W,{children:[e.jsx($,{children:"Configurações do Stripe"}),e.jsx(_,{children:"Configure a integração com o gateway de pagamento Stripe"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsx(t,{control:r.control,name:"stripeEnabled",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-center space-x-3 space-y-0 bg-slate-50 p-4 rounded-md",children:[e.jsx(l,{children:e.jsx(N,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(d,{children:"Habilitar processamento de pagamentos via Stripe"}),e.jsx(m,{children:"Ative para permitir pagamentos online na plataforma"})]})]})}),e.jsxs("div",{className:r.watch("stripeEnabled")?"":"opacity-50 pointer-events-none",children:[e.jsx(t,{control:r.control,name:"stripeLiveMode",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-center space-x-3 space-y-0 bg-amber-50 p-4 rounded-md",children:[e.jsx(l,{children:e.jsx(N,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(d,{children:"Modo de produção (Live)"}),e.jsx(m,{children:"Ative para processar pagamentos reais. Desative para usar o modo de teste."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[e.jsx(t,{control:r.control,name:"stripePublicKey",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Chave Pública (Publishable Key)"}),e.jsx(l,{children:e.jsx("div",{className:"flex",children:e.jsx(h,{...s,type:"text",placeholder:r.watch("stripeLiveMode")?"pk_live_...":"pk_test_..."})})}),e.jsx(m,{children:r.watch("stripeLiveMode")?"Chave pública de produção (começa com pk_live_)":"Chave pública de teste (começa com pk_test_)"}),e.jsx(x,{})]})}),e.jsx(t,{control:r.control,name:"stripeSecretKey",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Chave Secreta (Secret Key)"}),e.jsx(l,{children:e.jsx("div",{className:"flex",children:e.jsx(h,{...s,type:"password",placeholder:r.watch("stripeLiveMode")?"sk_live_...":"sk_test_..."})})}),e.jsx(m,{children:r.watch("stripeLiveMode")?"Chave secreta de produção (começa com sk_live_)":"Chave secreta de teste (começa com sk_test_)"}),e.jsx(x,{})]})}),e.jsx(t,{control:r.control,name:"stripeWebhookSecret",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Chave de Webhook (Webhook Secret)"}),e.jsx(l,{children:e.jsx(h,{...s,type:"password",placeholder:"whsec_..."})}),e.jsx(m,{children:"Usada para verificar webhooks enviados pelo Stripe"}),e.jsx(x,{})]})}),e.jsx(t,{control:r.control,name:"stripeConnectEnabled",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-center space-x-3 space-y-0 bg-slate-50 p-4 rounded-md",children:[e.jsx(l,{children:e.jsx(N,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(d,{children:"Habilitar Stripe Connect"}),e.jsx(m,{children:"Permite aos prestadores receberem pagamentos diretamente em suas contas Stripe"})]})]})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(g,{type:"button",variant:"outline",onClick:()=>ce.mutate(),disabled:ce.isPending,className:"flex items-center",children:ce.isPending?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2 animate-spin"}),"Testando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Testar Conexão"]})})})]})]})]})]}),e.jsxs(I,{children:[e.jsxs(W,{children:[e.jsx($,{children:"Configurações do Asaas"}),e.jsx(_,{children:"Configure a integração com o gateway de pagamento Asaas"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsx(t,{control:r.control,name:"asaasEnabled",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-center space-x-3 space-y-0 bg-slate-50 p-4 rounded-md",children:[e.jsx(l,{children:e.jsx(N,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(d,{children:"Habilitar processamento de pagamentos via Asaas"}),e.jsx(m,{children:"Ative para permitir pagamentos online na plataforma usando Asaas"})]})]})}),e.jsxs("div",{className:r.watch("asaasEnabled")?"":"opacity-50 pointer-events-none",children:[e.jsx(t,{control:r.control,name:"asaasLiveMode",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-center space-x-3 space-y-0 bg-amber-50 p-4 rounded-md",children:[e.jsx(l,{children:e.jsx(N,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(d,{children:"Modo de produção (Live)"}),e.jsx(m,{children:"Ative para processar pagamentos reais. Desative para usar o modo de teste (sandbox)."})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[e.jsx(t,{control:r.control,name:"asaasApiKey",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Chave de API (API Key)"}),e.jsx(l,{children:e.jsx(h,{...s,type:"password",placeholder:"$aas_..."})}),e.jsx(m,{children:r.watch("asaasLiveMode")?"Chave de API de produção":"Chave de API de sandbox (teste)"}),e.jsx(x,{})]})}),e.jsx(t,{control:r.control,name:"asaasWebhookToken",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Token de Webhook"}),e.jsx(l,{children:e.jsx(h,{...s,type:"password",placeholder:"Token de webhook"})}),e.jsx(m,{children:"Usado para verificar webhooks enviados pelo Asaas"}),e.jsx(x,{})]})}),e.jsx(t,{control:r.control,name:"asaasWalletId",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"ID da Carteira (Wallet ID)"}),e.jsx(l,{children:e.jsx(h,{...s,type:"text",placeholder:"ID da carteira"})}),e.jsx(m,{children:"ID da carteira para recebimento de taxa de serviço"}),e.jsx(x,{})]})}),e.jsx(t,{control:r.control,name:"asaasSplitEnabled",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-center space-x-3 space-y-0 bg-slate-50 p-4 rounded-md",children:[e.jsx(l,{children:e.jsx(N,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(d,{children:"Habilitar Split de Pagamentos"}),e.jsx(m,{children:"Permite dividir pagamentos entre a plataforma e os prestadores"})]})]})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(g,{type:"button",variant:"outline",onClick:()=>k.mutate(),disabled:k.isPending,className:"flex items-center",children:k.isPending?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2 animate-spin"}),"Testando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Testar Conexão"]})})})]})]})]})]})]}),e.jsx(Q,{value:"asaas",className:"space-y-6",children:e.jsxs(I,{children:[e.jsxs(W,{children:[e.jsx($,{children:"Configurações do Asaas"}),e.jsx(_,{children:"Configure a integração com o gateway de pagamento Asaas (PIX, Boleto, Cartão)"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsx(t,{control:r.control,name:"asaasEnabled",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-center space-x-3 space-y-0 bg-slate-50 p-4 rounded-md",children:[e.jsx(l,{children:e.jsx(N,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(d,{children:"Habilitar processamento de pagamentos via Asaas"}),e.jsx(m,{children:"Ative para permitir pagamentos online via PIX, Boleto e Cartão"})]})]})}),e.jsx("div",{className:r.watch("asaasEnabled")?"":"opacity-50 pointer-events-none",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[e.jsx(t,{control:r.control,name:"asaasApiKey",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"API Key do Asaas"}),e.jsx(l,{children:e.jsx(h,{...s,type:"password",placeholder:"Sua chave de API do Asaas"})}),e.jsx(m,{children:"Chave de API obtida no painel do Asaas"}),e.jsx(x,{})]})}),e.jsx(t,{control:r.control,name:"asaasWalletId",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Wallet ID da Plataforma"}),e.jsx(l,{children:e.jsx(h,{...s,type:"text",placeholder:"ID da carteira principal"})}),e.jsx(m,{children:"ID da carteira principal da plataforma no Asaas"}),e.jsx(x,{})]})}),e.jsx(t,{control:r.control,name:"asaasWebhookToken",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Token do Webhook"}),e.jsx(l,{children:e.jsx(h,{...s,type:"password",placeholder:"Token para webhooks (opcional)"})}),e.jsx(m,{children:"Token usado para verificar eventos do Asaas (opcional)"}),e.jsx(x,{})]})}),e.jsx(t,{control:r.control,name:"asaasSplitEnabled",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-center space-x-3 space-y-0 bg-slate-50 p-4 rounded-md",children:[e.jsx(l,{children:e.jsx(N,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(d,{children:"Habilitar Split Automático"}),e.jsx(m,{children:"Divide automaticamente os pagamentos entre plataforma e prestador"})]})]})}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>k.mutate(),disabled:k.isPending,className:"flex items-center",children:k.isPending?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2 animate-spin"}),"Testando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Testar Conexão"]})}),e.jsx(g,{type:"button",variant:"outline",onClick:()=>le.mutate(),disabled:le.isPending,className:"flex items-center",children:le.isPending?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2 animate-spin"}),"Consultando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Consultar Saldo"]})})]})]})})]})]})}),e.jsx(Q,{value:"fees",className:"space-y-6",children:e.jsxs(I,{children:[e.jsxs(W,{children:[e.jsx($,{children:"Taxas e Pagamentos"}),e.jsx(_,{children:"Configure as taxas da plataforma e as regras de pagamento aos prestadores"})]}),e.jsxs(M,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(t,{control:r.control,name:"fixedServiceFee",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Taxa de Serviço (R$)"}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{...s,type:"number",step:"0.1",min:"0",className:"pr-10"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground -ml-8"})]})}),e.jsx(m,{children:"Valor fixo cobrado como taxa de serviço para cada prestador"}),e.jsx(x,{})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:r.control,name:"minServiceFee",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Taxa Mínima (R$)"}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{...s,type:"number",step:"0.01",min:"0",className:"pr-10"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground -ml-8"})]})}),e.jsx(m,{children:"Valor mínimo cobrado"}),e.jsx(x,{})]})}),e.jsx(t,{control:r.control,name:"maxServiceFee",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Taxa Máxima (R$)"}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{...s,type:"number",step:"0.01",min:"0",className:"pr-10"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground -ml-8"})]})}),e.jsx(m,{children:"Valor máximo cobrado"}),e.jsx(x,{})]})})]})]}),e.jsx(be,{}),e.jsx("div",{children:e.jsx(t,{control:r.control,name:"payoutSchedule",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Frequência de Pagamentos aos Prestadores"}),e.jsxs(H,{onValueChange:s.onChange,defaultValue:s.value,value:s.value,children:[e.jsx(l,{children:e.jsx(R,{children:e.jsx(z,{placeholder:"Selecione a frequência de pagamentos"})})}),e.jsxs(B,{children:[e.jsx(C,{value:"instant",children:"Instantâneo (após a transação)"}),e.jsx(C,{value:"daily",children:"Diariamente"}),e.jsx(C,{value:"weekly",children:"Semanalmente"}),e.jsx(C,{value:"monthly",children:"Mensalmente"})]})]}),e.jsx(m,{children:"Define quando os prestadores receberão os pagamentos pelos serviços concluídos"}),e.jsx(x,{})]})})})]})]})}),e.jsxs(Q,{value:"coupons",className:"space-y-6",children:[e.jsxs(I,{children:[e.jsxs(W,{children:[e.jsx($,{children:"Configurações de Cupons de Desconto"}),e.jsx(_,{children:"Configure as regras para criação e uso de cupons de desconto na plataforma"})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsx(t,{control:r.control,name:"enableCoupons",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-center space-x-3 space-y-0 bg-slate-50 p-4 rounded-md",children:[e.jsx(l,{children:e.jsx(N,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(d,{children:"Habilitar Sistema de Cupons"}),e.jsx(m,{children:"Permite a criação e uso de cupons de desconto na plataforma"})]})]})}),e.jsx("div",{className:r.watch("enableCoupons")?"":"opacity-50 pointer-events-none",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsx(t,{control:r.control,name:"maxDiscountPercentage",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Desconto Máximo Permitido (%)"}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{...s,type:"number",step:"1",min:"0",max:"100",className:"pr-10"}),e.jsx(he,{className:"h-4 w-4 text-muted-foreground -ml-8"})]})}),e.jsx(m,{children:"Percentual máximo permitido para cupons de desconto"}),e.jsx(x,{})]})}),e.jsx(t,{control:r.control,name:"defaultExpirationDays",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Validade Padrão (dias)"}),e.jsx(l,{children:e.jsx(h,{...s,type:"number",min:"1"})}),e.jsx(m,{children:"Período de validade padrão para novos cupons em dias"}),e.jsx(x,{})]})})]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Cupons Ativos"}),e.jsxs(g,{onClick:ge,disabled:!r.watch("enableCoupons"),className:"flex items-center",children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Novo Cupom"]})]}),ze?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(y,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"Carregando cupons..."})]}):re&&re.length>0?e.jsxs(os,{children:[e.jsx(is,{children:e.jsxs(Ee,{children:[e.jsx(K,{children:"Código"}),e.jsx(K,{children:"Descrição"}),e.jsx(K,{children:"Desconto"}),e.jsx(K,{children:"Validade"}),e.jsx(K,{children:"Status"}),e.jsx(K,{className:"text-right",children:"Ações"})]})}),e.jsx(ts,{children:re.map(s=>{const a=new Date(s.endDate)<new Date,n=s.isActive&&!a;return e.jsxs(Ee,{children:[e.jsx(V,{className:"font-mono font-semibold",children:s.code}),e.jsx(V,{children:s.description}),e.jsx(V,{children:s.discountPercentage>0?e.jsxs("span",{children:[s.discountPercentage/100,"%"]}):e.jsxs("span",{children:["R$ ",(s.discountValue/100).toFixed(2)]})}),e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{children:["Início: ",new Date(s.startDate).toLocaleDateString("pt-BR")]}),e.jsxs("span",{children:["Fim: ",new Date(s.endDate).toLocaleDateString("pt-BR")]})]})}),e.jsx(V,{children:n?e.jsx(pe,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Ativo"}):a?e.jsx(pe,{variant:"outline",className:"bg-amber-50 text-amber-700 border-amber-200",children:"Expirado"}):e.jsx(pe,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"Inativo"})}),e.jsx(V,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>Ge(s),children:e.jsx(vs,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>Ze(s.id),children:e.jsx(fs,{className:"h-4 w-4 text-red-500"})})]})})]},s.id)})})]}):e.jsx(I,{className:"bg-slate-50",children:e.jsxs(M,{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(Oe,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"Nenhum cupom de desconto cadastrado."}),e.jsxs(g,{variant:"outline",className:"mt-4",onClick:ge,disabled:!r.watch("enableCoupons"),children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Criar Primeiro Cupom"]})]})})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(g,{type:"submit",disabled:O.isPending,className:"flex items-center",children:O.isPending?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Salvar Configurações"]})})})]})})})]})]}),e.jsx(Ne,{open:Y,onOpenChange:J,children:e.jsxs(Se,{children:[e.jsxs(we,{children:[e.jsxs(De,{className:"flex items-center",children:[A!=null&&A.success?e.jsx(Ve,{className:"h-5 w-5 text-green-500 mr-2"}):e.jsx(qe,{className:"h-5 w-5 text-red-500 mr-2"}),"Teste de Conexão Stripe"]}),e.jsx(Fe,{children:A==null?void 0:A.message})]}),e.jsx(Te,{children:e.jsx(Ae,{children:"Fechar"})})]})}),e.jsx(Ne,{open:_e,onOpenChange:ee,children:e.jsxs(Se,{children:[e.jsxs(we,{children:[e.jsxs(De,{className:"flex items-center",children:[E!=null&&E.success?e.jsx(Ve,{className:"h-5 w-5 text-green-500 mr-2"}):e.jsx(qe,{className:"h-5 w-5 text-red-500 mr-2"}),"Teste de Conexão Asaas"]}),e.jsx(Fe,{children:E==null?void 0:E.message})]}),e.jsx(Te,{children:e.jsx(Ae,{children:"Fechar"})})]})}),e.jsx(cs,{open:He,onOpenChange:q,children:e.jsxs(ls,{className:"max-w-2xl",children:[e.jsxs(ds,{children:[e.jsx(ms,{children:se?"Editar Cupom":"Criar Novo Cupom de Desconto"}),e.jsx(xs,{children:se?"Edite as informações do cupom de desconto":"Preencha os campos para criar um novo cupom de desconto"})]}),e.jsx(Ce,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(Qe),children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{control:u.control,name:"code",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Código do Cupom"}),e.jsx(l,{children:e.jsxs("div",{className:"flex",children:[e.jsx(h,{...s,className:"uppercase",placeholder:"CUPOM10"}),e.jsx(g,{type:"button",variant:"outline",size:"icon",className:"ml-2",onClick:Xe,children:e.jsx(y,{className:"h-4 w-4"})})]})}),e.jsx(m,{children:"Código que será utilizado pelos clientes para aplicar o desconto"}),e.jsx(x,{})]})}),e.jsx(t,{control:u.control,name:"description",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Descrição"}),e.jsx(l,{children:e.jsx(h,{...s,placeholder:"Desconto primeira compra"})}),e.jsx(m,{children:"Descrição interna para identificação do cupom"}),e.jsx(x,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:u.control,name:"discountPercentage",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Desconto Percentual (%)"}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{...s,type:"number",step:"1",min:"0",max:r.getValues().maxDiscountPercentage||100,className:"pr-10"}),e.jsx(he,{className:"h-4 w-4 text-muted-foreground -ml-8"})]})}),e.jsx(x,{})]})}),e.jsx(t,{control:u.control,name:"discountValue",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Desconto Fixo (R$)"}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{...s,type:"number",step:"0.01",min:"0",className:"pr-10"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground -ml-8"})]})}),e.jsx(x,{})]})})]}),e.jsx(t,{control:u.control,name:"maxUses",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Número Máximo de Usos"}),e.jsx(l,{children:e.jsx(h,{...s,type:"number",min:"0"})}),e.jsx(m,{children:"Quantas vezes este cupom pode ser utilizado (0 = ilimitado)"}),e.jsx(x,{})]})}),e.jsx(t,{control:u.control,name:"isActive",render:({field:s})=>e.jsxs(c,{className:"flex flex-row items-center space-x-3 space-y-0 rounded-md p-4",children:[e.jsx(l,{children:e.jsx(N,{checked:s.value,onCheckedChange:s.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(d,{children:"Cupom Ativo"}),e.jsx(m,{children:"Quando desativado, o cupom não poderá ser utilizado mesmo durante o período de validade"})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(t,{control:u.control,name:"startDate",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(d,{children:"Data de Início"}),e.jsxs(ke,{children:[e.jsx(Pe,{asChild:!0,children:e.jsx(l,{children:e.jsx(g,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:s.value?We(s.value,"dd/MM/yyyy"):e.jsx("span",{children:"Selecione uma data"})})})}),e.jsx(Ie,{className:"w-auto p-0",align:"start",children:e.jsx(Me,{mode:"single",selected:s.value,onSelect:s.onChange,initialFocus:!0})})]}),e.jsx(x,{})]})}),e.jsx(t,{control:u.control,name:"endDate",render:({field:s})=>e.jsxs(c,{className:"flex flex-col",children:[e.jsx(d,{children:"Data de Término"}),e.jsxs(ke,{children:[e.jsx(Pe,{asChild:!0,children:e.jsx(l,{children:e.jsx(g,{variant:"outline",className:"w-full pl-3 text-left font-normal",children:s.value?We(s.value,"dd/MM/yyyy"):e.jsx("span",{children:"Selecione uma data"})})})}),e.jsx(Ie,{className:"w-auto p-0",align:"start",children:e.jsx(Me,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:a=>a<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]}),e.jsx(x,{})]})})]}),e.jsx(be,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(as,{children:"Aplicação (opcional)"}),e.jsx(m,{children:"Restrinja o cupom para ser usado apenas em determinados contextos. Se nenhuma opção for selecionada, o cupom será válido para todos os serviços."})]}),e.jsx(t,{control:u.control,name:"nicheId",render:({field:s})=>{var a;return e.jsxs(c,{children:[e.jsx(d,{children:"Nicho"}),e.jsxs(H,{onValueChange:n=>s.onChange(n?parseInt(n):null),value:((a=s.value)==null?void 0:a.toString())||"",children:[e.jsx(l,{children:e.jsx(R,{children:e.jsx(z,{placeholder:"Todos os nichos"})})}),e.jsxs(B,{children:[e.jsx(C,{value:"",children:"Todos os nichos"}),ne==null?void 0:ne.map(n=>e.jsx(C,{value:n.id.toString(),children:n.name},n.id))]})]}),e.jsx(m,{children:"Limite o cupom a um nicho específico"}),e.jsx(x,{})]})}}),e.jsx(t,{control:u.control,name:"categoryId",render:({field:s})=>{var a;return e.jsxs(c,{children:[e.jsx(d,{children:"Categoria"}),e.jsxs(H,{onValueChange:n=>s.onChange(n?parseInt(n):null),value:((a=s.value)==null?void 0:a.toString())||"",children:[e.jsx(l,{children:e.jsx(R,{children:e.jsx(z,{placeholder:"Todas as categorias"})})}),e.jsxs(B,{children:[e.jsx(C,{value:"",children:"Todas as categorias"}),oe==null?void 0:oe.map(n=>e.jsx(C,{value:n.id.toString(),children:n.name},n.id))]})]}),e.jsx(m,{children:"Limite o cupom a uma categoria específica"}),e.jsx(x,{})]})}}),e.jsx(t,{control:u.control,name:"serviceId",render:({field:s})=>{var a;return e.jsxs(c,{children:[e.jsx(d,{children:"Serviço"}),e.jsxs(H,{onValueChange:n=>s.onChange(n?parseInt(n):null),value:((a=s.value)==null?void 0:a.toString())||"",children:[e.jsx(l,{children:e.jsx(R,{children:e.jsx(z,{placeholder:"Todos os serviços"})})}),e.jsxs(B,{children:[e.jsx(C,{value:"",children:"Todos os serviços"}),ie==null?void 0:ie.map(n=>e.jsx(C,{value:n.id.toString(),children:n.name},n.id))]})]}),e.jsx(m,{children:"Limite o cupom a um serviço específico"}),e.jsx(x,{})]})}}),e.jsx(t,{control:u.control,name:"providerId",render:({field:s})=>{var a;return e.jsxs(c,{children:[e.jsx(d,{children:"Prestador"}),e.jsxs(H,{onValueChange:n=>s.onChange(n?parseInt(n):null),value:((a=s.value)==null?void 0:a.toString())||"",children:[e.jsx(l,{children:e.jsx(R,{children:e.jsx(z,{placeholder:"Todos os prestadores"})})}),e.jsxs(B,{children:[e.jsx(C,{value:"",children:"Todos os prestadores"}),te==null?void 0:te.map(n=>e.jsx(C,{value:n.id.toString(),children:n.name},n.id))]})]}),e.jsx(m,{children:"Limite o cupom a um prestador específico"}),e.jsx(x,{})]})}})]})]}),e.jsxs(ps,{children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>q(!1),children:"Cancelar"}),e.jsx(g,{type:"submit",disabled:de.isPending,children:de.isPending?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),se?"Atualizar":"Criar"]})})]})]})})]})})]})}function We(i,o){const Z=i.getDate().toString().padStart(2,"0"),X=(i.getMonth()+1).toString().padStart(2,"0"),Y=i.getFullYear();return o.replace("dd",Z).replace("MM",X).replace("yyyy",Y)}export{Ea as default};
