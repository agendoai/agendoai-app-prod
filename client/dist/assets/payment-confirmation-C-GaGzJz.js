import{r as l,a as g,c as N,j as e,H as C,L as s,C as i,i as o,e as v,f as d,g as m,h as x}from"./index-DFO2lo2s.js";import{C as y}from"./client-layout-Dqh0s42V.js";import{B as a}from"./button-6IH7luFD.js";import{A as b}from"./arrow-left-DxjewkX7.js";import{C as P}from"./circle-check-big-rkgNqVi1.js";import{T as w}from"./triangle-alert-DUkM71KX.js";import{C as S}from"./circle-x-sJwzAusc.js";import"./navbar-BoNMuwo_.js";import"./proxy-BltBotVH.js";import"./house-sGd4nDnu.js";import"./search-CMPUhstB.js";import"./calendar-check-CDRCjfO9.js";import"./user-WwS7npix.js";function M(){const[u,h]=l.useState(!0);g();const{toast:t}=N(),[r,n]=l.useState(null);return l.useEffect(()=>{const c=new URLSearchParams(window.location.search),j=c.get("payment_intent"),f=c.get("payment_intent_client_secret"),p=c.get("redirect_status");if(!j||!f){n("failed"),t({title:"Erro no pagamento",description:"Informações de pagamento incompletas",variant:"destructive"}),h(!1);return}p==="succeeded"?(n("success"),t({title:"Pagamento confirmado",description:"Seu pagamento foi processado com sucesso!"})):p==="processing"?(n("processing"),t({title:"Pagamento em processamento",description:"Seu pagamento está sendo processado. Atualizaremos você assim que for concluído."})):(n("failed"),t({title:"Falha no pagamento",description:"Ocorreu um problema com seu pagamento. Por favor, tente novamente.",variant:"destructive"})),h(!1)},[t]),e.jsxs(y,{children:[e.jsx(C,{children:e.jsxs("title",{children:[r==="success"?"Pagamento Confirmado":r==="processing"?"Pagamento em Processamento":"Falha no Pagamento"," | AgendoAI"]})}),e.jsxs("div",{className:"container mx-auto py-10 max-w-2xl",children:[e.jsx("div",{className:"mb-4",children:e.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(s,{to:"/client/dashboard",children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Voltar ao Dashboard"]})})}),u?e.jsx(i,{children:e.jsxs(o,{className:"py-10 flex items-center justify-center",children:[e.jsx(v,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Verificando status do pagamento..."})]})}):r==="success"?e.jsxs(i,{children:[e.jsxs(d,{className:"pb-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(P,{className:"h-16 w-16 text-green-500"})}),e.jsx(m,{className:"text-center text-2xl",children:"Pagamento Confirmado!"}),e.jsx(x,{className:"text-center",children:"Seu pagamento foi processado com sucesso."})]}),e.jsxs(o,{className:"pt-0 space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-green-50 p-4 text-green-800",children:[e.jsx("p",{children:"Detalhes da transação:"}),e.jsxs("ul",{className:"mt-2 list-disc list-inside text-sm",children:[e.jsx("li",{children:"Status: Aprovado"}),e.jsxs("li",{children:["Data: ",new Date().toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 mt-6",children:[e.jsx(a,{asChild:!0,children:e.jsx(s,{to:"/client/appointments",children:"Ver Meus Agendamentos"})}),e.jsx(a,{variant:"outline",asChild:!0,children:e.jsx(s,{to:"/client/dashboard",children:"Voltar ao Dashboard"})})]})]})]}):r==="processing"?e.jsxs(i,{children:[e.jsxs(d,{className:"pb-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(w,{className:"h-16 w-16 text-yellow-500"})}),e.jsx(m,{className:"text-center text-2xl",children:"Pagamento em Processamento"}),e.jsx(x,{className:"text-center",children:"Seu pagamento está sendo processado pela operadora do cartão."})]}),e.jsxs(o,{className:"pt-0 space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-yellow-50 p-4 text-yellow-800",children:[e.jsx("p",{children:"Informações importantes:"}),e.jsxs("ul",{className:"mt-2 list-disc list-inside text-sm",children:[e.jsx("li",{children:"O processamento pode levar alguns minutos"}),e.jsx("li",{children:"Você receberá uma notificação quando for concluído"}),e.jsx("li",{children:"Não é necessário refazer o pagamento"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 mt-6",children:[e.jsx(a,{asChild:!0,children:e.jsx(s,{to:"/client/appointments",children:"Ver Meus Agendamentos"})}),e.jsx(a,{variant:"outline",asChild:!0,children:e.jsx(s,{to:"/client/dashboard",children:"Voltar ao Dashboard"})})]})]})]}):e.jsxs(i,{children:[e.jsxs(d,{className:"pb-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(S,{className:"h-16 w-16 text-red-500"})}),e.jsx(m,{className:"text-center text-2xl",children:"Falha no Pagamento"}),e.jsx(x,{className:"text-center",children:"Ocorreu um problema ao processar seu pagamento."})]}),e.jsxs(o,{className:"pt-0 space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-red-50 p-4 text-red-800",children:[e.jsx("p",{children:"Possíveis causas:"}),e.jsxs("ul",{className:"mt-2 list-disc list-inside text-sm",children:[e.jsx("li",{children:"Cartão recusado pela operadora"}),e.jsx("li",{children:"Fundos insuficientes"}),e.jsx("li",{children:"Informações incorretas do cartão"}),e.jsx("li",{children:"Problema temporário no processamento"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 mt-6",children:[e.jsx(a,{asChild:!0,children:e.jsx(s,{to:"/client/checkout",children:"Tentar Novamente"})}),e.jsx(a,{variant:"outline",asChild:!0,children:e.jsx(s,{to:"/client/payment-methods",children:"Gerenciar Métodos de Pagamento"})})]})]})]})]})]})}export{M as default};
