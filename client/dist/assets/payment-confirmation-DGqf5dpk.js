import{j as e}from"./ui-UIpCtT3r.js";import{r as l}from"./vendor-vA4cx1mx.js";import{C as g}from"./client-layout-DkJA58XK.js";import{b as N,o as C,B as s,C as i,g as o,L as v,d,e as m,f as x,T as y}from"./index-C8-zpcKL.js";import{u as b,L as a}from"./router-CxXythJb.js";import{A as P}from"./arrow-left-DbtXU75N.js";import{C as w}from"./circle-check-big-D7Qp6nDu.js";import{C as S}from"./circle-x-JZKtHLhO.js";import"./navbar-vyjn30u5.js";import"./proxy-B2Nma8Bt.js";import"./search-ChrBAPJG.js";import"./calendar-check-B0nV5Uhw.js";import"./user-CXc1AnQW.js";function O(){const[u,h]=l.useState(!0);b();const{toast:t}=N(),[r,n]=l.useState(null);return l.useEffect(()=>{const c=new URLSearchParams(window.location.search),j=c.get("payment_intent"),f=c.get("payment_intent_client_secret"),p=c.get("redirect_status");if(!j||!f){n("failed"),t({title:"Erro no pagamento",description:"Informações de pagamento incompletas",variant:"destructive"}),h(!1);return}p==="succeeded"?(n("success"),t({title:"Pagamento confirmado",description:"Seu pagamento foi processado com sucesso!"})):p==="processing"?(n("processing"),t({title:"Pagamento em processamento",description:"Seu pagamento está sendo processado. Atualizaremos você assim que for concluído."})):(n("failed"),t({title:"Falha no pagamento",description:"Ocorreu um problema com seu pagamento. Por favor, tente novamente.",variant:"destructive"})),h(!1)},[t]),e.jsxs(g,{children:[e.jsx(C,{children:e.jsxs("title",{children:[r==="success"?"Pagamento Confirmado":r==="processing"?"Pagamento em Processamento":"Falha no Pagamento"," | AgendoAI"]})}),e.jsxs("div",{className:"container mx-auto py-10 max-w-2xl",children:[e.jsx("div",{className:"mb-4",children:e.jsx(s,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(a,{to:"/client/dashboard",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Voltar ao Dashboard"]})})}),u?e.jsx(i,{children:e.jsxs(o,{className:"py-10 flex items-center justify-center",children:[e.jsx(v,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Verificando status do pagamento..."})]})}):r==="success"?e.jsxs(i,{children:[e.jsxs(d,{className:"pb-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(w,{className:"h-16 w-16 text-green-500"})}),e.jsx(m,{className:"text-center text-2xl",children:"Pagamento Confirmado!"}),e.jsx(x,{className:"text-center",children:"Seu pagamento foi processado com sucesso."})]}),e.jsxs(o,{className:"pt-0 space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-green-50 p-4 text-green-800",children:[e.jsx("p",{children:"Detalhes da transação:"}),e.jsxs("ul",{className:"mt-2 list-disc list-inside text-sm",children:[e.jsx("li",{children:"Status: Aprovado"}),e.jsxs("li",{children:["Data: ",new Date().toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 mt-6",children:[e.jsx(s,{asChild:!0,children:e.jsx(a,{to:"/client/appointments",children:"Ver Meus Agendamentos"})}),e.jsx(s,{variant:"outline",asChild:!0,children:e.jsx(a,{to:"/client/dashboard",children:"Voltar ao Dashboard"})})]})]})]}):r==="processing"?e.jsxs(i,{children:[e.jsxs(d,{className:"pb-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(y,{className:"h-16 w-16 text-yellow-500"})}),e.jsx(m,{className:"text-center text-2xl",children:"Pagamento em Processamento"}),e.jsx(x,{className:"text-center",children:"Seu pagamento está sendo processado pela operadora do cartão."})]}),e.jsxs(o,{className:"pt-0 space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-yellow-50 p-4 text-yellow-800",children:[e.jsx("p",{children:"Informações importantes:"}),e.jsxs("ul",{className:"mt-2 list-disc list-inside text-sm",children:[e.jsx("li",{children:"O processamento pode levar alguns minutos"}),e.jsx("li",{children:"Você receberá uma notificação quando for concluído"}),e.jsx("li",{children:"Não é necessário refazer o pagamento"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 mt-6",children:[e.jsx(s,{asChild:!0,children:e.jsx(a,{to:"/client/appointments",children:"Ver Meus Agendamentos"})}),e.jsx(s,{variant:"outline",asChild:!0,children:e.jsx(a,{to:"/client/dashboard",children:"Voltar ao Dashboard"})})]})]})]}):e.jsxs(i,{children:[e.jsxs(d,{className:"pb-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(S,{className:"h-16 w-16 text-red-500"})}),e.jsx(m,{className:"text-center text-2xl",children:"Falha no Pagamento"}),e.jsx(x,{className:"text-center",children:"Ocorreu um problema ao processar seu pagamento."})]}),e.jsxs(o,{className:"pt-0 space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-red-50 p-4 text-red-800",children:[e.jsx("p",{children:"Possíveis causas:"}),e.jsxs("ul",{className:"mt-2 list-disc list-inside text-sm",children:[e.jsx("li",{children:"Cartão recusado pela operadora"}),e.jsx("li",{children:"Fundos insuficientes"}),e.jsx("li",{children:"Informações incorretas do cartão"}),e.jsx("li",{children:"Problema temporário no processamento"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2 mt-6",children:[e.jsx(s,{asChild:!0,children:e.jsx(a,{to:"/client/checkout",children:"Tentar Novamente"})}),e.jsx(s,{variant:"outline",asChild:!0,children:e.jsx(a,{to:"/client/payment-methods",children:"Gerenciar Métodos de Pagamento"})})]})]})]})]})]})}export{O as default};
