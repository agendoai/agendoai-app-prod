import{a as f,r as o,j as e,C as p,f as x,g,i as h,k as j}from"./index-BdrEJuYD.js";import{u as N}from"./react-stripe.esm-BtM4KWPL.js";import{B as d}from"./button-CynjWJoH.js";import{C as v}from"./circle-check-big-CiI_Z36v.js";import{T as C}from"./triangle-alert-C-ileS-t.js";import"./index-BcAyG2lq.js";const E=()=>{const i=N(),[P,l]=f(),[a,s]=o.useState("loading"),[m,t]=o.useState(""),[n,u]=o.useState("");return o.useEffect(()=>{if(!i)return;const c=new URLSearchParams(window.location.search).get("payment_intent_client_secret");if(!c){s("failed"),t("Não foi possível verificar o pagamento. Parâmetros inválidos.");return}i.retrievePaymentIntent(c).then(({paymentIntent:r})=>{if(!r){s("failed"),t("Não foi possível recuperar os detalhes do pagamento.");return}switch(u(r.id),r.status){case"succeeded":s("success"),t("Seu pagamento foi processado com sucesso.");break;case"processing":s("loading"),t("Seu pagamento está sendo processado.");break;case"requires_payment_method":s("failed"),t("O pagamento falhou. Por favor, tente novamente.");break;default:s("failed"),t(`Status inesperado: ${r.status}`);break}}).catch(r=>{s("failed"),t(`Erro ao verificar pagamento: ${r.message}`)})},[i]),e.jsx("div",{className:"container max-w-md mx-auto p-4",children:e.jsxs(p,{children:[e.jsx(x,{children:e.jsxs(g,{className:"text-center",children:[a==="loading"&&"Processando Pagamento",a==="success"&&"Pagamento Confirmado",a==="failed"&&"Falha no Pagamento"]})}),e.jsxs(h,{className:"flex flex-col items-center",children:[a==="loading"&&e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary my-4"}),a==="success"&&e.jsx(v,{className:"h-16 w-16 text-green-500 my-4"}),a==="failed"&&e.jsx(C,{className:"h-16 w-16 text-red-500 my-4"}),e.jsx("p",{className:"text-center mb-4",children:m}),n&&e.jsxs("p",{className:"text-sm text-gray-500",children:["ID do Pagamento: ",n]})]}),e.jsxs(j,{className:"flex justify-center",children:[e.jsx(d,{onClick:()=>l("/dashboard"),className:"mx-2",children:"Ir para o Dashboard"}),a==="failed"&&e.jsx(d,{onClick:()=>window.history.back(),variant:"outline",className:"mx-2",children:"Tentar Novamente"})]})]})})};export{E as default};
