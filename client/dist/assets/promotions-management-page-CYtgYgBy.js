import{m as Ae,r as P,j as e,z as ue,a as Ie,c as Te,b as Ve,d as C,C as F,f as E,g as k,i as A,h as Oe,l as I,o as qe}from"./index-DOe1OCu1.js";import{u as T}from"./useMutation-Lmj9MX3Y.js";import{A as ze}from"./admin-layout-DMuYYlcx.js";import{D as G,a as U,b as _,c as J,d as W,e as Le}from"./dialog-DsJAgbDW.js";import{B as h}from"./button-C168b4m4.js";import{B as V}from"./badge-Bzn9UYFT.js";import{S as X}from"./skeleton-B-0dSqkR.js";import{u as Ke,t as Qe,o as $e,s as D,b as Re,c as je,g as w}from"./zod-DXT7XQRH.js";import{F as Be,a as i,b as o,c,d,f as x,e as m}from"./form-KOvJa5oz.js";import{I as p}from"./input-BHH75Tpk.js";import{T as He}from"./textarea-D8qc73Fv.js";import{S as O,a as q,b as z,c as L,d as v}from"./select-CXehJHOL.js";import{S as Me}from"./switch-CGdZOur1.js";import{C as ge}from"./calendar-pyrfYCI4.js";import{P as pe,a as ve,b as fe}from"./popover-7IdJXh_p.js";import{L as Y}from"./label-MMklymaS.js";import{C as Ne}from"./calendar-Mn3IWFfL.js";import{f as be}from"./format-CGvBu07F.js";import{p as K}from"./pt-BR-Cxqo7XV3.js";import{A as Ge}from"./arrow-left-BPt4aJQo.js";import{T as Z}from"./trending-up-CWfbCM5F.js";import{C as Q}from"./calendar-clock-CxGiorhk.js";import{C as ee}from"./clock-CVsS3BCD.js";import{P as se}from"./plus-DCNyMku-.js";import{P as we}from"./pencil-8MXIxfby.js";import{T as ye}from"./trash-2-Bi3jo0Dj.js";import{E as Ce}from"./eye-off-f2PeTlzC.js";import{P as Ue}from"./percent-CITLSmPi.js";import{T as _e}from"./tag-BPGdpj03.js";import{E as Je}from"./eye-BystvZt4.js";import"./navbar-DlESdVVP.js";import"./proxy-Ct5X7xz4.js";import"./house-Calz6FJi.js";import"./search-Bjz8DxPP.js";import"./calendar-check-CY2XiYKN.js";import"./user-BQOYdOBU.js";import"./avatar-DkIWG9bC.js";import"./dropdown-menu-BOCN3PER.js";import"./index-DdZceiuF.js";import"./index-CtQ14QdP.js";import"./index-C933frGi.js";import"./index-tIxYtZzE.js";import"./index-DbsNQ1RS.js";import"./index-CQF81cx3.js";import"./chevron-right-D4BSFwhT.js";import"./check-C4wNsCXx.js";import"./circle-DjQT6JQX.js";import"./settings-CM1XtqIa.js";import"./log-out-Bcm4dD8k.js";import"./menu-ylsVJAGl.js";import"./bell-JEvyLzwJ.js";import"./users-CKUz_ceh.js";import"./folder-tree-CekGzc5n.js";import"./credit-card-DtANwWGP.js";import"./share-2-BYcRmu4H.js";import"./circle-help-BJUcWgq1.js";import"./book-open-DVxVhmVC.js";import"./index-DxOiueDc.js";import"./index-BdQq_4o_.js";import"./index-CCWTWNPs.js";import"./chevron-down-C3yMjgZz.js";import"./en-US-xSPtgCq_.js";import"./endOfMonth-CH6FLORf.js";import"./isSameDay-BJjwZdUf.js";import"./addDays-BQ37Zmqx.js";import"./subDays-K6OA95hK.js";import"./chevron-left-DXLkf5Yb.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=Ae("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),We=$e({title:D().min(3,"O título deve ter pelo menos 3 caracteres").max(100,"O título deve ter no máximo 100 caracteres"),description:D().max(255,"A descrição deve ter no máximo 255 caracteres").optional().nullable(),discountPercentage:w.number().min(0).max(100).optional().nullable(),discountValue:w.number().min(0).optional().nullable(),serviceId:w.number().optional().nullable(),providerId:w.number().optional().nullable(),categoryId:w.number().optional().nullable(),nicheId:w.number().optional().nullable(),startDate:je(),endDate:je(),couponCode:D().max(50,"O código do cupom deve ter no máximo 50 caracteres").optional().nullable(),isActive:Re().default(!0),backgroundColor:D().max(20).optional().nullable(),textColor:D().max(20).optional().nullable()}).refine(a=>a.discountPercentage!=null||a.discountValue!=null,{message:"Você deve fornecer um desconto percentual ou um valor fixo",path:["discountPercentage"]}).refine(a=>a.endDate>=a.startDate,{message:"A data de término deve ser posterior à data de início",path:["endDate"]});function De({promotion:a,onSubmit:u,niches:j,categories:R,services:y,providers:B,isLoading:b=!1}){const[f,N]=P.useState(a!=null&&a.discountPercentage?"percentage":"fixed"),l=Ke({resolver:Qe(We),defaultValues:{title:(a==null?void 0:a.title)||"",description:(a==null?void 0:a.description)||"",discountPercentage:(a==null?void 0:a.discountPercentage)||null,discountValue:a!=null&&a.discountValue?a.discountValue/100:null,serviceId:(a==null?void 0:a.serviceId)||null,providerId:(a==null?void 0:a.providerId)||null,categoryId:(a==null?void 0:a.categoryId)||null,nicheId:(a==null?void 0:a.nicheId)||null,startDate:a!=null&&a.startDate?new Date(a.startDate):new Date,endDate:a!=null&&a.endDate?new Date(a.endDate):new Date(Date.now()+30*24*60*60*1e3),couponCode:(a==null?void 0:a.couponCode)||"",isActive:(a==null?void 0:a.isActive)??!0,backgroundColor:(a==null?void 0:a.backgroundColor)||"#4F46E5",textColor:(a==null?void 0:a.textColor)||"#FFFFFF"}}),S=s=>{f==="fixed"&&s.discountValue&&(s.discountValue=Math.round(s.discountValue*100)),f==="percentage"?s.discountValue=null:s.discountPercentage=null,u(s)};return e.jsx(Be,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(S),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(i,{control:l.control,name:"title",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"Título da promoção"}),e.jsx(d,{children:e.jsx(p,{placeholder:"Ex: Oferta especial",...s})}),e.jsx(x,{children:"Nome curto e atrativo para a promoção"}),e.jsx(m,{})]})}),e.jsx(i,{control:l.control,name:"couponCode",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"Código do cupom (opcional)"}),e.jsx(d,{children:e.jsx(p,{placeholder:"Ex: DESCONTO20",...s})}),e.jsx(x,{children:"Código para o cliente usar ao fazer o agendamento"}),e.jsx(m,{})]})})]}),e.jsx(i,{control:l.control,name:"description",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"Descrição"}),e.jsx(d,{children:e.jsx(He,{placeholder:"Descreva a promoção em detalhes",...s,value:s.value||""})}),e.jsx(x,{children:"Detalhes sobre a promoção que serão exibidos para o cliente"}),e.jsx(m,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Y,{children:"Tipo de desconto"}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"percentage",value:"percentage",checked:f==="percentage",onChange:()=>N("percentage"),className:"h-4 w-4"}),e.jsx(Y,{htmlFor:"percentage",children:"Desconto percentual (%)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"fixed",value:"fixed",checked:f==="fixed",onChange:()=>N("fixed"),className:"h-4 w-4"}),e.jsx(Y,{htmlFor:"fixed",children:"Valor fixo (R$)"})]})]})]}),f==="percentage"?e.jsx(i,{control:l.control,name:"discountPercentage",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"Percentual de desconto"}),e.jsx(d,{children:e.jsx(p,{type:"number",placeholder:"Ex: 10",min:0,max:100,...s,value:s.value===null?"":s.value,onChange:n=>{const t=n.target.value===""?null:parseInt(n.target.value);s.onChange(t)}})}),e.jsx(x,{children:"Percentual de desconto (0-100%)"}),e.jsx(m,{})]})}):e.jsx(i,{control:l.control,name:"discountValue",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"Valor do desconto (R$)"}),e.jsx(d,{children:e.jsx(p,{type:"number",placeholder:"Ex: 50.00",step:"0.01",min:0,...s,value:s.value===null?"":s.value,onChange:n=>{const t=n.target.value===""?null:parseFloat(n.target.value);s.onChange(t)}})}),e.jsx(x,{children:"Valor fixo do desconto em reais"}),e.jsx(m,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(i,{control:l.control,name:"startDate",render:({field:s})=>e.jsxs(o,{className:"flex flex-col",children:[e.jsx(c,{children:"Data de início"}),e.jsxs(pe,{children:[e.jsx(ve,{asChild:!0,children:e.jsx(d,{children:e.jsxs(h,{variant:"outline",className:ue("w-full pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?be(s.value,"PPP",{locale:K}):e.jsx("span",{children:"Selecione uma data"}),e.jsx(Ne,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(fe,{className:"w-auto p-0",align:"start",children:e.jsx(ge,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:n=>n<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0,locale:K})})]}),e.jsx(x,{children:"Data em que a promoção começa a valer"}),e.jsx(m,{})]})}),e.jsx(i,{control:l.control,name:"endDate",render:({field:s})=>e.jsxs(o,{className:"flex flex-col",children:[e.jsx(c,{children:"Data de término"}),e.jsxs(pe,{children:[e.jsx(ve,{asChild:!0,children:e.jsx(d,{children:e.jsxs(h,{variant:"outline",className:ue("w-full pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?be(s.value,"PPP",{locale:K}):e.jsx("span",{children:"Selecione uma data"}),e.jsx(Ne,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(fe,{className:"w-auto p-0",align:"start",children:e.jsx(ge,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:n=>{const t=l.getValues("startDate");return n<new Date(new Date(t).setHours(0,0,0,0))},initialFocus:!0,locale:K})})]}),e.jsx(x,{children:"Data em que a promoção expira"}),e.jsx(m,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(i,{control:l.control,name:"nicheId",render:({field:s})=>{var n;return e.jsxs(o,{children:[e.jsx(c,{children:"Nicho (opcional)"}),e.jsxs(O,{onValueChange:t=>s.onChange(t?parseInt(t):null),value:((n=s.value)==null?void 0:n.toString())||"",children:[e.jsx(d,{children:e.jsx(q,{children:e.jsx(z,{placeholder:"Selecione um nicho"})})}),e.jsxs(L,{children:[e.jsx(v,{value:"",children:"Nenhum (todos os nichos)"}),j.map(t=>e.jsx(v,{value:t.id.toString(),children:t.name},t.id))]})]}),e.jsx(x,{children:"Para limitar a promoção a um nicho específico"}),e.jsx(m,{})]})}}),e.jsx(i,{control:l.control,name:"categoryId",render:({field:s})=>{var n;return e.jsxs(o,{children:[e.jsx(c,{children:"Categoria (opcional)"}),e.jsxs(O,{onValueChange:t=>s.onChange(t?parseInt(t):null),value:((n=s.value)==null?void 0:n.toString())||"",children:[e.jsx(d,{children:e.jsx(q,{children:e.jsx(z,{placeholder:"Selecione uma categoria"})})}),e.jsxs(L,{children:[e.jsx(v,{value:"",children:"Nenhuma (todas as categorias)"}),R.map(t=>e.jsx(v,{value:t.id.toString(),children:t.name},t.id))]})]}),e.jsx(x,{children:"Para limitar a promoção a uma categoria específica"}),e.jsx(m,{})]})}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(i,{control:l.control,name:"serviceId",render:({field:s})=>{var n;return e.jsxs(o,{children:[e.jsx(c,{children:"Serviço (opcional)"}),e.jsxs(O,{onValueChange:t=>s.onChange(t?parseInt(t):null),value:((n=s.value)==null?void 0:n.toString())||"",children:[e.jsx(d,{children:e.jsx(q,{children:e.jsx(z,{placeholder:"Selecione um serviço"})})}),e.jsxs(L,{children:[e.jsx(v,{value:"",children:"Nenhum (todos os serviços)"}),y.map(t=>e.jsx(v,{value:t.id.toString(),children:t.name},t.id))]})]}),e.jsx(x,{children:"Para limitar a promoção a um serviço específico"}),e.jsx(m,{})]})}}),e.jsx(i,{control:l.control,name:"providerId",render:({field:s})=>{var n;return e.jsxs(o,{children:[e.jsx(c,{children:"Prestador (opcional)"}),e.jsxs(O,{onValueChange:t=>s.onChange(t?parseInt(t):null),value:((n=s.value)==null?void 0:n.toString())||"",children:[e.jsx(d,{children:e.jsx(q,{children:e.jsx(z,{placeholder:"Selecione um prestador"})})}),e.jsxs(L,{children:[e.jsx(v,{value:"",children:"Nenhum (todos os prestadores)"}),B.map(t=>e.jsx(v,{value:t.id.toString(),children:t.name},t.id))]})]}),e.jsx(x,{children:"Para limitar a promoção a um prestador específico"}),e.jsx(m,{})]})}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(i,{control:l.control,name:"backgroundColor",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"Cor de fundo"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(d,{children:e.jsx(p,{type:"color",...s,value:s.value||"#4F46E5",className:"w-12 h-10 p-1"})}),e.jsx(p,{type:"text",...s,value:s.value||"#4F46E5",className:"flex-1"})]}),e.jsx(x,{children:"Cor de fundo do card da promoção"}),e.jsx(m,{})]})}),e.jsx(i,{control:l.control,name:"textColor",render:({field:s})=>e.jsxs(o,{children:[e.jsx(c,{children:"Cor do texto"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(d,{children:e.jsx(p,{type:"color",...s,value:s.value||"#FFFFFF",className:"w-12 h-10 p-1"})}),e.jsx(p,{type:"text",...s,value:s.value||"#FFFFFF",className:"flex-1"})]}),e.jsx(x,{children:"Cor do texto no card da promoção"}),e.jsx(m,{})]})})]}),e.jsx(i,{control:l.control,name:"isActive",render:({field:s})=>e.jsxs(o,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{className:"text-base",children:"Ativar promoção"}),e.jsx(x,{children:"Quando ativa, a promoção ficará visível para os clientes"})]}),e.jsx(d,{children:e.jsx(Me,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(h,{variant:"outline",type:"button",onClick:()=>window.history.back(),children:"Cancelar"}),e.jsx(h,{type:"submit",disabled:b,children:b?"Salvando...":a?"Atualizar":"Criar"})]})]})})}function xa(){const[,a]=Ie(),{toast:u}=Te(),j=Ve(),[R,y]=P.useState(!1),[B,b]=P.useState(!1),[f,N]=P.useState(!1),[l,S]=P.useState(null),{data:s=[],isLoading:n,isError:t}=C({queryKey:["/api/admin/promotions"]}),{data:ae=[]}=C({queryKey:["/api/niches"]}),{data:re=[]}=C({queryKey:["/api/categories"]}),{data:te=[]}=C({queryKey:["/api/service-templates"]}),{data:le=[]}=C({queryKey:["/api/providers"]}),ne=T({mutationFn:async r=>(await I("POST","/api/admin/promotions",r)).json(),onSuccess:()=>{j.invalidateQueries({queryKey:["/api/admin/promotions"]}),j.invalidateQueries({queryKey:["/api/promotions/active"]}),y(!1),u({title:"Promoção criada",description:"A promoção foi criada com sucesso."})},onError:r=>{u({title:"Erro ao criar promoção",description:r.message||"Ocorreu um erro ao criar a promoção.",variant:"destructive"})}}),ie=T({mutationFn:async({id:r,data:g})=>(await I("PATCH",`/api/admin/promotions/${r}`,g)).json(),onSuccess:()=>{j.invalidateQueries({queryKey:["/api/admin/promotions"]}),j.invalidateQueries({queryKey:["/api/promotions/active"]}),b(!1),u({title:"Promoção atualizada",description:"A promoção foi atualizada com sucesso."})},onError:r=>{u({title:"Erro ao atualizar promoção",description:r.message||"Ocorreu um erro ao atualizar a promoção.",variant:"destructive"})}}),H=T({mutationFn:async r=>(await I("DELETE",`/api/admin/promotions/${r}`)).json(),onSuccess:()=>{j.invalidateQueries({queryKey:["/api/admin/promotions"]}),j.invalidateQueries({queryKey:["/api/promotions/active"]}),N(!1),u({title:"Promoção excluída",description:"A promoção foi excluída com sucesso."})},onError:r=>{u({title:"Erro ao excluir promoção",description:r.message||"Ocorreu um erro ao excluir a promoção.",variant:"destructive"})}}),Pe=T({mutationFn:async r=>(await I("PATCH",`/api/admin/promotions/${r}/toggle-status`)).json(),onSuccess:()=>{j.invalidateQueries({queryKey:["/api/admin/promotions"]}),j.invalidateQueries({queryKey:["/api/promotions/active"]}),u({title:"Status atualizado",description:"O status da promoção foi atualizado com sucesso."})},onError:r=>{u({title:"Erro ao atualizar status",description:r.message||"Ocorreu um erro ao atualizar o status da promoção.",variant:"destructive"})}}),oe=()=>{y(!0)},Se=r=>{S(r),b(!0)},Fe=r=>{S(r),N(!0)},Ee=r=>{Pe.mutate(r)},ce=s.filter(r=>r.isActive&&new Date(r.endDate)>new Date),de=s.filter(r=>new Date(r.endDate)<new Date),xe=s.filter(r=>new Date(r.startDate)>new Date),ke=()=>n?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((r,g)=>e.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(X,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(X,{className:"h-4 w-[200px]"}),e.jsx(X,{className:"h-4 w-[150px]"})]})]})},g))}):t?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(qe,{className:"h-12 w-12 text-red-500 mb-4"}),e.jsx("p",{className:"text-red-600 font-semibold",children:"Erro ao carregar promoções"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Tente novamente mais tarde."})]})}):s.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-orange-100 to-red-100 rounded-full flex items-center justify-center mb-6",children:e.jsx($,{className:"h-12 w-12 text-orange-500"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Nenhuma promoção encontrada"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md text-center px-4",children:"Comece criando sua primeira promoção para atrair mais clientes e aumentar as vendas."}),e.jsxs(h,{onClick:oe,className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 rounded-lg",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Criar Primeira Promoção"]})]})}):s.map(r=>{const g=new Date,me=new Date(r.startDate),M=new Date(r.endDate)<g,he=me>g;return r.isActive,e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-all border border-gray-100",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx($,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:r.description})]})]}),e.jsx("div",{className:"ml-2 flex-shrink-0",children:M?e.jsxs(V,{className:"bg-red-100 text-red-700 hover:bg-red-200 border-0 text-xs",children:[e.jsx(ee,{className:"h-3 w-3 mr-1"}),"Expirado"]}):he?e.jsxs(V,{className:"bg-blue-100 text-blue-700 hover:bg-blue-200 border-0 text-xs",children:[e.jsx(Q,{className:"h-3 w-3 mr-1"}),"Programado"]}):r.isActive?e.jsxs(V,{className:"bg-green-100 text-green-700 hover:bg-green-200 border-0 text-xs",children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),"Ativo"]}):e.jsxs(V,{className:"bg-gray-100 text-gray-700 hover:bg-gray-200 border-0 text-xs",children:[e.jsx(Ce,{className:"h-3 w-3 mr-1"}),"Inativo"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.discountPercentage?e.jsx(Ue,{className:"h-3 w-3 text-green-600"}):e.jsx(_e,{className:"h-3 w-3 text-green-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Desconto"}),e.jsx("p",{className:"font-semibold text-green-700 text-sm",children:r.discountPercentage?`${r.discountPercentage}%`:r.discountValue?`R$ ${(r.discountValue/100).toFixed(2)}`:"N/A"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Q,{className:"h-3 w-3 text-blue-600"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Período"}),e.jsxs("p",{className:"font-medium text-gray-900 text-sm",children:[new Date(r.startDate).toLocaleDateString("pt-BR")," - ",new Date(r.endDate).toLocaleDateString("pt-BR")]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 pt-3 border-t border-gray-100",children:[e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>Ee(r.id),disabled:M,title:r.isActive?"Desativar":"Ativar",className:"h-8 px-2 hover:bg-blue-100 text-blue-600",children:r.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Desativar"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Ativar"})]})}),e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>Se(r),title:"Editar",className:"h-8 px-2 hover:bg-orange-100 text-orange-600",children:[e.jsx(we,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Editar"})]}),e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>Fe(r),title:"Excluir",className:"h-8 px-2 hover:bg-red-100 text-red-600",children:[e.jsx(ye,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Excluir"})]})]})]},r.id)});return e.jsx(ze,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-red-50",children:[e.jsx("div",{className:"bg-white border-b border-orange-100 shadow-sm",children:e.jsx("div",{className:"container mx-auto py-4 px-4 sm:py-6 sm:px-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>a("/admin/dashboard"),className:"mr-3 sm:mr-4 hover:bg-orange-100",children:e.jsx(Ge,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-gradient-to-r from-orange-500 to-red-600 rounded-xl",children:e.jsx($,{className:"h-5 w-5 sm:h-6 sm:w-6 lg:h-8 lg:w-8 text-white"})}),e.jsx("span",{children:"Promoções"})]}),e.jsx("p",{className:"text-gray-600 mt-1 sm:mt-2 text-sm",children:"Crie e gerencie promoções para atrair clientes"})]})]}),e.jsxs("div",{className:"flex gap-3 sm:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-orange-600",children:ce.length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Ativas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-600",children:xe.length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Programadas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-red-600",children:de.length}),e.jsx("div",{className:"text-xs text-gray-500",children:"Expiradas"})]})]})]})})}),e.jsx("div",{className:"container mx-auto py-4 px-4 sm:py-6 sm:px-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(F,{className:"shadow-lg border-0 bg-gradient-to-br from-white to-green-50 hover:shadow-xl transition-all",children:[e.jsx(E,{className:"pb-3",children:e.jsxs(k,{className:"text-sm font-semibold text-green-800 flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),"Promoções Ativas"]})}),e.jsx(A,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:ce.length}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Promoções em andamento"})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full shadow-lg",children:e.jsx(Z,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})})]})})]}),e.jsxs(F,{className:"shadow-lg border-0 bg-gradient-to-br from-white to-blue-50 hover:shadow-xl transition-all",children:[e.jsx(E,{className:"pb-3",children:e.jsxs(k,{className:"text-sm font-semibold text-blue-800 flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Programadas"]})}),e.jsx(A,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:xe.length}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Promoções futuras"})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full shadow-lg",children:e.jsx(Q,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})})]})})]}),e.jsxs(F,{className:"shadow-lg border-0 bg-gradient-to-br from-white to-red-50 hover:shadow-xl transition-all sm:col-span-2 lg:col-span-1",children:[e.jsx(E,{className:"pb-3",children:e.jsxs(k,{className:"text-sm font-semibold text-red-800 flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"}),"Expiradas"]})}),e.jsx(A,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:de.length}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Promoções encerradas"})]}),e.jsx("div",{className:"p-2 sm:p-3 bg-gradient-to-r from-red-500 to-pink-600 rounded-full shadow-lg",children:e.jsx(ee,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})})]})})]})]}),e.jsxs(F,{className:"shadow-lg border-0 bg-gradient-to-br from-white to-orange-50",children:[e.jsx(E,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs(k,{className:"text-lg sm:text-xl font-bold text-orange-900 flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 sm:h-6 sm:w-6 text-orange-500"}),"Lista de Promoções"]}),e.jsx(Oe,{className:"text-gray-600 text-sm",children:"Gerencie todas as promoções e descontos disponíveis no sistema."})]}),e.jsxs(h,{onClick:oe,className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 rounded-lg shadow-lg w-full sm:w-auto",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Nova Promoção"]})]})}),e.jsx(A,{children:e.jsx("div",{className:"space-y-4",children:ke()})})]})]})}),e.jsx(G,{open:R,onOpenChange:y,children:e.jsxs(U,{className:"backdrop-blur-md backdrop:bg-orange-100/60 border-0 shadow-2xl rounded-2xl max-w-4xl max-h-[90vh] overflow-y-auto mx-4",children:[e.jsxs(_,{children:[e.jsxs(J,{className:"text-lg sm:text-xl font-bold text-orange-900 flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-orange-500"}),"Nova Promoção"]}),e.jsx(W,{className:"text-gray-600 text-sm",children:"Crie uma nova promoção para ser exibida para os clientes."})]}),e.jsx(De,{onSubmit:r=>ne.mutate(r),niches:ae,categories:re,services:te,providers:le,isLoading:ne.isPending})]})}),e.jsx(G,{open:B,onOpenChange:b,children:e.jsxs(U,{className:"backdrop-blur-md backdrop:bg-orange-100/60 border-0 shadow-2xl rounded-2xl max-w-4xl max-h-[90vh] overflow-y-auto mx-4",children:[e.jsxs(_,{children:[e.jsxs(J,{className:"text-lg sm:text-xl font-bold text-orange-900 flex items-center gap-2",children:[e.jsx(we,{className:"h-5 w-5 text-orange-500"}),"Editar Promoção"]}),e.jsx(W,{className:"text-gray-600 text-sm",children:"Atualize as informações da promoção."})]}),l&&e.jsx(De,{promotion:l,onSubmit:r=>ie.mutate({id:l.id,data:r}),niches:ae,categories:re,services:te,providers:le,isLoading:ie.isPending})]})}),e.jsx(G,{open:f,onOpenChange:N,children:e.jsxs(U,{className:"backdrop-blur-md backdrop:bg-red-100/60 border-0 shadow-2xl rounded-2xl mx-4",children:[e.jsxs(_,{children:[e.jsxs(J,{className:"text-lg sm:text-xl font-bold text-red-700 flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5 text-red-500"}),"Excluir Promoção"]}),e.jsx(W,{className:"text-gray-700 text-sm",children:"Tem certeza que deseja excluir esta promoção? Esta ação não pode ser desfeita."})]}),e.jsxs("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50 mt-4",children:[e.jsx("p",{className:"font-semibold text-red-900",children:l==null?void 0:l.title}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:l==null?void 0:l.description})]}),e.jsxs(Le,{className:"gap-2 flex-col sm:flex-row",children:[e.jsx(h,{variant:"outline",onClick:()=>N(!1),className:"rounded-lg border-orange-200 hover:bg-orange-100 w-full sm:w-auto",children:"Cancelar"}),e.jsx(h,{variant:"destructive",onClick:()=>l&&H.mutate(l.id),disabled:H.isPending,className:"rounded-lg font-semibold shadow-md bg-red-600 hover:bg-red-700 w-full sm:w-auto",children:H.isPending?"Excluindo...":"Excluir"})]})]})})]})})}export{xa as default};
