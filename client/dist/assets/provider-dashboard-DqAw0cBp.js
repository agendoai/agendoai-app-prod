import{j as e}from"./ui-UIpCtT3r.js";import{j as q,b as ve,a as we,i as te,C as d,g as m,G as Q,m as z,X as re,d as X,e as J,f as ye,p as L,u as Ce,c as K,q as ke,t as Se}from"./index-DEm1NP11.js";import{u as le}from"./useMutation-CZu5JiEY.js";import{u as ue}from"./router-CxXythJb.js";import{r as f}from"./vendor-vA4cx1mx.js";import{B as p}from"./button-j6LGAhsQ.js";import{D as Pe,a as Ae,b as Me,e as S}from"./dropdown-menu-Ctl7CAWq.js";import{C as W}from"./check-BuvXqBRH.js";import{S as De}from"./star-CDSNpheT.js";import{C as b}from"./calendar-eMUANn8Q.js";import{E as Te}from"./ellipsis-vertical-CrOw0oSf.js";import{C as ne}from"./circle-check-big-Ck17qa4A.js";import{C as ie}from"./credit-card-C2LZP3Yi.js";import{S as Ee}from"./switch-Duc5uvdK.js";import{S as u}from"./skeleton-DgzSxjFt.js";import{P as Ie}from"./page-transition-iHVbC93r.js";import{A as pe,b as je,a as Re}from"./avatar-CPD-kDAN.js";import{T as ge,a as fe,b as Y,c as me}from"./tabs-GrywyA1D.js";import{F as $e,l as Oe,i as Le,a as ze,b as qe}from"./pt-br-BXicMjUb.js";import{B as U}from"./badge-B2JTkC27.js";import{T as Fe,a as Ue,b as Ve,c as He}from"./tooltip-65jWKs6O.js";import{D as _e,a as Be,b as Ke,c as We,d as Ge}from"./dialog-7q2nDW2H.js";import{S as Qe}from"./scroll-area-CJNoO-sn.js";import{D as Xe}from"./download-CansyATS.js";import{C as Je}from"./chart-column-Dv65wXVe.js";import{F as Ye}from"./file-text-54IN5u51.js";import{I as de}from"./info-D7TdfMU_.js";import{U as oe}from"./user-DI19obd1.js";import{M as Ze}from"./mail-l4CkOAen.js";import{C as es}from"./clock-CLU1zMjH.js";import{s as ss,f as V}from"./format-CGvBu07F.js";import{a as as}from"./addDays-BQ37Zmqx.js";import{p as ts}from"./pt-BR-Cxqo7XV3.js";import{p as rs}from"./parseISO-C4T3oArM.js";import{P as ls}from"./provider-layout-CSRFJTvC.js";import{N as ns,C as is}from"./navbar-hjdp4XdK.js";import{m as ds}from"./proxy-B8DL77xD.js";import{D as os}from"./dollar-sign-BCiirwCz.js";import{U as cs}from"./users-3MvLCU5y.js";import{T as ms}from"./trending-up-CmjJoqLV.js";import{A as xs}from"./activity-Dpt3nJWF.js";import{S as hs}from"./sparkles-CnnO-5OD.js";import{S as us}from"./settings-CsNNlMhC.js";import{S as G}from"./scissors-ioZHRjAf.js";import{C as ps}from"./chart-no-axes-column-increasing-DS0iPYFH.js";import{P as js}from"./plus-DxJwgG-n.js";import{H as gs}from"./house-CfLQCnfM.js";import{C as fs}from"./calendar-check-6xqeojHy.js";import{S as bs}from"./search-C7LrDLVs.js";import"./chevron-right-C68Zab6b.js";import"./circle-D47_QxzJ.js";import"./index-BH3L9zMK.js";import"./index-BdQq_4o_.js";import"./en-US-xSPtgCq_.js";import"./arrow-left-BNqHqGt7.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=q("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=q("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=q("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=q("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=q("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=q("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),ae=s=>{switch(s){case"paid":return{text:"Pago",color:"bg-green-100 text-green-800",icon:e.jsx(ie,{className:"h-3 w-3"})};case"pending":return{text:"Aguardando",color:"bg-yellow-100 text-yellow-800",icon:e.jsx(z,{className:"h-3 w-3"})};case"failed":return{text:"Falhou",color:"bg-red-100 text-red-800",icon:e.jsx(re,{className:"h-3 w-3"})};case"refunded":return{text:"Reembolsado",color:"bg-gray-100 text-gray-800",icon:e.jsx(be,{className:"h-3 w-3"})};case"paid_externally":return{text:"Pago ext.",color:"bg-blue-100 text-blue-800",icon:e.jsx(ie,{className:"h-3 w-3"})};default:return{text:"N√£o informado",color:"bg-gray-100 text-gray-600",icon:e.jsx(z,{className:"h-3 w-3"})}}},ws={pending:"bg-yellow-50 border-yellow-200",confirmed:"bg-blue-50 border-blue-200",executing:"bg-purple-50 border-purple-200",completed:"bg-green-50 border-green-200",canceled:"bg-red-50 border-red-200",no_show:"bg-gray-50 border-gray-200"};function he({appointment:s,userType:i="client",onViewDetails:C,showActions:F=!0}){var k,$;const[,P]=ue(),{toast:r}=ve(),A=we(),[H,M]=f.useState(!1),[_,N]=f.useState(5),[E,B]=f.useState(""),[I,R,v]=s.date.split("-").map(Number),D=new Date(I,R-1,v).toLocaleDateString("pt-BR");ws[s.status];const y=new Date(I,R-1,v),[l,n]=s.startTime.split(":").map(Number);y.setHours(l,n,0,0),s.status;const x=le({mutationFn:async({appointmentId:h,status:O,paymentStatus:Z,paymentMethod:ce,paymentId:Ne})=>(await te("PUT",`/api/appointments/${h}/status`,{status:O,paymentStatus:Z,paymentMethod:ce,paymentId:Ne})).json(),onSuccess:()=>{A.invalidateQueries({queryKey:["/api/appointments"]}),A.invalidateQueries({queryKey:["/api/client/appointments"]}),A.invalidateQueries({queryKey:["/api/provider/appointments"]}),r({title:"Status atualizado",description:`O agendamento foi ${{canceled:"cancelado",completed:"marcado como conclu√≠do",no_show:"marcado como n√£o comparecimento"}[status]||"atualizado"} com sucesso.`})},onError:h=>{r({title:"Erro",description:`N√£o foi poss√≠vel atualizar o status: ${h.message}`,variant:"destructive"})}});le({mutationFn:async({appointmentId:h,rating:O,comment:Z})=>(await te("POST",`/api/appointments/${h}/review`,{rating:O,comment:Z})).json(),onSuccess:()=>{A.invalidateQueries({queryKey:["/api/appointments"]}),M(!1),N(5),B(""),r({title:"Avalia√ß√£o enviada",description:"Sua avalia√ß√£o foi enviada com sucesso. Obrigado pelo feedback!"})},onError:h=>{r({title:"Erro",description:`N√£o foi poss√≠vel enviar a avalia√ß√£o: ${h.message}`,variant:"destructive"})}});const a=()=>{x.mutate({appointmentId:s.id,status:"canceled"})},t=()=>{x.mutate({appointmentId:s.id,status:"completed"})},j=()=>{x.mutate({appointmentId:s.id,status:"no_show"})},c=()=>{x.mutate({appointmentId:s.id,status:"confirmed"})},o=()=>{x.mutate({appointmentId:s.id,status:"executing"})},T=()=>{x.mutate({appointmentId:s.id,paymentStatus:"paid"})},g=()=>{C?C(s.id):i==="client"?(console.log("Navegando para detalhes de agendamento:",s.id),P(`/client/appointment/${s.id}`)):P(`/${i}/appointments/${s.id}`)};return e.jsx(d,{className:"relative border-0 shadow-xl rounded-2xl mb-4 transition-transform duration-200 hover:-translate-y-1 hover:shadow-2xl hover:ring-2 hover:ring-blue-200 bg-white/90 group",children:e.jsxs(m,{className:"p-5 flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center text-2xl font-bold text-blue-700 shadow-md",children:i==="client"?e.jsx("span",{children:(k=s.providerName)==null?void 0:k.split(" ").map(h=>h[0]).join("").substring(0,2).toUpperCase()}):e.jsx("span",{children:($=s.clientName)==null?void 0:$.split(" ").map(h=>h[0]).join("").substring(0,2).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"font-semibold text-lg text-gray-900 truncate",children:i==="client"?s.providerName:s.clientName})}),e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex items-center gap-1
              ${s.status==="pending"?"bg-yellow-100 text-yellow-800":s.status==="confirmed"?"bg-blue-100 text-blue-800":s.status==="executing"?"bg-purple-100 text-purple-800":s.status==="completed"?"bg-green-100 text-green-800":s.status==="canceled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"}
            `,children:[s.status==="pending"&&e.jsx(z,{className:"h-3 w-3"}),s.status==="confirmed"&&e.jsx(W,{className:"h-3 w-3"}),s.status==="executing"&&e.jsx(se,{className:"h-3 w-3"}),s.status==="completed"&&e.jsx(De,{className:"h-3 w-3"}),s.status==="canceled"&&e.jsx(re,{className:"h-3 w-3"}),s.status==="no_show"&&e.jsx(be,{className:"h-3 w-3"}),Q(s.status)]}),s.paymentStatus&&e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex items-center gap-1 ${ae(s.paymentStatus).color}`,children:[ae(s.paymentStatus).icon,ae(s.paymentStatus).text]})]}),e.jsx("div",{className:"text-sm text-gray-500 truncate mb-1",children:s.serviceName}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"h-3 w-3"})," ",D,", ",s.startTime]}),e.jsxs("span",{className:"flex items-center gap-1 font-semibold text-green-700 bg-green-100 px-2 py-0.5 rounded-full ml-2",children:["R$ ",((s.totalPrice||0)/100).toFixed(2)]})]})]}),F&&e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(p,{variant:"outline",size:"icon",onClick:g,className:"h-8 w-8 p-0 border-gray-300 hover:border-blue-400",title:"Detalhes",children:e.jsx(b,{className:"h-4 w-4"})}),i==="provider"&&e.jsxs(Pe,{children:[e.jsx(Ae,{asChild:!0,children:e.jsx(p,{variant:"outline",size:"icon",className:"h-8 w-8 p-0 border-gray-300 hover:border-blue-400",children:e.jsx(Te,{className:"h-4 w-4"})})}),e.jsxs(Me,{align:"end",className:"w-48 bg-white border border-gray-200 shadow-lg",children:[s.status==="pending"&&e.jsxs(S,{onClick:c,children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Confirmado"]}),s.status==="confirmed"&&e.jsxs(S,{onClick:o,children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Executando"]}),s.status==="executing"&&e.jsxs(e.Fragment,{children:[e.jsxs(S,{onClick:t,children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Conclu√≠do"]}),e.jsxs(S,{onClick:c,children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Voltar para Confirmado"]})]}),s.status!=="canceled"&&s.status!=="completed"&&e.jsxs(e.Fragment,{children:[e.jsxs(S,{onClick:j,children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"N√£o compareceu"]}),e.jsxs(S,{onClick:a,className:"text-red-600",children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Cancelar"]})]}),s.status!=="canceled"&&s.paymentStatus!=="paid"&&e.jsxs(S,{onClick:T,className:"text-green-600",children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Pago"]}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(S,{onClick:o,children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Executando"]}),e.jsxs(S,{onClick:t,children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Conclu√≠do"]})]}),s.status==="confirmed"&&e.jsxs(S,{onClick:t,children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Conclu√≠do"]}),s.status!=="canceled"&&s.status!=="completed"&&e.jsx("div",{className:"h-px bg-gray-200 my-1"})]})]})]})]})})}const ys=({appointments:s,isLoading:i=!1,onEventClick:C})=>{var D,y;const[F,P]=f.useState("timeGridWeek"),[r,A]=f.useState(null),[H,M]=f.useState(!1),[_,N]=f.useState(null),[E,B]=f.useState("calendar"),I=l=>{const n=l.event,x=n.extendedProps.isManuallyCreated;return n.extendedProps.status,e.jsxs("div",{className:"flex flex-col w-full overflow-hidden p-1",children:[e.jsxs("div",{className:"font-semibold text-xs truncate flex items-center",children:[n.title,x&&e.jsx(U,{variant:"outline",className:"ml-1 text-[8px] py-0 h-3 bg-orange-100 text-orange-700 border-orange-300",children:"Manual"})]}),e.jsxs("div",{className:"text-[10px] truncate flex items-center justify-between",children:[e.jsx("span",{children:n.extendedProps.client&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(oe,{className:"h-2.5 w-2.5 mr-0.5"}),e.jsx("span",{children:n.extendedProps.client})]})}),e.jsx("span",{children:n.extendedProps.duration&&e.jsxs("div",{className:"flex items-center opacity-80",children:[e.jsx(es,{className:"h-2.5 w-2.5 mr-0.5"}),e.jsxs("span",{children:[n.extendedProps.duration,"min"]})]})})]})]})},R=f.useCallback(l=>{const n=l.event;A({id:n.id,title:n.title,start:n.startStr,end:n.endStr,backgroundColor:n.backgroundColor,borderColor:n.borderColor,textColor:n.textColor,extendedProps:n.extendedProps}),M(!0),C&&C(l)},[C]),v=f.useMemo(()=>{if(!s||s.length===0)return{totalAppointments:0,totalRevenue:0,byStatus:{},byDays:[],manualAppointments:0,manualRevenue:0};const n=ss(new Date,{weekStartsOn:1}),x=Array.from({length:7},(g,k)=>V(as(n,k),"yyyy-MM-dd")),a={};x.forEach(g=>{a[g]={date:g,formattedDate:V(rs(g),"EEE, dd/MM",{locale:ts}),totalAppointments:0,revenue:0,manualAppointments:0}});let t=0,j=0,c=0,o=0;const T={};return s.forEach(g=>{const k=g.start.split("T")[0],$=g.extendedProps.price||0,h=g.extendedProps.status||"confirmado",O=g.extendedProps.isManuallyCreated;x.includes(k)&&(t++,j+=$,T[h]=(T[h]||0)+1,O&&(c++,o+=$),a[k]&&(a[k].totalAppointments++,a[k].revenue+=$,O&&a[k].manualAppointments++))}),{totalAppointments:t,totalRevenue:j,byStatus:T,byDays:Object.values(a),manualAppointments:c,manualRevenue:o}},[s]),w=f.useCallback(l=>{if(!s||s.length===0){alert("N√£o h√° agendamentos para exportar");return}if(l==="csv"){const n=["ID","T√≠tulo","Cliente","Servi√ßo","In√≠cio","Fim","Status","Observa√ß√µes","Tipo"],x=s.map(o=>[o.id,o.title,o.extendedProps.client||"",o.extendedProps.serviceName||"",o.start,o.end,o.extendedProps.status||"",o.extendedProps.notes||"",o.extendedProps.isManuallyCreated?"Manual":"Autom√°tico"]),a=[n.join(","),...x.map(o=>o.join(","))].join(`
`),t=new Blob([a],{type:"text/csv;charset=utf-8;"}),j=URL.createObjectURL(t),c=document.createElement("a");c.setAttribute("href",j),c.setAttribute("download",`agendamentos_${l(new Date,"yyyy-MM-dd")}.csv`),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)}else alert("Exporta√ß√£o para PDF ser√° implementada em breve!")},[s]);return i?e.jsx(d,{children:e.jsx(m,{className:"p-0",children:e.jsx("div",{className:"p-4",children:e.jsx(u,{className:"h-[400px] w-full"})})})}):e.jsxs(d,{className:"mb-6",children:[e.jsx(X,{className:"pb-0",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(J,{className:"text-xl font-semibold flex items-center",children:[e.jsx(b,{className:"w-5 h-5 mr-2 text-primary"}),"Agenda Semanal"]}),e.jsx(ye,{children:"Visualize e gerencie todos os seus agendamentos"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Fe,{children:e.jsxs(Ue,{children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>w("csv"),className:"flex items-center",children:[e.jsx(Xe,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportar"})]})}),e.jsx(He,{children:e.jsx("p",{children:"Exportar agendamentos em CSV"})})]})}),e.jsx(ge,{value:E,onValueChange:l=>B(l),className:"h-9",children:e.jsxs(fe,{className:"h-9",children:[e.jsxs(Y,{value:"calendar",className:"h-8 px-3",children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Calend√°rio"})]}),e.jsxs(Y,{value:"stats",className:"h-8 px-3",children:[e.jsx(Je,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Estat√≠sticas"})]})]})})]})]})}),e.jsxs(m,{className:"p-2 pt-4",children:[e.jsxs("div",{className:"p-2 bg-muted/20 flex flex-wrap items-center gap-2 text-xs border rounded-md mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-[#10b981] mr-1"}),e.jsx("span",{children:"Confirmado"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-[#f59e0b] mr-1"}),e.jsx("span",{children:"Pendente"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-[#ef4444] mr-1"}),e.jsx("span",{children:"Cancelado"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-[#3b82f6] mr-1"}),e.jsx("span",{children:"Conclu√≠do"})]}),e.jsxs("div",{className:"flex items-center ml-auto",children:[e.jsx(U,{variant:"outline",className:"bg-orange-100 text-orange-700 border-orange-300",children:"Manual"}),e.jsx("span",{className:"ml-1",children:"Agendamento manual"})]})]}),E==="calendar"&&e.jsx("div",{className:"min-h-[600px] pb-4",children:e.jsx($e,{plugins:[Le,ze,qe],initialView:"timeGridWeek",headerToolbar:{left:"prev,next today",center:"title",right:"timeGridWeek,dayGridMonth"},locale:Oe,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",events:s,height:"auto",eventContent:I,dayMaxEvents:!0,allDaySlot:!1,nowIndicator:!0,businessHours:{daysOfWeek:[1,2,3,4,5],startTime:"08:00",endTime:"18:00"},eventClick:R,viewDidMount:l=>{P(l.view.type),N(l.view.calendar)},eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1,hour12:!1},slotLabelFormat:{hour:"2-digit",minute:"2-digit",meridiem:!1,hour12:!1}})}),E==="stats"&&e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx(d,{className:"bg-primary/5 border-primary/20",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Agendamentos"}),e.jsx("p",{className:"text-2xl font-bold",children:v.totalAppointments})]}),e.jsx(b,{className:"h-8 w-8 text-primary opacity-70"})]})})}),e.jsx(d,{className:"bg-green-50 border-green-200",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receita Estimada"}),e.jsx("p",{className:"text-2xl font-bold",children:L(v.totalRevenue)})]}),e.jsx(Ye,{className:"h-8 w-8 text-green-600 opacity-70"})]})})}),e.jsx(d,{className:"bg-orange-50 border-orange-200",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Agendamentos Manuais"}),e.jsx("p",{className:"text-2xl font-bold",children:v.manualAppointments})]}),e.jsx(Ns,{className:"h-8 w-8 text-orange-600 opacity-70"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(d,{children:[e.jsx(X,{children:e.jsx(J,{className:"text-base",children:"Agendamentos por Status"})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(v.byStatus).length>0?Object.entries(v.byStatus).map(([l,n])=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${l==="confirmado"?"bg-[#10b981]":l==="pendente"?"bg-[#f59e0b]":l==="cancelado"?"bg-[#ef4444]":l==="concluido"?"bg-[#3b82f6]":"bg-gray-400"}`}),e.jsxs("div",{className:"flex-1 flex justify-between items-center",children:[e.jsx("span",{className:"capitalize",children:Q(l)}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium",children:n}),e.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",Math.round(n/v.totalAppointments*100),"%)"]})]})]})]},l)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(de,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Nenhum dado dispon√≠vel"})]})})})]}),e.jsxs(d,{children:[e.jsx(X,{children:e.jsx(J,{className:"text-base",children:"Agendamentos por Dia"})}),e.jsx(m,{children:e.jsx(Qe,{className:"h-[200px] pr-4",children:e.jsx("div",{className:"space-y-3",children:v.byDays.map(l=>e.jsx(d,{className:"p-2 border-muted/70",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:l.formattedDate}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center mt-1",children:[e.jsx(b,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[l.totalAppointments," agendamentos"]}),l.manualAppointments>0&&e.jsxs(U,{variant:"outline",className:"ml-2 h-4 text-[9px] bg-orange-100 text-orange-700 border-orange-300",children:[l.manualAppointments," manual"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:L(l.revenue)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receita estimada"})]})]})},l.date))})})})]})]})]})]}),e.jsx(_e,{open:H,onOpenChange:M,children:e.jsxs(Be,{className:"max-w-md",children:[e.jsxs(Ke,{children:[e.jsx(We,{children:"Detalhes do Agendamento"}),e.jsx(Ge,{children:"Informa√ß√µes completas sobre este agendamento"})]}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 rounded-md",style:{backgroundColor:`${r.backgroundColor}15`},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:r.title}),e.jsx("div",{className:"text-sm text-muted-foreground",children:V(new Date(r.start),"dd/MM/yyyy")}),e.jsxs("div",{className:"text-sm",children:[V(new Date(r.start),"HH:mm")," - ",V(new Date(r.end),"HH:mm")]})]}),e.jsxs("div",{children:[e.jsx(U,{style:{backgroundColor:r.backgroundColor,color:r.textColor},children:Q(r.extendedProps.status||"confirmado")}),r.extendedProps.isManuallyCreated&&e.jsx(U,{variant:"outline",className:"ml-2 bg-orange-100 text-orange-700 border-orange-300",children:"Manual"})]})]})}),e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center text-sm",children:[e.jsx(oe,{className:"h-4 w-4 mr-1"}),"Informa√ß√µes do Cliente"]}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(pe,{className:"h-10 w-10 mr-3",children:e.jsx(je,{className:"bg-primary/10 text-primary",children:((y=(D=r.extendedProps.client)==null?void 0:D[0])==null?void 0:y.toUpperCase())||"C"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:r.extendedProps.client||"Cliente n√£o informado"}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1 text-sm",children:[r.extendedProps.clientPhone&&e.jsxs("a",{href:`tel:${r.extendedProps.clientPhone}`,className:"flex items-center text-xs text-primary",children:[e.jsx(vs,{className:"h-3 w-3 mr-1"})," Ligar"]}),r.extendedProps.clientEmail&&e.jsxs("a",{href:`mailto:${r.extendedProps.clientEmail}`,className:"flex items-center text-xs text-primary",children:[e.jsx(Ze,{className:"h-3 w-3 mr-1"})," Email"]})]})]})]})]}),e.jsxs("div",{className:"rounded-lg border p-3",children:[e.jsxs("h4",{className:"font-medium mb-2 flex items-center text-sm",children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"Informa√ß√µes do Servi√ßo"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Servi√ßo"}),e.jsx("p",{children:r.extendedProps.serviceName||r.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Dura√ß√£o"}),e.jsxs("p",{children:[r.extendedProps.duration||"-"," minutos"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Valor"}),e.jsx("p",{children:r.extendedProps.price?L(r.extendedProps.price):"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Status"}),e.jsx("p",{className:"capitalize",children:Q(r.extendedProps.status||"confirmado")})]})]}),r.extendedProps.notes&&e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Observa√ß√µes"}),e.jsx("p",{className:"text-sm mt-1",children:r.extendedProps.notes})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(p,{variant:"outline",onClick:()=>M(!1),children:"Fechar"}),e.jsx(p,{children:"Gerenciar"})]})]})]})})]})};function Sa(){var x;const[,s]=ue(),{user:i}=Ce(),{data:C,isLoading:F}=K({queryKey:["/api/provider-settings"],refetchOnMount:!0,staleTime:30*1e3,retry:1}),{data:P=[],isLoading:r}=K({queryKey:["/api/appointments"],staleTime:60*1e3,retry:1}),{data:A=[],isLoading:H}=K({queryKey:[`/api/provider-services/provider/${i==null?void 0:i.id}`],staleTime:300*1e3,retry:1,enabled:!!(i!=null&&i.id)}),[M,_]=f.useState(!1),{data:N,isLoading:E,refetch:B}=K({queryKey:["/api/provider/stripe-status"],retry:1});f.useEffect(()=>{C&&!F&&_(C.isOnline??!1)},[C,F]);const I=le({mutationFn:async a=>await(await te("PUT","/api/provider-settings",{isOnline:a})).json(),onSuccess:()=>{ke.invalidateQueries({queryKey:["/api/provider-settings"]})}}),R=a=>{_(a),I.mutate(a)},v=new Date().toISOString().split("T")[0],w=P.filter(a=>a.date===v),D={todayAppointments:w.length,monthlyRevenue:P.filter(a=>a.paymentStatus==="paid"&&a.totalPrice).reduce((a,t)=>a+(t.totalPrice||0),0),manualAppointments:3},y=P.filter(a=>{const j=new Date().toISOString().split("T")[0];return a.date>=j}).sort((a,t)=>a.date!==t.date?a.date.localeCompare(t.date):a.startTime.localeCompare(t.startTime)).slice(0,5),l=a=>!a||!Array.isArray(a)?[]:a.map(t=>{let j="#3b82f6",c="#2563eb",o="#ffffff";t.status==="canceled"?(j="#ef4444",c="#dc2626"):t.status==="pending"?(j="#f97316",c="#ea580c"):t.status==="completed"&&(j="#22c55e",c="#16a34a");const T=`${t.date}T${t.startTime}:00`,g=`${t.date}T${t.endTime}:00`;return{id:t.id.toString(),title:t.serviceName||"Agendamento",start:T,end:g,backgroundColor:j,borderColor:c,textColor:o,extendedProps:{client:t.clientName||"",status:t.status,serviceName:t.serviceName,notes:t.notes,isManuallyCreated:t.isManuallyCreated||!1,clientPhone:t.clientPhone||"",clientEmail:t.clientEmail||"",price:t.price||0,duration:30,payment_status:t.payment_status}}}),n=a=>{a.event.id,Se({title:a.event.title,description:`Cliente: ${a.event.extendedProps.client||"N√£o informado"} - Status: ${a.event.extendedProps.status||"N√£o informado"}`})};return e.jsxs("div",{className:"min-h-screen bg-white pb-20 overflow-x-hidden",children:[e.jsx(ls,{children:e.jsx(Ie,{children:e.jsxs("div",{className:"w-full max-w-full py-6 px-2 sm:px-4 overflow-x-hidden bg-white min-h-screen",style:{maxWidth:"100vw",width:"100%"},children:[e.jsx("header",{className:"flex flex-row items-center justify-around px-6 sm:px-8 pt-4 pb-2 w-full",children:e.jsx("img",{src:"/AgendoAilogo.png",alt:"AgendoAI Logo",className:"h-12 w-auto"})}),e.jsxs(ds.div,{className:"mb-6 flex items-center justify-between",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(pe,{className:"h-12 w-12 mr-4 shadow-lg",children:[e.jsx(Re,{src:(i==null?void 0:i.profileImage)||""}),e.jsx(je,{className:"bg-gradient-to-br from-[#58c9d1] to-[#58c9d1]/80 text-white text-lg font-bold",children:((x=i==null?void 0:i.name)==null?void 0:x.split(" ").map(a=>a[0]).join("").substring(0,2).toUpperCase())||"PR"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-neutral-500 font-medium mb-1",children:"Bem-vindo(a) de volta,"}),e.jsx("h1",{className:"text-xl font-bold text-neutral-900",children:(i==null?void 0:i.name)||"Prestador"}),e.jsx("p",{className:"text-neutral-600 text-sm mt-1",children:"Gerencie seus servi√ßos e agendamentos"})]})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("p",{className:`font-semibold ${M?"text-green-600":"text-gray-500"}`,children:M?"Dispon√≠vel":"Indispon√≠vel"})]}),e.jsx(Ee,{checked:M,onCheckedChange:R})]})]}),!E&&N&&e.jsx("div",{className:"mb-6 w-full max-w-full overflow-hidden",children:N.status==="enabled"?e.jsxs("div",{className:"flex items-start gap-3 bg-green-50 border border-green-200 rounded-lg p-3 w-full max-w-full overflow-hidden",children:[e.jsx(ne,{className:"text-green-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-semibold text-green-700 text-sm break-words",children:"Conta Stripe conectada e habilitada para receber pagamentos."}),e.jsxs("a",{href:N.dashboardUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-700 hover:underline mt-1 text-xs",children:[e.jsx(ee,{className:"h-3 w-3"})," Acessar painel Stripe"]})]})]}):N.status==="pending"?e.jsxs("div",{className:"flex items-start gap-3 bg-yellow-50 border border-yellow-200 rounded-lg p-3 w-full max-w-full overflow-hidden",children:[e.jsx(z,{className:"text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-semibold text-yellow-700 text-sm break-words",children:"Conta Stripe conectada, mas pendente de verifica√ß√£o."}),e.jsxs("button",{onClick:N.onboardingUrl?()=>window.open(N.onboardingUrl,"_blank"):void 0,className:"inline-flex items-center gap-1 text-blue-700 hover:underline mt-1 text-xs",children:[e.jsx(ee,{className:"h-3 w-3"})," Completar onboarding Stripe"]})]})]}):e.jsxs("div",{className:"flex items-start gap-3 bg-red-50 border border-red-200 rounded-lg p-3 w-full max-w-full overflow-hidden",children:[e.jsx(z,{className:"text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-semibold text-red-700 text-sm break-words",children:"Conta Stripe n√£o conectada."}),e.jsxs("button",{onClick:N.onboardingUrl?()=>window.open(N.onboardingUrl,"_blank"):void 0,className:"inline-flex items-center gap-1 text-blue-700 hover:underline mt-1 text-xs",children:[e.jsx(ee,{className:"h-3 w-3"})," Conectar conta Stripe"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 w-full max-w-full overflow-hidden",children:[e.jsx(d,{className:"bg-white border border-neutral-200 rounded-lg shadow-sm w-full max-w-full",children:e.jsxs(m,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-[#58c9d1]/10 flex items-center justify-center",children:e.jsx(b,{className:"h-4 w-4 text-[#58c9d1]"})}),e.jsx("span",{className:"text-xs font-semibold text-neutral-500",children:"Hoje"})]}),e.jsx("div",{className:"text-lg font-bold text-neutral-900",children:w.length})]})}),e.jsx(d,{className:"bg-white border border-neutral-200 rounded-lg shadow-sm w-full max-w-full",children:e.jsxs(m,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-[#58c9d1]/10 flex items-center justify-center",children:e.jsx(os,{className:"h-4 w-4 text-[#58c9d1]"})}),e.jsx("span",{className:"text-xs font-semibold text-neutral-500",children:"Receita"})]}),e.jsx("div",{className:"text-lg font-bold text-neutral-900",children:L(D.monthlyRevenue||0)})]})}),e.jsx(d,{className:"bg-white border border-neutral-200 rounded-lg shadow-sm w-full max-w-full",children:e.jsxs(m,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-[#58c9d1]/10 flex items-center justify-center",children:e.jsx(cs,{className:"h-4 w-4 text-[#58c9d1]"})}),e.jsx("span",{className:"text-xs font-semibold text-neutral-500",children:"Clientes"})]}),e.jsx("div",{className:"text-lg font-bold text-neutral-900",children:D.manualAppointments})]})}),e.jsx(d,{className:"bg-white border border-neutral-200 rounded-lg shadow-sm w-full max-w-full",children:e.jsxs(m,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-[#58c9d1]/10 flex items-center justify-center",children:e.jsx(ms,{className:"h-4 w-4 text-[#58c9d1]"})}),e.jsx("span",{className:"text-xs font-semibold text-neutral-500",children:"Convers√£o"})]}),e.jsx("div",{className:"text-lg font-bold text-neutral-900",children:"85%"})]})})]}),e.jsxs(ge,{defaultValue:"summary",className:"mb-8 w-full",children:[e.jsxs(fe,{className:"mb-6 bg-white/80 backdrop-blur-sm border border-gray-200 shadow-lg",children:[e.jsxs(Y,{value:"summary",className:"data-[state=active]:bg-gray-900 data-[state=active]:text-white",children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"Resumo"]}),e.jsxs(Y,{value:"calendar",className:"data-[state=active]:bg-gray-900 data-[state=active]:text-white",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Calend√°rio Semanal"]})]}),e.jsxs(me,{value:"summary",className:"space-y-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-3 max-w-full overflow-hidden",children:[e.jsx(hs,{className:"h-5 w-5 text-gray-700 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"A√ß√µes R√°pidas"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full overflow-x-hidden",children:[e.jsxs(p,{onClick:()=>s("/provider/manual-booking"),className:"h-12 flex flex-col items-center justify-center space-y-1 bg-[#58c9d1] hover:bg-[#58c9d1]/90 text-white border-0 shadow-sm hover:shadow-md transition-all duration-300 text-xs px-2 w-full max-w-full",children:[e.jsx(xe,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Novo"})]}),e.jsxs(p,{onClick:()=>s("/provider/schedule"),variant:"outline",className:"h-12 flex flex-col items-center justify-center space-y-1 border border-neutral-200 hover:border-neutral-300 hover:bg-neutral-50 shadow-sm hover:shadow-md transition-all duration-300 text-xs px-2",children:[e.jsx(us,{className:"h-4 w-4 text-neutral-700"}),e.jsx("span",{className:"text-xs font-medium text-neutral-700",children:"Hor√°rios"})]}),e.jsxs(p,{onClick:()=>s("/provider/services"),variant:"outline",className:"h-12 flex flex-col items-center justify-center space-y-1 border border-neutral-200 hover:border-neutral-300 hover:bg-neutral-50 shadow-sm hover:shadow-md transition-all duration-300 text-xs px-2",children:[e.jsx(G,{className:"h-4 w-4 text-neutral-700"}),e.jsx("span",{className:"text-xs font-medium text-neutral-700",children:"Servi√ßos"})]}),e.jsxs(p,{onClick:()=>s("/provider/analytics"),variant:"outline",className:"h-12 flex flex-col items-center justify-center space-y-1 border border-neutral-200 hover:border-neutral-300 hover:bg-neutral-50 shadow-sm hover:shadow-md transition-all duration-300 text-xs px-2",children:[e.jsx(ps,{className:"h-4 w-4 text-neutral-700"}),e.jsx("span",{className:"text-xs font-medium text-neutral-700",children:"Analytics"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-3 max-w-full overflow-hidden",children:[e.jsx(G,{className:"h-5 w-5 text-gray-700 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Meus Servi√ßos"})]}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>s("/provider/services"),className:"text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:"Ver todos ‚Üí"})]}),H?e.jsx("div",{className:"grid grid-cols-1 gap-0.5 w-full max-w-full overflow-hidden",children:[...Array(4)].map((a,t)=>e.jsx(d,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm w-full max-w-full",children:e.jsxs(m,{className:"p-1 w-full max-w-full",children:[e.jsx(u,{className:"h-4 w-24 mb-2"}),e.jsx(u,{className:"h-5 w-16 mb-3"}),e.jsx(u,{className:"h-3 w-20"})]})},t))}):A.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-0.5 w-full max-w-full overflow-hidden",children:A.slice(0,4).map(a=>e.jsx(d,{className:"border border-neutral-200 shadow-sm bg-white hover:shadow-md cursor-pointer transition-all duration-300 group",onClick:()=>s("/provider/services"),children:e.jsxs(m,{className:"p-3 w-full max-w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-[#58c9d1]/10 flex items-center justify-center",children:e.jsx(G,{className:"h-4 w-4 text-[#58c9d1]"})}),e.jsx("div",{className:"text-xs text-neutral-500 bg-neutral-100 px-2 py-1 rounded-full",children:a.categoryName||"Categoria"})]}),e.jsx("h3",{className:"font-semibold text-neutral-900 mb-1 truncate group-hover:text-[#58c9d1] transition-colors break-words text-sm",children:a.serviceName}),e.jsx("p",{className:"text-base font-bold text-green-600",children:a.price!=null?L(a.price||0):a.defaultPrice?L(a.defaultPrice||0):"R$ 0,00"})]})},a.id))}):e.jsxs(d,{className:"border-2 border-dashed border-gray-300 bg-gray-50/50 p-1 text-center w-full max-w-full overflow-hidden",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center mx-auto mb-2",children:e.jsx(G,{className:"h-5 w-5 text-gray-400"})}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"Nenhum servi√ßo cadastrado"}),e.jsx("p",{className:"text-gray-600 mb-2 max-w-full mx-auto text-xs break-words",children:"Comece criando seu primeiro servi√ßo para receber agendamentos dos clientes"}),e.jsxs(p,{onClick:()=>s("/provider/services"),size:"sm",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white shadow-lg hover:shadow-xl transition-all duration-300 text-xs px-2 py-1",children:[e.jsx(js,{className:"h-4 w-4 mr-1"}),"Cadastrar Servi√ßo"]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-3 max-w-full overflow-hidden",children:[e.jsx(b,{className:"h-5 w-5 text-gray-700 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Agendamentos de hoje"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[w.length," agendamento",w.length!==1?"s":""]}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>s("/provider/appointments-management"),className:"text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:"Ver todos ‚Üí"})]})]}),r?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((a,t)=>e.jsx(d,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:e.jsxs(m,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between mb-3",children:[e.jsx(u,{className:"h-5 w-32"}),e.jsx(u,{className:"h-4 w-24"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{className:"w-12 h-12 rounded-xl mr-4"}),e.jsxs("div",{className:"w-full",children:[e.jsx(u,{className:"h-4 w-28 mb-2"}),e.jsx(u,{className:"h-3 w-40"})]})]})]})},t))}):w.length>0?e.jsxs("div",{children:[w.length>3&&e.jsxs("div",{className:"mb-3 text-xs text-gray-500 bg-gray-50 px-3 py-2 rounded-lg border",children:["üìú Mostrando 3 de ",w.length," agendamentos. Role para ver mais."]}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",style:{scrollbarWidth:"thin",scrollbarColor:"#d1d5db #f3f4f6"},children:w.map(a=>e.jsx(he,{appointment:a,userType:"provider"},a.id))})]}):e.jsxs(d,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm p-4 sm:p-8 text-center w-full max-w-full",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center mx-auto mb-4",children:e.jsx(b,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum agendamento"}),e.jsx("p",{className:"text-gray-600",children:"N√£o h√° agendamentos para hoje"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-3 max-w-full overflow-hidden",children:[e.jsx(b,{className:"h-5 w-5 text-gray-700 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Pr√≥ximos agendamentos"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[y.length," agendamento",y.length!==1?"s":""]}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>s("/provider/appointments-management"),className:"text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:"Ver todos ‚Üí"})]})]}),r?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((a,t)=>e.jsx(d,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:e.jsxs(m,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between mb-3",children:[e.jsx(u,{className:"h-5 w-32"}),e.jsx(u,{className:"h-4 w-24"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{className:"w-12 h-12 rounded-xl mr-4"}),e.jsxs("div",{className:"w-full",children:[e.jsx(u,{className:"h-4 w-28 mb-2"}),e.jsx(u,{className:"h-3 w-40"})]})]})]})},t))}):y.length>0?e.jsxs("div",{children:[y.length>3&&e.jsxs("div",{className:"mb-3 text-xs text-gray-500 bg-gray-50 px-3 py-2 rounded-lg border",children:["üìú Mostrando 3 de ",y.length," agendamentos. Role para ver mais."]}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",style:{scrollbarWidth:"thin",scrollbarColor:"#d1d5db #f3f4f6"},children:y.map(a=>e.jsx(he,{appointment:a,userType:"provider"},a.id))})]}):e.jsxs(d,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm p-4 sm:p-8 text-center w-full max-w-full",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center mx-auto mb-4",children:e.jsx(b,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum agendamento"}),e.jsx("p",{className:"text-gray-600",children:"N√£o h√° agendamentos futuros"})]})]})]}),e.jsxs(me,{value:"calendar",children:[e.jsxs(d,{className:"mb-6 border-0 shadow-xl bg-white/90 backdrop-blur-sm w-full max-w-full",children:[e.jsx(X,{className:"pb-4",children:e.jsxs(J,{className:"flex items-center text-2xl font-bold text-gray-900",children:[e.jsx(b,{className:"h-6 w-6 mr-3 text-gray-700"}),"Calend√°rio de Agendamentos"]})}),e.jsx(m,{className:"p-0",children:e.jsxs("div",{className:"p-4 sm:p-6 bg-gradient-to-r from-gray-50 to-gray-100 border-t border-gray-200 flex flex-col sm:flex-row items-start sm:items-center justify-between w-full max-w-full min-w-0",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Clique em um agendamento para ver mais detalhes"})]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>s("/provider/manual-booking"),className:"bg-white hover:bg-gray-50 border-gray-300 shadow-sm",children:[e.jsx(xe,{className:"h-4 w-4 mr-2"}),"Novo Agendamento"]})]})})]}),e.jsx(ys,{appointments:l(P),isLoading:r,onEventClick:n})]})]})]})})}),e.jsx(ns,{items:[{icon:e.jsx(gs,{size:26}),label:"In√≠cio",href:"/provider/dashboard"},{icon:e.jsx(fs,{size:26}),label:"Agenda",href:"/provider/schedule"},{icon:e.jsx(is,{size:32,className:"animate-pulse"}),label:"Novo",href:"/provider/manual-booking"},{icon:e.jsx(bs,{size:26}),label:"Buscar",href:"/provider/search"},{icon:e.jsx(oe,{size:26}),label:"Perfil",href:"/provider/profile"}]})]})}export{Sa as default};
