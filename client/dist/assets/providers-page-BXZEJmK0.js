import{j as e}from"./ui-UIpCtT3r.js";import{r as f}from"./vendor-vA4cx1mx.js";import{j as N,b as R,c as W,L as G,C as c,g as d,d as K,e as X,f as $,q as H,i as w}from"./index-BJ9Cw0LR.js";import{u as J}from"./useMutation-CDdW0pzE.js";import{A as C}from"./admin-layout-I_J5o8A_.js";import{B as A}from"./button-BvsVcTDx.js";import{D as k,a as D,b as M,e as i}from"./dropdown-menu-Dyfg7Gk4.js";import{B as b}from"./badge-BQpU5zw7.js";import{A as Y,a as Z,b as _}from"./avatar-DEanbPY_.js";import{I as ee}from"./input-CNw_l4dQ.js";import{B as m}from"./building-BANZW8_y.js";import{C as S}from"./circle-check-CXlLyjN5.js";import{S as se}from"./search-ByWcnwgm.js";import{F as ae}from"./filter-DD6WvVwF.js";import{C as te}from"./circle-x-ClGNptSr.js";import{E as re}from"./ellipsis-BBL9RPIR.js";import{E as ie}from"./eye-B-pO_WB7.js";import{S as le}from"./settings-WRZm2y6w.js";import{S as P}from"./star-CbLR1xBL.js";import{U as ne}from"./user-x-BSZN_FNO.js";import{U as oe}from"./user-check-CRf15llp.js";import{C as ce}from"./calendar-tibBNAR3.js";import"./router-CxXythJb.js";import"./navbar-YJYqy7V_.js";import"./proxy-Bw6ASuXk.js";import"./house-CCMYCVaH.js";import"./calendar-check-DUwfC2Eu.js";import"./user-C2y4PfJ8.js";import"./log-out-CdVFLkWN.js";import"./dialog-BlryVO8p.js";import"./menu-B7gXVrLX.js";import"./bell-vRE7a1ng.js";import"./arrow-left-EWHBe2nW.js";import"./users-ZhvK7Ip9.js";import"./trending-up-BcBXLPRG.js";import"./folder-tree-Duy3Amda.js";import"./credit-card-CO61cKh_.js";import"./share-2-B19OuGMQ.js";import"./circle-help-CxLgceap.js";import"./book-open-Esw08_-n.js";import"./chevron-right-CATzdtP3.js";import"./check-ZbxB06uW.js";import"./circle-CxgECyF4.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=N("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=N("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=N("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);function ts(){const{toast:y}=R(),[xe,E]=f.useState(!1),[he,L]=f.useState(null),[p,F]=f.useState(""),[l,x]=f.useState(null),{data:a,isLoading:z}=W({queryKey:["/api/admin/providers"],queryFn:async()=>{try{return await(await w("GET","/api/admin/providers")).json()}catch(s){return console.error("Erro ao carregar prestadores:",s),[]}}}),I=J({mutationFn:async({id:s,data:r})=>(await w("PUT",`/api/admin/users/${s}`,r)).json(),onSuccess:()=>{H.invalidateQueries({queryKey:["/api/admin/providers"]}),y({title:"Prestador atualizado",description:"As informações do prestador foram atualizadas com sucesso."})},onError:s=>{y({title:"Erro ao atualizar prestador",description:s.message,variant:"destructive"})}}),v=s=>{I.mutate({id:s.id,data:{isActive:!s.isActive}})},T=s=>{L(s),E(!0)},q=s=>s?`${(Math.round(s/100*5*10)/10).toFixed(1)} ★`:"Não avaliado",t=a==null?void 0:a.filter(s=>{var r,n,h;if(l&&(l==="active"&&!s.isActive||l==="inactive"&&s.isActive||l==="online"&&!((r=s.providerData)!=null&&r.isOnline)||l==="offline"&&((n=s.providerData)!=null&&n.isOnline)))return!1;if(p){const o=p.toLowerCase(),u=(s.name||"").toLowerCase(),g=s.email.toLowerCase(),j=(((h=s.providerData)==null?void 0:h.businessName)||"").toLowerCase();return u.includes(o)||g.includes(o)||j.includes(o)}return!0}),B=(a==null?void 0:a.length)||0,U=(a==null?void 0:a.filter(s=>s.isActive).length)||0,V=(a==null?void 0:a.filter(s=>{var r;return(r=s.providerData)==null?void 0:r.isOnline}).length)||0,Q=(a==null?void 0:a.filter(s=>s.isVerified).length)||0;return z?e.jsx(C,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:e.jsx("div",{className:"container mx-auto py-8 px-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 h-64",children:[e.jsx(G,{className:"h-12 w-12 animate-spin text-blue-500"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Carregando prestadores..."})]})})})}):e.jsx(C,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl",children:e.jsx(m,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gerenciamento de Prestadores"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Gerencie todos os prestadores de serviço da plataforma"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(c,{className:"border-0 shadow-lg bg-gradient-to-br from-blue-50 to-blue-100",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Total de Prestadores"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:B})]}),e.jsx("div",{className:"bg-blue-500 p-3 rounded-full",children:e.jsx(m,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(c,{className:"border-0 shadow-lg bg-gradient-to-br from-green-50 to-green-100",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Prestadores Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:U})]}),e.jsx("div",{className:"bg-green-500 p-3 rounded-full",children:e.jsx(S,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(c,{className:"border-0 shadow-lg bg-gradient-to-br from-purple-50 to-purple-100",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Online Agora"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:V})]}),e.jsx("div",{className:"bg-purple-500 p-3 rounded-full",children:e.jsx(O,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(c,{className:"border-0 shadow-lg bg-gradient-to-br from-orange-50 to-orange-100",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Verificados"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:Q})]}),e.jsx("div",{className:"bg-orange-500 p-3 rounded-full",children:e.jsx(de,{className:"h-6 w-6 text-white"})})]})})})]})]}),e.jsxs(c,{className:"border-0 shadow-lg mb-6",children:[e.jsx(K,{className:"bg-gradient-to-r from-gray-50 to-blue-50 border-b",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs(X,{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(m,{className:"h-5 w-5 mr-2 text-blue-600"}),"Lista de Prestadores"]}),e.jsxs($,{className:"text-gray-600",children:[(t==null?void 0:t.length)||0," prestador",((t==null?void 0:t.length)||0)!==1?"es":""," encontrado",((t==null?void 0:t.length)||0)!==1?"s":""]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(ee,{placeholder:"Buscar por nome, email ou negócio...",value:p,onChange:s=>F(s.target.value),className:"pl-10 w-full sm:w-[300px] border-gray-200 focus:border-blue-500"})]}),e.jsxs(k,{children:[e.jsx(D,{asChild:!0,children:e.jsxs(A,{variant:"outline",className:"border-gray-200 hover:bg-gray-50",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Filtrar"]})}),e.jsxs(M,{align:"end",className:"w-48",children:[e.jsxs(i,{onClick:()=>x(null),children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),"Todos os prestadores"]}),e.jsxs(i,{onClick:()=>x("active"),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Apenas ativos"]}),e.jsxs(i,{onClick:()=>x("inactive"),children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Apenas inativos"]}),e.jsxs(i,{onClick:()=>x("online"),children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Apenas online"]}),e.jsxs(i,{onClick:()=>x("offline"),children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Apenas offline"]})]})]})]})]})}),e.jsx(d,{className:"p-0",children:t&&t.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 p-6",children:t.map(s=>{var r,n,h,o,u,g,j;return e.jsx(c,{className:"border border-gray-100 hover:shadow-md transition-shadow group",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Y,{className:"h-12 w-12",children:[e.jsx(Z,{src:s.profileImage||"/uploads/profiles/default.png",alt:s.name}),e.jsx(_,{className:"bg-blue-100 text-blue-600",children:((r=s.name)==null?void 0:r.substring(0,2).toUpperCase())||"PR"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:s.name||((n=s.providerData)==null?void 0:n.businessName)||"Sem nome"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email})]})]}),e.jsxs(k,{children:[e.jsx(D,{asChild:!0,children:e.jsx(A,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(re,{className:"h-4 w-4"})})}),e.jsxs(M,{align:"end",children:[e.jsxs(i,{onClick:()=>T(s),children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Ver Detalhes"})]}),e.jsxs(i,{children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Configurações"})]}),e.jsxs(i,{children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Avaliações"})]}),s.isActive?e.jsxs(i,{className:"cursor-pointer text-red-600",onClick:()=>v(s),children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Desativar"})]}):e.jsxs(i,{className:"cursor-pointer text-green-600",onClick:()=>v(s),children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Ativar"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[((h=s.providerData)==null?void 0:h.businessName)&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(m,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("span",{className:"truncate",children:s.providerData.businessName})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(P,{className:"h-4 w-4 mr-2 text-yellow-500"}),e.jsx("span",{children:q(((o=s.providerData)==null?void 0:o.rating)||null)})]}),((u=s.providerData)==null?void 0:u.totalAppointments)!==void 0&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(ce,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsxs("span",{children:[s.providerData.totalAppointments," agendamentos"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsx(b,{variant:s.isActive?"default":"secondary",className:s.isActive?"bg-green-100 text-green-800 hover:bg-green-100 border-green-300":"bg-red-100 text-red-800 hover:bg-red-100 border-red-300",children:s.isActive?"Ativo":"Inativo"}),e.jsx(b,{variant:"outline",className:s.isVerified?"bg-blue-100 text-blue-800 hover:bg-blue-100 border-blue-300":"bg-gray-100 text-gray-800 hover:bg-gray-100 border-gray-300",children:s.isVerified?"Verificado":"Não verificado"}),e.jsx(b,{variant:"outline",className:(g=s.providerData)!=null&&g.isOnline?"bg-green-100 text-green-800 hover:bg-green-100 border-green-300":"bg-gray-100 text-gray-800 hover:bg-gray-100 border-gray-300",children:(j=s.providerData)!=null&&j.isOnline?"Online":"Offline"})]})]})},s.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"bg-gray-100 p-4 rounded-full w-fit mx-auto mb-4",children:e.jsx(m,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum prestador encontrado"}),e.jsx("p",{className:"text-gray-500",children:p||l?"Tente ajustar os filtros de busca":"Não há prestadores cadastrados no sistema"})]})})]})]})})})}export{ts as default};
