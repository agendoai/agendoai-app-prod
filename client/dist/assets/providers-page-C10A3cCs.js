import{j as e}from"./ui-UIpCtT3r.js";import{r as f}from"./vendor-vA4cx1mx.js";import{j as Q,b as R,c as G,L as K,C as c,g as m,aa as y,d as W,e as X,f as $,B as w,ab as H,q as J,i as C}from"./index-_oaftgoR.js";import{u as Y}from"./useMutation-CeSY69nI.js";import{A}from"./admin-layout-DYI33rqZ.js";import{D,a as S,b as k,e as i}from"./dropdown-menu-SXsdRjpy.js";import{B as N}from"./badge-ku74LRvb.js";import{A as Z,a as _,b as ee}from"./avatar-DJIjDcKV.js";import{I as se}from"./input-BDDyNkir.js";import{B as d}from"./building-OV1nVrv0.js";import{C as P}from"./circle-check-Bef3nmaQ.js";import{S as ae}from"./search-DOY73Z0K.js";import{F as re}from"./filter-4MeysNtF.js";import{C as te}from"./circle-x-ChapPBrp.js";import{E as ie}from"./ellipsis-DIqC63Uz.js";import{E as le}from"./eye-is0de_GS.js";import{S as ne}from"./settings-VXdXcZL4.js";import{S as O}from"./star-B25TK7kw.js";import{U as oe}from"./user-x-C3vJIL-P.js";import{U as ce}from"./user-check-DKtWjCLY.js";import{C as me}from"./calendar-DopD1FE2.js";import"./router-CxXythJb.js";import"./navbar-CvZDQ5sA.js";import"./proxy-CRvIgb3X.js";import"./calendar-check-Du1HZAvo.js";import"./user-DI_JL3j7.js";import"./log-out-BxiFzjZw.js";import"./dialog-BvsjuwHe.js";import"./menu-ClVtlElC.js";import"./bell-Ba9Vpo4G.js";import"./arrow-left-C-JViF3u.js";import"./users-FiLp6VlV.js";import"./trending-up-BQrZcmDE.js";import"./folder-tree-D72aSRhY.js";import"./credit-card-1Bzqs1Bw.js";import"./share-2-CsVgVq9Z.js";import"./circle-help-CnI1nJ1i.js";import"./book-open-DnFtcfUC.js";import"./chevron-right-B7vqsZez.js";import"./check-BMyHMEgN.js";import"./circle-C4JZ1W_T.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=Q("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);function ss(){const{toast:b}=R(),[xe,E]=f.useState(!1),[he,L]=f.useState(null),[u,F]=f.useState(""),[l,x]=f.useState(null),{data:a,isLoading:I}=G({queryKey:["/api/admin/providers"],queryFn:async()=>{try{return await(await C("GET","/api/admin/providers")).json()}catch(s){return console.error("Erro ao carregar prestadores:",s),[]}}}),T=Y({mutationFn:async({id:s,data:t})=>(await C("PUT",`/api/admin/users/${s}`,t)).json(),onSuccess:()=>{J.invalidateQueries({queryKey:["/api/admin/providers"]}),b({title:"Prestador atualizado",description:"As informações do prestador foram atualizadas com sucesso."})},onError:s=>{b({title:"Erro ao atualizar prestador",description:s.message,variant:"destructive"})}}),v=s=>{T.mutate({id:s.id,data:{isActive:!s.isActive}})},q=s=>{L(s),E(!0)},B=s=>s?`${(Math.round(s/100*5*10)/10).toFixed(1)} ★`:"Não avaliado",r=a==null?void 0:a.filter(s=>{var t,n,h;if(l&&(l==="active"&&!s.isActive||l==="inactive"&&s.isActive||l==="online"&&!((t=s.providerData)!=null&&t.isOnline)||l==="offline"&&((n=s.providerData)!=null&&n.isOnline)))return!1;if(u){const o=u.toLowerCase(),g=(s.name||"").toLowerCase(),p=s.email.toLowerCase(),j=(((h=s.providerData)==null?void 0:h.businessName)||"").toLowerCase();return g.includes(o)||p.includes(o)||j.includes(o)}return!0}),M=(a==null?void 0:a.length)||0,U=(a==null?void 0:a.filter(s=>s.isActive).length)||0,V=(a==null?void 0:a.filter(s=>{var t;return(t=s.providerData)==null?void 0:t.isOnline}).length)||0,z=(a==null?void 0:a.filter(s=>s.isVerified).length)||0;return I?e.jsx(A,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:e.jsx("div",{className:"container mx-auto py-8 px-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 h-64",children:[e.jsx(K,{className:"h-12 w-12 animate-spin text-blue-500"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Carregando prestadores..."})]})})})}):e.jsx(A,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-3 rounded-xl",children:e.jsx(d,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gerenciamento de Prestadores"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Gerencie todos os prestadores de serviço da plataforma"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(c,{className:"border-0 shadow-lg bg-gradient-to-br from-blue-50 to-blue-100",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Total de Prestadores"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:M})]}),e.jsx("div",{className:"bg-blue-500 p-3 rounded-full",children:e.jsx(d,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(c,{className:"border-0 shadow-lg bg-gradient-to-br from-green-50 to-green-100",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Prestadores Ativos"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:U})]}),e.jsx("div",{className:"bg-green-500 p-3 rounded-full",children:e.jsx(P,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(c,{className:"border-0 shadow-lg bg-gradient-to-br from-purple-50 to-purple-100",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Online Agora"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:V})]}),e.jsx("div",{className:"bg-purple-500 p-3 rounded-full",children:e.jsx(y,{className:"h-6 w-6 text-white"})})]})})}),e.jsx(c,{className:"border-0 shadow-lg bg-gradient-to-br from-orange-50 to-orange-100",children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Verificados"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:z})]}),e.jsx("div",{className:"bg-orange-500 p-3 rounded-full",children:e.jsx(de,{className:"h-6 w-6 text-white"})})]})})})]})]}),e.jsxs(c,{className:"border-0 shadow-lg mb-6",children:[e.jsx(W,{className:"bg-gradient-to-r from-gray-50 to-blue-50 border-b",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs(X,{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(d,{className:"h-5 w-5 mr-2 text-blue-600"}),"Lista de Prestadores"]}),e.jsxs($,{className:"text-gray-600",children:[(r==null?void 0:r.length)||0," prestador",((r==null?void 0:r.length)||0)!==1?"es":""," encontrado",((r==null?void 0:r.length)||0)!==1?"s":""]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(se,{placeholder:"Buscar por nome, email ou negócio...",value:u,onChange:s=>F(s.target.value),className:"pl-10 w-full sm:w-[300px] border-gray-200 focus:border-blue-500"})]}),e.jsxs(D,{children:[e.jsx(S,{asChild:!0,children:e.jsxs(w,{variant:"outline",className:"border-gray-200 hover:bg-gray-50",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Filtrar"]})}),e.jsxs(k,{align:"end",className:"w-48",children:[e.jsxs(i,{onClick:()=>x(null),children:[e.jsx(d,{className:"mr-2 h-4 w-4"}),"Todos os prestadores"]}),e.jsxs(i,{onClick:()=>x("active"),children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Apenas ativos"]}),e.jsxs(i,{onClick:()=>x("inactive"),children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Apenas inativos"]}),e.jsxs(i,{onClick:()=>x("online"),children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Apenas online"]}),e.jsxs(i,{onClick:()=>x("offline"),children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Apenas offline"]})]})]})]})]})}),e.jsx(m,{className:"p-0",children:r&&r.length>0?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 p-6",children:r.map(s=>{var t,n,h,o,g,p,j;return e.jsx(c,{className:"border border-gray-100 hover:shadow-md transition-shadow group",children:e.jsxs(m,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Z,{className:"h-12 w-12",children:[e.jsx(_,{src:s.profileImage||"/uploads/profiles/default.png",alt:s.name}),e.jsx(ee,{className:"bg-blue-100 text-blue-600",children:((t=s.name)==null?void 0:t.substring(0,2).toUpperCase())||"PR"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:s.name||((n=s.providerData)==null?void 0:n.businessName)||"Sem nome"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email})]})]}),e.jsxs(D,{children:[e.jsx(S,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ie,{className:"h-4 w-4"})})}),e.jsxs(k,{align:"end",children:[e.jsxs(i,{onClick:()=>q(s),children:[e.jsx(le,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Ver Detalhes"})]}),e.jsxs(i,{children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Configurações"})]}),e.jsxs(i,{children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Avaliações"})]}),s.isActive?e.jsxs(i,{className:"cursor-pointer text-red-600",onClick:()=>v(s),children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Desativar"})]}):e.jsxs(i,{className:"cursor-pointer text-green-600",onClick:()=>v(s),children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Ativar"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[((h=s.providerData)==null?void 0:h.businessName)&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(d,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx("span",{className:"truncate",children:s.providerData.businessName})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(O,{className:"h-4 w-4 mr-2 text-yellow-500"}),e.jsx("span",{children:B(((o=s.providerData)==null?void 0:o.rating)||null)})]}),((g=s.providerData)==null?void 0:g.totalAppointments)!==void 0&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(me,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsxs("span",{children:[s.providerData.totalAppointments," agendamentos"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsx(N,{variant:s.isActive?"default":"secondary",className:s.isActive?"bg-green-100 text-green-800 hover:bg-green-100 border-green-300":"bg-red-100 text-red-800 hover:bg-red-100 border-red-300",children:s.isActive?"Ativo":"Inativo"}),e.jsx(N,{variant:"outline",className:s.isVerified?"bg-blue-100 text-blue-800 hover:bg-blue-100 border-blue-300":"bg-gray-100 text-gray-800 hover:bg-gray-100 border-gray-300",children:s.isVerified?"Verificado":"Não verificado"}),e.jsx(N,{variant:"outline",className:(p=s.providerData)!=null&&p.isOnline?"bg-green-100 text-green-800 hover:bg-green-100 border-green-300":"bg-gray-100 text-gray-800 hover:bg-gray-100 border-gray-300",children:(j=s.providerData)!=null&&j.isOnline?"Online":"Offline"})]})]})},s.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"bg-gray-100 p-4 rounded-full w-fit mx-auto mb-4",children:e.jsx(d,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum prestador encontrado"}),e.jsx("p",{className:"text-gray-500",children:u||l?"Tente ajustar os filtros de busca":"Não há prestadores cadastrados no sistema"})]})})]})]})})})}export{ss as default};
