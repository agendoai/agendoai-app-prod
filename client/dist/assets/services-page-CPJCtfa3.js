import{c as D,a as L,r as u,u as P,b as z,d as M,j as e,C as o,i as l}from"./index-DOe1OCu1.js";import{u as B}from"./useMutation-Lmj9MX3Y.js";import{B as g}from"./button-C168b4m4.js";import{B as F}from"./badge-Bzn9UYFT.js";import{T as R,a as $,b as I,c as q,d as n,e as Q,f as c}from"./table-CpYERuu-.js";import{D as U,a as H,b as K,c as V,d as C,e as f}from"./dropdown-menu-BOCN3PER.js";import{T as G,a as O,b as _,c as J}from"./tooltip-T3Ih4mz3.js";import{N as W,C as X}from"./navbar-DlESdVVP.js";import{m as h}from"./proxy-Ct5X7xz4.js";import{A as Y}from"./arrow-left-BPt4aJQo.js";import{P as Z}from"./plus-DCNyMku-.js";import{S as T}from"./scissors-BLALsYWu.js";import{A as ee}from"./activity-XrmxzlUx.js";import{U as se}from"./users-CKUz_ceh.js";import{T as re}from"./trending-up-CWfbCM5F.js";import{D as ae}from"./dollar-sign-D5ikk9cU.js";import{C as te}from"./clock-CVsS3BCD.js";import{E as ie}from"./ellipsis-CxOF25iL.js";import{E as oe}from"./eye-BystvZt4.js";import{P as le}from"./pencil-8MXIxfby.js";import{T as ne}from"./trash-2-Bi3jo0Dj.js";import{H as ce}from"./house-Calz6FJi.js";import{C as de}from"./calendar-check-CY2XiYKN.js";import{S as me}from"./search-Bjz8DxPP.js";import{U as xe}from"./user-BQOYdOBU.js";import"./index-DdZceiuF.js";import"./index-CtQ14QdP.js";import"./index-C933frGi.js";import"./index-tIxYtZzE.js";import"./index-DbsNQ1RS.js";import"./index-CQF81cx3.js";import"./chevron-right-D4BSFwhT.js";import"./check-C4wNsCXx.js";import"./circle-DjQT6JQX.js";function Ye(){const{toast:v}=D(),[he,d]=L(),[p,pe]=u.useState("all"),[m,je]=u.useState(""),[ue,ge]=u.useState(!1),{user:r}=P(),S=z(),A=B({mutationFn:async s=>{const a=await fetch(`/api/provider-services/${s}`,{method:"DELETE"});if(!a.ok){const j=await a.json();throw new Error(j.error||"Falha ao excluir o serviço")}return!0},onSuccess:()=>{S.invalidateQueries({queryKey:[`/api/provider-services/provider/${r==null?void 0:r.id}`]}),v({title:"Serviço excluído",description:"O serviço foi excluído com sucesso"})},onError:s=>{v({title:"Erro",description:s.message,variant:"destructive"})}}),{data:t=[],isLoading:E}=M({queryKey:[`/api/provider-services/provider/${r==null?void 0:r.id}`],queryFn:async()=>{try{const s=await fetch(`/api/provider-services/provider/${r==null?void 0:r.id}`);if(!s.ok)throw new Error("Failed to fetch services");return await s.json()}catch(s){return console.error("Error fetching services:",s),[]}}}),i=t.filter(s=>{var b,y,w;const a=m===""||((b=s.name)==null?void 0:b.toLowerCase().includes(m.toLowerCase()))||((y=s.serviceName)==null?void 0:y.toLowerCase().includes(m.toLowerCase()))||((w=s.description)==null?void 0:w.toLowerCase().includes(m.toLowerCase())),j=p==="all"||p==="active"&&s.isActive||p==="inactive"&&!s.isActive;return a&&j}),k=()=>{d("/provider/add-service")},N=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s/100),x={total:t.length,active:t.filter(s=>s.isActive).length,inactive:t.filter(s=>!s.isActive).length,totalRevenue:t.reduce((s,a)=>s+(a.price||0),0)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"container mx-auto py-6 px-4 max-w-4xl",children:[e.jsxs(h.div,{className:"mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs(g,{variant:"ghost",size:"sm",onClick:()=>d("/provider/dashboard"),className:"hover:bg-gray-100 transition-colors",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Voltar"]}),e.jsx("div",{className:"h-6 w-px bg-gray-300"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Meus Serviços"})]}),e.jsx("p",{className:"text-gray-600 text-sm max-w-2xl",children:"Gerencie todos os serviços que você oferece aos seus clientes."})]}),e.jsx(h.div,{className:"mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:e.jsxs(g,{onClick:k,className:"w-full sm:w-auto bg-[#58c9d1] hover:bg-[#4bb8c0] text-white font-semibold py-3 px-6 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",size:"lg",children:[e.jsx(Z,{className:"h-5 w-5 mr-2"}),"Adicionar Serviço"]})}),e.jsxs(h.div,{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:[e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsxs(l,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#58c9d1]/10 flex items-center justify-center",children:e.jsx(T,{className:"h-4 w-4 text-[#58c9d1]"})})}),e.jsx("p",{className:"text-gray-500 text-xs font-medium mb-1",children:"Total"}),e.jsx("p",{className:"text-gray-900 text-lg font-bold",children:x.total})]})}),e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsxs(l,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx(ee,{className:"h-4 w-4 text-green-600"})})}),e.jsx("p",{className:"text-gray-500 text-xs font-medium mb-1",children:"Ativos"}),e.jsx("p",{className:"text-gray-900 text-lg font-bold",children:x.active})]})}),e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsxs(l,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center",children:e.jsx(se,{className:"h-4 w-4 text-orange-600"})})}),e.jsx("p",{className:"text-gray-500 text-xs font-medium mb-1",children:"Inativos"}),e.jsx("p",{className:"text-gray-900 text-lg font-bold",children:x.inactive})]})}),e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsxs(l,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsx(re,{className:"h-4 w-4 text-purple-600"})})}),e.jsx("p",{className:"text-gray-500 text-xs font-medium mb-1",children:"Receita"}),e.jsx("p",{className:"text-gray-900 text-lg font-bold",children:N(x.totalRevenue)})]})})]}),e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsx(l,{className:"p-0",children:E?e.jsx("div",{className:"p-6 text-center text-gray-400",children:"Carregando serviços..."}):i.length===0?e.jsx("div",{className:"p-6 text-center text-gray-400",children:"Nenhum serviço encontrado."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(R,{children:[e.jsxs($,{className:"text-gray-500 font-medium",children:[i.length," serviço",i.length!==1?"s":""," encontrado",i.length!==1?"s":""]}),e.jsx(I,{children:e.jsxs(q,{className:"border-gray-200",children:[e.jsx(n,{className:"font-semibold text-gray-900",children:"Serviço"}),e.jsx(n,{className:"font-semibold text-gray-900",children:"Preço"}),e.jsx(n,{className:"font-semibold text-gray-900",children:"Duração"}),e.jsx(n,{className:"font-semibold text-gray-900",children:"Status"}),e.jsx(n,{className:"text-right font-semibold text-gray-900",children:"Ações"})]})}),e.jsx(Q,{children:i.map((s,a)=>e.jsxs(h.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:a*.1},className:"border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx(c,{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#58c9d1]/10 flex items-center justify-center",children:e.jsx(T,{className:"h-5 w-5 text-[#58c9d1]"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.name||s.serviceName}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-[200px]",children:s.description||"Sem descrição"})]})]})}),e.jsx(c,{className:"py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ae,{className:"h-4 w-4 mr-2 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-600",children:N(s.price??s.defaultPrice??0)})]})}),e.jsx(c,{className:"py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx(G,{children:e.jsxs(O,{children:[e.jsx(_,{asChild:!0,children:e.jsxs("span",{className:"font-medium",children:[s.duration||30," min"]})}),e.jsx(J,{children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["Execução: ",s.executionTime||25," min"]}),(s.breakTime||5)>0&&e.jsxs("div",{children:["Intervalo: ",s.breakTime||5," min"]})]})})]})})]})}),e.jsx(c,{className:"py-4",children:e.jsx(F,{variant:s.isActive?"default":"secondary",className:`${s.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s.isActive?"Ativo":"Inativo"})}),e.jsx(c,{className:"text-right py-4",children:e.jsxs(U,{children:[e.jsx(H,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ie,{className:"h-4 w-4"})})}),e.jsxs(K,{align:"end",className:"w-48 bg-white shadow-lg border border-gray-200",children:[e.jsx(V,{className:"font-semibold",children:"Ações do Serviço"}),e.jsx(C,{}),e.jsxs(f,{className:"cursor-pointer",onClick:()=>d(`/provider/view-service/${s.id}`),children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Visualizar"]}),e.jsxs(f,{className:"cursor-pointer",onClick:()=>d(`/provider/edit-service/${s.id}`),children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Editar"]}),e.jsx(C,{}),e.jsxs(f,{className:"cursor-pointer text-red-600 font-semibold",onClick:()=>A.mutate(s.id),children:[e.jsx(ne,{className:"h-4 w-4 mr-2 text-red-500"}),"Excluir"]})]})]})})]},s.id))})]})})})})]}),e.jsx(W,{items:[{icon:e.jsx(ce,{size:26}),label:"Início",href:"/provider/dashboard"},{icon:e.jsx(de,{size:26}),label:"Agenda",href:"/provider/schedule"},{icon:e.jsx(X,{size:32,className:"animate-pulse"}),label:"Novo",href:"/provider/manual-booking"},{icon:e.jsx(me,{size:26}),label:"Buscar",href:"/provider/search"},{icon:e.jsx(xe,{size:26}),label:"Perfil",href:"/provider/profile"}]})]})}export{Ye as default};
