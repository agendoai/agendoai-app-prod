import{j as e}from"./ui-UIpCtT3r.js";import{r as u}from"./vendor-vA4cx1mx.js";import{b as L,u as P,a as z,c as M,C as o,g as l,n as C}from"./index-DEm1NP11.js";import{u as B}from"./useMutation-CZu5JiEY.js";import{B as g}from"./button-j6LGAhsQ.js";import{B as F}from"./badge-B2JTkC27.js";import{u as R}from"./router-CxXythJb.js";import{T as $,a as I,b as q,c as Q,d as n,e as U,f as c}from"./table-CR3e3Pz3.js";import{D as H,a as K,b as V,c as G,d as T,e as f}from"./dropdown-menu-Ctl7CAWq.js";import{T as O,a as _,b as J,c as W}from"./tooltip-65jWKs6O.js";import{N as X,C as Y}from"./navbar-hjdp4XdK.js";import{m as h}from"./proxy-B8DL77xD.js";import{A as Z}from"./arrow-left-BNqHqGt7.js";import{P as ee}from"./plus-DxJwgG-n.js";import{S}from"./scissors-ioZHRjAf.js";import{A as se}from"./activity-Dpt3nJWF.js";import{U as re}from"./users-3MvLCU5y.js";import{T as ae}from"./trending-up-CmjJoqLV.js";import{D as te}from"./dollar-sign-BCiirwCz.js";import{C as ie}from"./clock-CLU1zMjH.js";import{E as oe}from"./ellipsis-DziSAefq.js";import{E as le}from"./eye-Cjb4jngA.js";import{P as ne}from"./pencil-C19kw0Sa.js";import{T as ce}from"./trash-2-DEdfKrkg.js";import{H as de}from"./house-CfLQCnfM.js";import{C as me}from"./calendar-check-6xqeojHy.js";import{S as xe}from"./search-C7LrDLVs.js";import{U as he}from"./user-DI19obd1.js";import"./chevron-right-C68Zab6b.js";import"./check-BuvXqBRH.js";import"./circle-D47_QxzJ.js";function We(){const{toast:v}=L(),[pe,d]=R(),[p,je]=u.useState("all"),[m,ue]=u.useState(""),[ge,fe]=u.useState(!1),{user:r}=P(),A=z(),E=B({mutationFn:async s=>{const a=await C(`/provider-services/${s}`,{method:"DELETE"});if(!a.ok){const j=await a.json();throw new Error(j.error||"Falha ao excluir o serviço")}return!0},onSuccess:()=>{A.invalidateQueries({queryKey:[`/api/provider-services/provider/${r==null?void 0:r.id}`]}),v({title:"Serviço excluído",description:"O serviço foi excluído com sucesso"})},onError:s=>{v({title:"Erro",description:s.message,variant:"destructive"})}}),{data:t=[],isLoading:k}=M({queryKey:[`/api/provider-services/provider/${r==null?void 0:r.id}`],queryFn:async()=>{try{const s=await C(`/provider-services/provider/${r==null?void 0:r.id}`);if(!s.ok)throw new Error("Failed to fetch services");return await s.json()}catch(s){return console.error("Error fetching services:",s),[]}}}),i=t.filter(s=>{var b,y,w;const a=m===""||((b=s.name)==null?void 0:b.toLowerCase().includes(m.toLowerCase()))||((y=s.serviceName)==null?void 0:y.toLowerCase().includes(m.toLowerCase()))||((w=s.description)==null?void 0:w.toLowerCase().includes(m.toLowerCase())),j=p==="all"||p==="active"&&s.isActive||p==="inactive"&&!s.isActive;return a&&j}),D=()=>{d("/provider/add-service")},N=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s/100),x={total:t.length,active:t.filter(s=>s.isActive).length,inactive:t.filter(s=>!s.isActive).length,totalRevenue:t.reduce((s,a)=>s+(a.price||0),0)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"container mx-auto py-6 px-4 max-w-4xl",children:[e.jsxs(h.div,{className:"mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs(g,{variant:"ghost",size:"sm",onClick:()=>d("/provider/dashboard"),className:"hover:bg-gray-100 transition-colors",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Voltar"]}),e.jsx("div",{className:"h-6 w-px bg-gray-300"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Meus Serviços"})]}),e.jsx("p",{className:"text-gray-600 text-sm max-w-2xl",children:"Gerencie todos os serviços que você oferece aos seus clientes."})]}),e.jsx(h.div,{className:"mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:e.jsxs(g,{onClick:D,className:"w-full sm:w-auto bg-[#58c9d1] hover:bg-[#4bb8c0] text-white font-semibold py-3 px-6 rounded-lg shadow-sm transition-all duration-200 hover:shadow-md",size:"lg",children:[e.jsx(ee,{className:"h-5 w-5 mr-2"}),"Adicionar Serviço"]})}),e.jsxs(h.div,{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:[e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsxs(l,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#58c9d1]/10 flex items-center justify-center",children:e.jsx(S,{className:"h-4 w-4 text-[#58c9d1]"})})}),e.jsx("p",{className:"text-gray-500 text-xs font-medium mb-1",children:"Total"}),e.jsx("p",{className:"text-gray-900 text-lg font-bold",children:x.total})]})}),e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsxs(l,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx(se,{className:"h-4 w-4 text-green-600"})})}),e.jsx("p",{className:"text-gray-500 text-xs font-medium mb-1",children:"Ativos"}),e.jsx("p",{className:"text-gray-900 text-lg font-bold",children:x.active})]})}),e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsxs(l,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center",children:e.jsx(re,{className:"h-4 w-4 text-orange-600"})})}),e.jsx("p",{className:"text-gray-500 text-xs font-medium mb-1",children:"Inativos"}),e.jsx("p",{className:"text-gray-900 text-lg font-bold",children:x.inactive})]})}),e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsxs(l,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsx(ae,{className:"h-4 w-4 text-purple-600"})})}),e.jsx("p",{className:"text-gray-500 text-xs font-medium mb-1",children:"Receita"}),e.jsx("p",{className:"text-gray-900 text-lg font-bold",children:N(x.totalRevenue)})]})})]}),e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsx(l,{className:"p-0",children:k?e.jsx("div",{className:"p-6 text-center text-gray-400",children:"Carregando serviços..."}):i.length===0?e.jsx("div",{className:"p-6 text-center text-gray-400",children:"Nenhum serviço encontrado."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs($,{children:[e.jsxs(I,{className:"text-gray-500 font-medium",children:[i.length," serviço",i.length!==1?"s":""," encontrado",i.length!==1?"s":""]}),e.jsx(q,{children:e.jsxs(Q,{className:"border-gray-200",children:[e.jsx(n,{className:"font-semibold text-gray-900",children:"Serviço"}),e.jsx(n,{className:"font-semibold text-gray-900",children:"Preço"}),e.jsx(n,{className:"font-semibold text-gray-900",children:"Duração"}),e.jsx(n,{className:"font-semibold text-gray-900",children:"Status"}),e.jsx(n,{className:"text-right font-semibold text-gray-900",children:"Ações"})]})}),e.jsx(U,{children:i.map((s,a)=>e.jsxs(h.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:a*.1},className:"border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx(c,{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#58c9d1]/10 flex items-center justify-center",children:e.jsx(S,{className:"h-5 w-5 text-[#58c9d1]"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.name||s.serviceName}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-[200px]",children:s.description||"Sem descrição"})]})]})}),e.jsx(c,{className:"py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-2 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-600",children:N(s.price??s.defaultPrice??0)})]})}),e.jsx(c,{className:"py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ie,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx(O,{children:e.jsxs(_,{children:[e.jsx(J,{asChild:!0,children:e.jsxs("span",{className:"font-medium",children:[s.duration||30," min"]})}),e.jsx(W,{children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["Execução: ",s.executionTime||25," min"]}),(s.breakTime||5)>0&&e.jsxs("div",{children:["Intervalo: ",s.breakTime||5," min"]})]})})]})})]})}),e.jsx(c,{className:"py-4",children:e.jsx(F,{variant:s.isActive?"default":"secondary",className:`${s.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s.isActive?"Ativo":"Inativo"})}),e.jsx(c,{className:"text-right py-4",children:e.jsxs(H,{children:[e.jsx(K,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(oe,{className:"h-4 w-4"})})}),e.jsxs(V,{align:"end",className:"w-48 bg-white shadow-lg border border-gray-200",children:[e.jsx(G,{className:"font-semibold",children:"Ações do Serviço"}),e.jsx(T,{}),e.jsxs(f,{className:"cursor-pointer",onClick:()=>d(`/provider/view-service/${s.id}`),children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Visualizar"]}),e.jsxs(f,{className:"cursor-pointer",onClick:()=>d(`/provider/edit-service/${s.id}`),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Editar"]}),e.jsx(T,{}),e.jsxs(f,{className:"cursor-pointer text-red-600 font-semibold",onClick:()=>E.mutate(s.id),children:[e.jsx(ce,{className:"h-4 w-4 mr-2 text-red-500"}),"Excluir"]})]})]})})]},s.id))})]})})})})]}),e.jsx(X,{items:[{icon:e.jsx(de,{size:26}),label:"Início",href:"/provider/dashboard"},{icon:e.jsx(me,{size:26}),label:"Agenda",href:"/provider/schedule"},{icon:e.jsx(Y,{size:32,className:"animate-pulse"}),label:"Novo",href:"/provider/manual-booking"},{icon:e.jsx(xe,{size:26}),label:"Buscar",href:"/provider/search"},{icon:e.jsx(he,{size:26}),label:"Perfil",href:"/provider/profile"}]})]})}export{We as default};
