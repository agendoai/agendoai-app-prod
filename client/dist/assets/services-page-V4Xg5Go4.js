import{c as D,a as L,r as j,u as k,b as M,d as P,j as e,C as o,i as c}from"./index-DFO2lo2s.js";import{u as z}from"./useMutation-BIXw1p8a.js";import{B as w}from"./button-6IH7luFD.js";import{B}from"./badge-DWGHGqHr.js";import{T as F,a as R,b as $,c as I,d as l,e as q,f as n}from"./table-B8FpWq2u.js";import{D as Q,a as U,b as H,c as K,d as C,e as u}from"./dropdown-menu-ap6SW7g-.js";import{T as V,a as G,b as O,c as _}from"./tooltip-BCOswfBn.js";import{N as J,C as W}from"./navbar-BoNMuwo_.js";import{m as g}from"./proxy-BltBotVH.js";import{A as X}from"./arrow-left-DxjewkX7.js";import{S as T}from"./scissors-eiDpte-K.js";import{A as Y}from"./activity-MW-hR9Ra.js";import{U as Z}from"./users-BzOlSFYN.js";import{T as ee}from"./trending-up-DBa8ujnj.js";import{D as se}from"./dollar-sign-BIBdVfnw.js";import{C as re}from"./clock-BQ1l0DXv.js";import{E as ae}from"./ellipsis-IFMLCg7A.js";import{E as te}from"./eye-CcbN9PIV.js";import{P as ie}from"./pencil-Bzp10w51.js";import{T as oe}from"./trash-2-7t4qwQZj.js";import{H as ce}from"./house-sGd4nDnu.js";import{C as le}from"./calendar-check-CDRCjfO9.js";import{S as ne}from"./search-CMPUhstB.js";import{U as de}from"./user-WwS7npix.js";import"./index-BZw1vT_C.js";import"./index-BEl4sio8.js";import"./index-r8gFfIDH.js";import"./index-heHCkeO_.js";import"./index-CWnO1h2h.js";import"./index-zokK3oQV.js";import"./chevron-right-BpYdX1P5.js";import"./check-C4mt73Rm.js";import"./circle-AYNPgkgN.js";function Je(){const{toast:f}=D(),[me,x]=L(),[h,xe]=j.useState("all"),[d,he]=j.useState(""),[pe,je]=j.useState(!1),{user:r}=k(),S=M(),A=z({mutationFn:async s=>{const a=await fetch(`/api/provider-services/${s}`,{method:"DELETE"});if(!a.ok){const p=await a.json();throw new Error(p.error||"Falha ao excluir o serviço")}return!0},onSuccess:()=>{S.invalidateQueries({queryKey:[`/api/provider-services/provider/${r==null?void 0:r.id}`]}),f({title:"Serviço excluído",description:"O serviço foi excluído com sucesso"})},onError:s=>{f({title:"Erro",description:s.message,variant:"destructive"})}}),{data:t=[],isLoading:E}=P({queryKey:[`/api/provider-services/provider/${r==null?void 0:r.id}`],queryFn:async()=>{try{const s=await fetch(`/api/provider-services/provider/${r==null?void 0:r.id}`);if(!s.ok)throw new Error("Failed to fetch services");return await s.json()}catch(s){return console.error("Error fetching services:",s),[]}}}),i=t.filter(s=>{var N,b,y;const a=d===""||((N=s.name)==null?void 0:N.toLowerCase().includes(d.toLowerCase()))||((b=s.serviceName)==null?void 0:b.toLowerCase().includes(d.toLowerCase()))||((y=s.description)==null?void 0:y.toLowerCase().includes(d.toLowerCase())),p=h==="all"||h==="active"&&s.isActive||h==="inactive"&&!s.isActive;return a&&p}),v=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s/100),m={total:t.length,active:t.filter(s=>s.isActive).length,inactive:t.filter(s=>!s.isActive).length,totalRevenue:t.reduce((s,a)=>s+(a.price||0),0)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsxs("div",{className:"container mx-auto py-6 px-4 max-w-4xl",children:[e.jsxs(g.div,{className:"mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs(w,{variant:"ghost",size:"sm",onClick:()=>x("/provider/dashboard"),className:"hover:bg-gray-100 transition-colors",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Voltar"]}),e.jsx("div",{className:"h-6 w-px bg-gray-300"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Meus Serviços"})]}),e.jsx("p",{className:"text-gray-600 text-sm max-w-2xl",children:"Gerencie todos os serviços que você oferece aos seus clientes."})]}),e.jsxs(g.div,{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:[e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsxs(c,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[#58c9d1]/10 flex items-center justify-center",children:e.jsx(T,{className:"h-4 w-4 text-[#58c9d1]"})})}),e.jsx("p",{className:"text-gray-500 text-xs font-medium mb-1",children:"Total"}),e.jsx("p",{className:"text-gray-900 text-lg font-bold",children:m.total})]})}),e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsxs(c,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx(Y,{className:"h-4 w-4 text-green-600"})})}),e.jsx("p",{className:"text-gray-500 text-xs font-medium mb-1",children:"Ativos"}),e.jsx("p",{className:"text-gray-900 text-lg font-bold",children:m.active})]})}),e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsxs(c,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center",children:e.jsx(Z,{className:"h-4 w-4 text-orange-600"})})}),e.jsx("p",{className:"text-gray-500 text-xs font-medium mb-1",children:"Inativos"}),e.jsx("p",{className:"text-gray-900 text-lg font-bold",children:m.inactive})]})}),e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsxs(c,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsx(ee,{className:"h-4 w-4 text-purple-600"})})}),e.jsx("p",{className:"text-gray-500 text-xs font-medium mb-1",children:"Receita"}),e.jsx("p",{className:"text-gray-900 text-lg font-bold",children:v(m.totalRevenue)})]})})]}),e.jsx(o,{className:"border-0 shadow-sm bg-white",children:e.jsx(c,{className:"p-0",children:E?e.jsx("div",{className:"p-6 text-center text-gray-400",children:"Carregando serviços..."}):i.length===0?e.jsx("div",{className:"p-6 text-center text-gray-400",children:"Nenhum serviço encontrado."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(F,{children:[e.jsxs(R,{className:"text-gray-500 font-medium",children:[i.length," serviço",i.length!==1?"s":""," encontrado",i.length!==1?"s":""]}),e.jsx($,{children:e.jsxs(I,{className:"border-gray-200",children:[e.jsx(l,{className:"font-semibold text-gray-900",children:"Serviço"}),e.jsx(l,{className:"font-semibold text-gray-900",children:"Preço"}),e.jsx(l,{className:"font-semibold text-gray-900",children:"Duração"}),e.jsx(l,{className:"font-semibold text-gray-900",children:"Status"}),e.jsx(l,{className:"text-right font-semibold text-gray-900",children:"Ações"})]})}),e.jsx(q,{children:i.map((s,a)=>e.jsxs(g.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:a*.1},className:"border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsx(n,{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#58c9d1]/10 flex items-center justify-center",children:e.jsx(T,{className:"h-5 w-5 text-[#58c9d1]"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.name||s.serviceName}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-[200px]",children:s.description||"Sem descrição"})]})]})}),e.jsx(n,{className:"py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"h-4 w-4 mr-2 text-green-600"}),e.jsx("span",{className:"font-semibold text-green-600",children:v(s.price??s.defaultPrice??0)})]})}),e.jsx(n,{className:"py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsx(V,{children:e.jsxs(G,{children:[e.jsx(O,{asChild:!0,children:e.jsxs("span",{className:"font-medium",children:[s.duration||30," min"]})}),e.jsx(_,{children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:["Execução: ",s.executionTime||25," min"]}),(s.breakTime||5)>0&&e.jsxs("div",{children:["Intervalo: ",s.breakTime||5," min"]})]})})]})})]})}),e.jsx(n,{className:"py-4",children:e.jsx(B,{variant:s.isActive?"default":"secondary",className:`${s.isActive?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s.isActive?"Ativo":"Inativo"})}),e.jsx(n,{className:"text-right py-4",children:e.jsxs(Q,{children:[e.jsx(U,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ae,{className:"h-4 w-4"})})}),e.jsxs(H,{align:"end",className:"w-48 bg-white shadow-lg border border-gray-200",children:[e.jsx(K,{className:"font-semibold",children:"Ações do Serviço"}),e.jsx(C,{}),e.jsxs(u,{className:"cursor-pointer",onClick:()=>x(`/provider/view-service/${s.id}`),children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Visualizar"]}),e.jsxs(u,{className:"cursor-pointer",onClick:()=>x(`/provider/edit-service/${s.id}`),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Editar"]}),e.jsx(C,{}),e.jsxs(u,{className:"cursor-pointer text-red-600 font-semibold",onClick:()=>A.mutate(s.id),children:[e.jsx(oe,{className:"h-4 w-4 mr-2 text-red-500"}),"Excluir"]})]})]})})]},s.id))})]})})})})]}),e.jsx(J,{items:[{icon:e.jsx(ce,{size:26}),label:"Início",href:"/provider/dashboard"},{icon:e.jsx(le,{size:26}),label:"Agenda",href:"/provider/schedule"},{icon:e.jsx(W,{size:32,className:"animate-pulse"}),label:"Novo",href:"/provider/manual-booking"},{icon:e.jsx(ne,{size:26}),label:"Buscar",href:"/provider/search"},{icon:e.jsx(de,{size:26}),label:"Perfil",href:"/provider/profile"}]})]})}export{Je as default};
