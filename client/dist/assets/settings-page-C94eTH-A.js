import{j as e}from"./ui-UIpCtT3r.js";import{r as a}from"./vendor-vA4cx1mx.js";import{u as Ie,b as He,c as ve,L as d,B as m,C as p,d as u,e as j,f,g,h as v,q as Ce,i as Ne}from"./index-DyNThJGx.js";import{u as we}from"./useMutation-upcUYYIZ.js";import{S as ze}from"./switch-BQ2MZxmv.js";import{L as r}from"./label-BRQ1ms59.js";import{I as n}from"./input-Cpt0D0t5.js";import{T as ye}from"./textarea-CqwWVFXe.js";import{C as l}from"./checkbox-CYLOwepX.js";import{T as De,a as We,b as C,c as N}from"./tabs-DxyIPEUL.js";import{u as Ke}from"./router-CxXythJb.js";import{A as Re}from"./arrow-left-DD0ygwFe.js";import{C as h}from"./check-l4wqyeDa.js";import{G as Qe,I as Ve,F as Ge}from"./instagram-BUGNBBmq.js";import{C as Pe}from"./credit-card-BAr81XRd.js";import{B as Se}from"./banknote-BCE19pat.js";import{C as Ue}from"./clock-Cy7Y6FGJ.js";import"./index-BH3L9zMK.js";function hs(){const{user:o}=Ie(),{toast:x}=He(),[,be]=Ke(),[ke,Fe]=a.useState("business"),[S,b]=a.useState(""),[k,F]=a.useState(""),[E,A]=a.useState(""),[M,T]=a.useState(""),[L,q]=a.useState(""),[B,O]=a.useState(""),[I,H]=a.useState(""),[z,D]=a.useState(""),[W,K]=a.useState(""),[R,Q]=a.useState(""),[V,G]=a.useState(""),[U,X]=a.useState(""),[_,$]=a.useState(""),[J,Y]=a.useState(""),[w,Z]=a.useState(!0),[ee,se]=a.useState(!0),[ae,re]=a.useState(!0),[te,ie]=a.useState(!1),[ne,ce]=a.useState(!0),[le,oe]=a.useState(!1),[de,me]=a.useState(!1),[he,xe]=a.useState(!1),[pe,ue]=a.useState(!1),[je,fe]=a.useState(!1),[y,ge]=a.useState(!0),{data:i,isLoading:Ee}=ve({queryKey:["/api/provider-settings"]}),{data:t,isLoading:Ae}=ve({queryKey:["/api/provider/payment-preferences"]});a.useEffect(()=>{i&&(b(i.businessName||""),F(i.description||""),A(i.specialties||""),T(i.businessHours||""),q(i.address||""),O(i.city||""),H(i.state||""),D(i.postalCode||""),K(i.phone||""),Q(i.whatsapp||""),G(i.email||(o==null?void 0:o.email)||""),X(i.website||""),$(i.instagram||""),Y(i.facebook||""),ge(i.isOnline!==void 0?i.isOnline:!1))},[i,o==null?void 0:o.email]),a.useEffect(()=>{t&&(Z(t.acceptsCreditCard||t.acceptsDebitCard),se(t.acceptsPix!==void 0?t.acceptsPix:!0),re(t.acceptsCash!==void 0?t.acceptsCash:!0),ie(t.acceptsTransfer!==void 0?t.acceptsTransfer:!1),ce(t.preferStripe!==void 0?t.preferStripe:!0),oe(t.preferAsaas!==void 0?t.preferAsaas:!1),me(t.preferManual!==void 0?t.preferManual:!1),xe(t.autoConfirm!==void 0?t.autoConfirm:!1),ue(t.requestPrePayment!==void 0?t.requestPrePayment:!1),fe(t.allowPartialPayment!==void 0?t.allowPartialPayment:!1))},[t]);const c=we({mutationFn:async s=>await(await Ne("PUT","/api/provider-settings",s)).json(),onSuccess:()=>{Ce.invalidateQueries({queryKey:["/api/provider-settings"]}),x({title:"Configurações atualizadas",description:"Suas configurações foram atualizadas com sucesso."})},onError:s=>{x({title:"Erro ao atualizar configurações",description:s.message||"Ocorreu um erro ao atualizar suas configurações.",variant:"destructive"})}}),P=we({mutationFn:async s=>await(await Ne("PUT","/api/provider/payment-preferences",s)).json(),onSuccess:()=>{Ce.invalidateQueries({queryKey:["/api/provider/payment-preferences"]}),x({title:"Preferências de pagamento atualizadas",description:"Suas preferências de pagamento foram atualizadas com sucesso."})},onError:s=>{x({title:"Erro ao atualizar preferências de pagamento",description:s.message||"Ocorreu um erro ao atualizar suas preferências de pagamento.",variant:"destructive"})}}),Me=()=>{c.mutate({businessName:S,description:k,specialties:E,businessHours:M})},Te=()=>{c.mutate({address:L,city:B,state:I,postalCode:z,phone:W,whatsapp:R,email:V})},Le=()=>{c.mutate({website:U,instagram:_,facebook:J})},qe=()=>{P.mutate({acceptsCreditCard:w,acceptsDebitCard:w,acceptsPix:ee,acceptsCash:ae,acceptsTransfer:te,preferStripe:ne,preferAsaas:le,preferManual:de,autoConfirm:he,requestPrePayment:pe,allowPartialPayment:je})},Be=s=>{ge(s),c.mutate({isOnline:s})};return Ee||Ae?e.jsxs("div",{className:"flex justify-center items-center min-h-screen",children:[e.jsx(d,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Carregando configurações..."})]}):e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx("div",{className:"bg-card border-b p-4 shadow-sm",children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>be("/provider/profile"),className:"mr-2",children:e.jsx(Re,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-xl font-semibold",children:"Configurações"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${y?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{children:y?"Online":"Offline"})]}),e.jsx(ze,{checked:y,onCheckedChange:Be})]})]})}),e.jsx("div",{className:"flex-1 container py-8",children:e.jsx("div",{className:"grid gap-8",children:e.jsxs(De,{defaultValue:"business",value:ke,onValueChange:Fe,children:[e.jsxs(We,{className:"grid grid-cols-4 mb-6",children:[e.jsx(C,{value:"business",children:"Negócio"}),e.jsx(C,{value:"contact",children:"Contato"}),e.jsx(C,{value:"online",children:"Presença Online"}),e.jsx(C,{value:"payment",children:"Pagamentos"})]}),e.jsx(N,{value:"business",children:e.jsxs(p,{children:[e.jsxs(u,{children:[e.jsx(j,{children:"Informações do Negócio"}),e.jsx(f,{children:"Configure as informações básicas do seu negócio que serão exibidas aos clientes."})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"businessName",children:"Nome do Negócio"}),e.jsx(n,{id:"businessName",value:S,onChange:s=>b(s.target.value),placeholder:"Ex: Salão Beauty Hair"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description",children:"Descrição"}),e.jsx(ye,{id:"description",value:k,onChange:s=>F(s.target.value),placeholder:"Descreva seu negócio, serviços e diferenciais...",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"specialties",children:"Especialidades"}),e.jsx(n,{id:"specialties",value:E,onChange:s=>A(s.target.value),placeholder:"Ex: Corte masculino, Barba, Coloração"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Separe as especialidades por vírgula (máximo 5 especialidades)."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"businessHours",children:"Horário de Funcionamento"}),e.jsx(ye,{id:"businessHours",value:M,onChange:s=>T(s.target.value),placeholder:`Ex: Segunda a Sexta: 9h às 18h
Sábado: 9h às 13h
Domingo: Fechado`,rows:4})]})]}),e.jsx(v,{className:"flex justify-end",children:e.jsx(m,{onClick:Me,disabled:c.isPending,children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Salvar Alterações"]})})})]})}),e.jsx(N,{value:"contact",children:e.jsxs(p,{children:[e.jsxs(u,{children:[e.jsx(j,{children:"Informações de Contato"}),e.jsx(f,{children:"Configure as informações de contato que serão exibidas aos clientes."})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"address",children:"Endereço"}),e.jsx(n,{id:"address",value:L,onChange:s=>q(s.target.value),placeholder:"Ex: Rua das Flores, 123"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"city",children:"Cidade"}),e.jsx(n,{id:"city",value:B,onChange:s=>O(s.target.value),placeholder:"Ex: São Paulo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"state",children:"Estado"}),e.jsx(n,{id:"state",value:I,onChange:s=>H(s.target.value),placeholder:"Ex: SP",maxLength:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"postalCode",children:"CEP"}),e.jsx(n,{id:"postalCode",value:z,onChange:s=>D(s.target.value),placeholder:"Ex: 12345-678"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"phone",children:"Telefone"}),e.jsx(n,{id:"phone",value:W,onChange:s=>K(s.target.value),placeholder:"Ex: (11) 98765-4321"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"whatsapp",children:"WhatsApp"}),e.jsx(n,{id:"whatsapp",value:R,onChange:s=>Q(s.target.value),placeholder:"Ex: (11) 98765-4321"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"email",children:"Email"}),e.jsx(n,{id:"email",value:V,onChange:s=>G(s.target.value),placeholder:"Ex: contato@exemplo.com",type:"email"})]})]}),e.jsx(v,{className:"flex justify-end",children:e.jsx(m,{onClick:Te,disabled:c.isPending,children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Salvar Alterações"]})})})]})}),e.jsx(N,{value:"online",children:e.jsxs(p,{children:[e.jsxs(u,{children:[e.jsx(j,{children:"Presença Online"}),e.jsx(f,{children:"Configure suas redes sociais e site para conectar-se com mais clientes."})]}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"website",className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-4 w-4"}),"Website"]}),e.jsx(n,{id:"website",value:U,onChange:s=>X(s.target.value),placeholder:"Ex: https://www.seusite.com.br"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"instagram",className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Instagram"]}),e.jsx(n,{id:"instagram",value:_,onChange:s=>$(s.target.value),placeholder:"Ex: seu_instagram (sem @)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"facebook",className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-4 w-4"}),"Facebook"]}),e.jsx(n,{id:"facebook",value:J,onChange:s=>Y(s.target.value),placeholder:"Ex: seufacebook"})]})]}),e.jsx(v,{className:"flex justify-end",children:e.jsx(m,{onClick:Le,disabled:c.isPending,children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Salvar Alterações"]})})})]})}),e.jsx(N,{value:"payment",children:e.jsxs(p,{children:[e.jsxs(u,{children:[e.jsx(j,{children:"Métodos de Pagamento"}),e.jsx(f,{children:"Configure quais métodos de pagamento você aceita em seu negócio."})]}),e.jsx(g,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Métodos de Pagamento Aceitos"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"acceptsCards",checked:w,onCheckedChange:s=>Z(s===!0)}),e.jsxs(r,{htmlFor:"acceptsCards",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Cartões de Crédito/Débito"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"acceptsPix",checked:ee,onCheckedChange:s=>se(s===!0)}),e.jsxs(r,{htmlFor:"acceptsPix",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"h-4 w-4",children:e.jsx("path",{d:"M7 15h0m5-5.5h0M12.5 10h0m4 5h0M7 15l5-5.5m0 0l5 5.5"})}),e.jsx("span",{children:"PIX"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"acceptsCash",checked:ae,onCheckedChange:s=>re(s===!0)}),e.jsxs(r,{htmlFor:"acceptsCash",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Dinheiro"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"acceptsTransfer",checked:te,onCheckedChange:s=>ie(s===!0)}),e.jsxs(r,{htmlFor:"acceptsTransfer",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Transferência Bancária"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Processadores de Pagamento"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"preferStripe",checked:ne,onCheckedChange:s=>ce(s===!0)}),e.jsxs(r,{htmlFor:"preferStripe",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"h-4 w-4",children:e.jsx("path",{d:"M2 12h20M2 17h20M2 7h20"})}),e.jsx("span",{children:"Stripe"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"preferAsaas",checked:le,onCheckedChange:s=>oe(s===!0)}),e.jsxs(r,{htmlFor:"preferAsaas",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"h-4 w-4",children:e.jsx("path",{d:"M20 16V7a2 2 0 00-2-2H6a2 2 0 00-2 2v9m16 0H4m16 0l-2-7m-12 7l2-7"})}),e.jsx("span",{children:"Asaas"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"preferManual",checked:de,onCheckedChange:s=>me(s===!0)}),e.jsxs(r,{htmlFor:"preferManual",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{children:"Pagamento Manual"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"Opções Avançadas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"autoConfirm",checked:he,onCheckedChange:s=>xe(s===!0)}),e.jsxs(r,{htmlFor:"autoConfirm",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsx("span",{children:"Confirmar agendamentos automaticamente"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"requestPrePayment",checked:pe,onCheckedChange:s=>ue(s===!0)}),e.jsxs(r,{htmlFor:"requestPrePayment",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(Pe,{className:"h-4 w-4"}),e.jsx("span",{children:"Exigir pré-pagamento"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"allowPartialPayment",checked:je,onCheckedChange:s=>fe(s===!0)}),e.jsxs(r,{htmlFor:"allowPartialPayment",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",className:"h-4 w-4",children:e.jsx("path",{d:"M12 2v20M2 12h20"})}),e.jsx("span",{children:"Permitir pagamento parcial"})]})]})]})]})]})}),e.jsx(v,{className:"flex justify-end",children:e.jsx(m,{onClick:qe,disabled:P.isPending,children:P.isPending?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Salvar Alterações"]})})})]})})]})})})]})}export{hs as default};
