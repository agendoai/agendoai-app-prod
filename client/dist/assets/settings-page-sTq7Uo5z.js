import{a as U,u as D,c as H,b as O,r as P,d as Q,j as e,e as E,C as j,f as p,g as f,h as g,i as v,l as R}from"./index-BdrEJuYD.js";import{u as K}from"./useMutation-C9nL7V5b.js";import{u as W,t as X,o as J,b as c,e as w}from"./zod-Cjvu1gcX.js";import{T as Y,a as Z,b as N,c as b}from"./tabs-Dh7LOHW3.js";import{B as d}from"./button-CynjWJoH.js";import{L as S}from"./label-OE63wfRu.js";import{S as l}from"./switch-DtKg8jsL.js";import{F as $,a as r,b as n,c as i,f as t,d as o}from"./form-zrbA0ux9.js";import{S as F,a as T,b as B,c as I,d as m}from"./select-CN2dG1AP.js";import{R as ee,a as k}from"./radio-group-CEDre2K1.js";import{S as se}from"./separator-QYEpahfh.js";import{C as A}from"./client-layout-of4HzYgb.js";import{P as ae}from"./page-transition-CTpfF0H5.js";import{B as re}from"./bell-DPzU_a_S.js";import{U as L}from"./user-DCpoqoA-.js";import{C as ne}from"./credit-card-dV_1iaRW.js";import{L as V}from"./lock-CMrU4PAI.js";import{H as ie}from"./house-CU2aGGLt.js";import{S as te}from"./save-DUY3d3MJ.js";import"./index-BoRtQnRr.js";import"./index-BYdWi_2u.js";import"./index-YY5r1pln.js";import"./index-C91vKSn-.js";import"./index-CeeqZ7YQ.js";import"./index-BdQq_4o_.js";import"./index-DTy3TPQv.js";import"./index-Bg9Ro7l2.js";import"./chevron-down-BZqgkKgk.js";import"./check-WTIUe9ha.js";import"./circle-CB07NW__.js";import"./navbar-BcVSfpub.js";import"./proxy-C6NuY9h3.js";import"./search-DiCZmcCn.js";import"./calendar-check-BsktWAdS.js";const oe=J({emailNotifications:c().default(!0),pushNotifications:c().default(!0),smsNotifications:c().default(!1),whatsappNotifications:c().default(!0),appointmentReminders:c().default(!0),promotionalNotifications:c().default(!1),theme:w(["light","dark","system"]).default("system"),language:w(["pt-BR","en-US","es"]).default("pt-BR"),defaultPaymentMethod:w(["credit_card","pix","money"]).default("credit_card"),savePaymentInfo:c().default(!0)});function De(){const[,h]=U(),{user:ce}=D(),{toast:C}=H(),z=O(),[M,G]=P.useState("notifications"),{data:x,isLoading:_}=Q({queryKey:["/api/user/settings"],queryFn:async()=>{try{const s=await R("GET","/api/user/settings");if(!s.ok)throw new Error("Falha ao carregar configurações");return s.json()}catch(s){return console.error("Erro ao carregar configurações:",s),{emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,whatsappNotifications:!0,appointmentReminders:!0,promotionalNotifications:!1,theme:"system",language:"pt-BR",defaultPaymentMethod:"credit_card",savePaymentInfo:!0}}}}),a=W({resolver:X(oe),defaultValues:x||{emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,whatsappNotifications:!0,appointmentReminders:!0,promotionalNotifications:!1,theme:"system",language:"pt-BR",defaultPaymentMethod:"credit_card",savePaymentInfo:!0}});P.useEffect(()=>{x&&Object.entries(x).forEach(([s,u])=>{a.setValue(s,u)})},[x,a]);const y=K({mutationFn:async s=>{const u=await R("POST","/api/user/settings",s);if(!u.ok)throw new Error("Falha ao atualizar configurações");return u.json()},onSuccess:()=>{C({title:"Configurações atualizadas",description:"Suas preferências foram salvas com sucesso."}),z.invalidateQueries({queryKey:["/api/user/settings"]})},onError:s=>{C({title:"Erro ao atualizar configurações",description:s.message||"Ocorreu um erro ao salvar suas configurações.",variant:"destructive"})}}),q=s=>{y.mutate(s)};return _?e.jsx(A,{title:"Configurações",children:e.jsx("div",{className:"flex justify-center items-center min-h-[80vh]",children:e.jsx(E,{className:"h-8 w-8 animate-spin text-primary"})})}):e.jsx(A,{title:"Configurações",showBackButton:!0,backButtonAction:()=>h("/client/dashboard"),children:e.jsx(ae,{children:e.jsx("div",{className:"container max-w-4xl mx-auto px-4 py-6",children:e.jsx($,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(q),className:"space-y-6",children:[e.jsxs(Y,{defaultValue:M,onValueChange:G,className:"w-full",children:[e.jsxs(Z,{className:"grid grid-cols-4 mb-6",children:[e.jsxs(N,{value:"notifications",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Notificações"})]}),e.jsxs(N,{value:"appearance",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Aparência"})]}),e.jsxs(N,{value:"payments",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Pagamentos"})]}),e.jsxs(N,{value:"account",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Conta"})]})]}),e.jsx(b,{value:"notifications",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Notificações"}),e.jsx(g,{children:"Configure como deseja receber notificações e atualizações do sistema."})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsx(r,{control:a.control,name:"emailNotifications",render:({field:s})=>e.jsxs(n,{className:"flex items-center justify-between border-b pb-3",children:[e.jsxs("div",{children:[e.jsx(i,{children:"E-mail"}),e.jsx(t,{children:"Receber notificações por e-mail"})]}),e.jsx(o,{children:e.jsx(l,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsx(r,{control:a.control,name:"pushNotifications",render:({field:s})=>e.jsxs(n,{className:"flex items-center justify-between border-b pb-3",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Push"}),e.jsx(t,{children:"Receber notificações push no dispositivo"})]}),e.jsx(o,{children:e.jsx(l,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsx(r,{control:a.control,name:"whatsappNotifications",render:({field:s})=>e.jsxs(n,{className:"flex items-center justify-between border-b pb-3",children:[e.jsxs("div",{children:[e.jsx(i,{children:"WhatsApp"}),e.jsx(t,{children:"Receber atualizações via WhatsApp"})]}),e.jsx(o,{children:e.jsx(l,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsx(r,{control:a.control,name:"smsNotifications",render:({field:s})=>e.jsxs(n,{className:"flex items-center justify-between border-b pb-3",children:[e.jsxs("div",{children:[e.jsx(i,{children:"SMS"}),e.jsx(t,{children:"Receber notificações por SMS"})]}),e.jsx(o,{children:e.jsx(l,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsx(se,{className:"my-4"}),e.jsx(r,{control:a.control,name:"appointmentReminders",render:({field:s})=>e.jsxs(n,{className:"flex items-center justify-between border-b pb-3",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Lembretes de Agendamentos"}),e.jsx(t,{children:"Receber lembretes antes dos agendamentos"})]}),e.jsx(o,{children:e.jsx(l,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsx(r,{control:a.control,name:"promotionalNotifications",render:({field:s})=>e.jsxs(n,{className:"flex items-center justify-between border-b pb-3",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Promoções e Novidades"}),e.jsx(t,{children:"Receber promoções e novidades dos prestadores"})]}),e.jsx(o,{children:e.jsx(l,{checked:s.value,onCheckedChange:s.onChange})})]})})]})]})}),e.jsx(b,{value:"appearance",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Aparência e Idioma"}),e.jsx(g,{children:"Personalize a aparência e o idioma do aplicativo."})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsx(r,{control:a.control,name:"theme",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Tema"}),e.jsxs(F,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(o,{children:e.jsx(T,{children:e.jsx(B,{placeholder:"Selecione um tema"})})}),e.jsxs(I,{children:[e.jsx(m,{value:"light",children:"Claro"}),e.jsx(m,{value:"dark",children:"Escuro"}),e.jsx(m,{value:"system",children:"Sistema"})]})]}),e.jsx(t,{children:"Escolha entre tema claro, escuro ou automático conforme o sistema."})]})}),e.jsx(r,{control:a.control,name:"language",render:({field:s})=>e.jsxs(n,{children:[e.jsx(i,{children:"Idioma"}),e.jsxs(F,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(o,{children:e.jsx(T,{children:e.jsx(B,{placeholder:"Selecione um idioma"})})}),e.jsxs(I,{children:[e.jsx(m,{value:"pt-BR",children:"Português (Brasil)"}),e.jsx(m,{value:"en-US",children:"English (US)"}),e.jsx(m,{value:"es",children:"Español"})]})]}),e.jsx(t,{children:"Escolha o idioma de sua preferência."})]})})]})]})}),e.jsx(b,{value:"payments",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Pagamentos"}),e.jsx(g,{children:"Configure suas preferências de pagamento."})]}),e.jsxs(v,{className:"space-y-6",children:[e.jsx(r,{control:a.control,name:"defaultPaymentMethod",render:({field:s})=>e.jsxs(n,{className:"space-y-3",children:[e.jsx(i,{children:"Método de Pagamento Padrão"}),e.jsx(o,{children:e.jsxs(ee,{onValueChange:s.onChange,defaultValue:s.value,className:"flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{value:"credit_card",id:"credit_card"}),e.jsx(S,{htmlFor:"credit_card",children:"Cartão de Crédito"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{value:"pix",id:"pix"}),e.jsx(S,{htmlFor:"pix",children:"PIX"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{value:"money",id:"money"}),e.jsx(S,{htmlFor:"money",children:"Dinheiro (no local)"})]})]})}),e.jsx(t,{children:"Este método será selecionado automaticamente nos checkouts."})]})}),e.jsx(r,{control:a.control,name:"savePaymentInfo",render:({field:s})=>e.jsxs(n,{className:"flex items-center justify-between border-b pb-3",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Salvar informações de pagamento"}),e.jsx(t,{children:"Salvar seus cartões e dados para pagamentos futuros"})]}),e.jsx(o,{children:e.jsx(l,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsx("div",{className:"mt-4",children:e.jsx(d,{type:"button",variant:"outline",onClick:()=>h("/client/payment-methods"),children:"Gerenciar Métodos de Pagamento"})})]})]})}),e.jsx(b,{value:"account",children:e.jsxs(j,{children:[e.jsxs(p,{children:[e.jsx(f,{children:"Conta e Segurança"}),e.jsx(g,{children:"Gerencie suas informações pessoais e segurança."})]}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Informações Pessoais"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nome, e-mail, telefone e endereço"})]}),e.jsxs(d,{variant:"outline",size:"sm",className:"mt-2 sm:mt-0",onClick:()=>h("/client/personal-info"),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Editar Informações"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Senha e Segurança"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Altere sua senha e configurações de segurança"})]}),e.jsxs(d,{variant:"outline",size:"sm",className:"mt-2 sm:mt-0",onClick:()=>h("/client/change-password"),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Alterar Senha"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between border-b pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Endereços"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie seus endereços de serviço"})]}),e.jsxs(d,{variant:"outline",size:"sm",className:"mt-2 sm:mt-0",onClick:()=>h("/client/addresses"),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Gerenciar Endereços"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium",children:"Excluir Conta"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Excluir permanentemente sua conta e todos os dados"})]}),e.jsx(d,{variant:"destructive",size:"sm",className:"mt-2 sm:mt-0",onClick:()=>{C({title:"Ação não disponível",description:"Entre em contato com o suporte para solicitar a exclusão da conta.",variant:"destructive"})},children:"Excluir Conta"})]})]})]})})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(d,{type:"submit",disabled:y.isPending,children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),"Salvar Configurações"]})})})]})})})})})}export{De as default};
