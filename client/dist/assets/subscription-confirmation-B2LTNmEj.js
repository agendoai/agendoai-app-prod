import{r as o,a as N,c as g,j as s,H as v,L as e,C as n,i as c,e as C,f as d,g as m,h as x}from"./index-BdrEJuYD.js";import{C as b}from"./client-layout-of4HzYgb.js";import{B as a}from"./button-CynjWJoH.js";import{A as y}from"./arrow-left-nRi6-7bo.js";import{C as w}from"./circle-check-big-CiI_Z36v.js";import{C as A}from"./credit-card-dV_1iaRW.js";import{T as S}from"./triangle-alert-C-ileS-t.js";import{C as P}from"./circle-x-SZzSqUfy.js";import"./navbar-BcVSfpub.js";import"./proxy-C6NuY9h3.js";import"./house-CU2aGGLt.js";import"./search-DiCZmcCn.js";import"./calendar-check-BsktWAdS.js";import"./user-DCpoqoA-.js";function k(){const[p,u]=o.useState(!0);N();const{toast:t}=g(),[r,i]=o.useState(null);return o.useEffect(()=>{const l=new URLSearchParams(window.location.search),j=l.get("payment_intent"),f=l.get("payment_intent_client_secret"),h=l.get("redirect_status");if(!j||!f){i("failed"),t({title:"Erro na assinatura",description:"Informações da assinatura incompletas",variant:"destructive"}),u(!1);return}h==="succeeded"?(i("success"),t({title:"Assinatura confirmada",description:"Sua assinatura foi ativada com sucesso!"})):h==="processing"?(i("processing"),t({title:"Assinatura em processamento",description:"Sua assinatura está sendo processada. Atualizaremos você assim que for concluída."})):(i("failed"),t({title:"Falha na assinatura",description:"Ocorreu um problema com sua assinatura. Por favor, tente novamente.",variant:"destructive"})),u(!1)},[t]),s.jsxs(b,{children:[s.jsx(v,{children:s.jsxs("title",{children:[r==="success"?"Assinatura Confirmada":r==="processing"?"Assinatura em Processamento":"Falha na Assinatura"," | AgendoAI"]})}),s.jsxs("div",{className:"container mx-auto py-10 max-w-2xl",children:[s.jsx("div",{className:"mb-4",children:s.jsx(a,{variant:"ghost",size:"sm",asChild:!0,children:s.jsxs(e,{to:"/client/dashboard",children:[s.jsx(y,{className:"mr-2 h-4 w-4"}),"Voltar ao Dashboard"]})})}),p?s.jsx(n,{children:s.jsxs(c,{className:"py-10 flex items-center justify-center",children:[s.jsx(C,{className:"h-8 w-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-2",children:"Verificando status da assinatura..."})]})}):r==="success"?s.jsxs(n,{children:[s.jsxs(d,{className:"pb-4",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(w,{className:"h-16 w-16 text-green-500"})}),s.jsx(m,{className:"text-center text-2xl",children:"Assinatura Ativada!"}),s.jsx(x,{className:"text-center",children:"Seu plano Premium foi ativado com sucesso."})]}),s.jsxs(c,{className:"pt-0 space-y-4",children:[s.jsxs("div",{className:"rounded-lg bg-green-50 p-4 text-green-800",children:[s.jsx("p",{children:"Detalhes da assinatura:"}),s.jsxs("ul",{className:"mt-2 list-disc list-inside text-sm",children:[s.jsx("li",{children:"Status: Ativo"}),s.jsx("li",{children:"Plano: Premium"}),s.jsx("li",{children:"Renovação: Mensal"}),s.jsxs("li",{children:["Início: ",new Date().toLocaleDateString()]})]})]}),s.jsxs("div",{className:"rounded-lg bg-blue-50 p-4 text-blue-800 flex items-start",children:[s.jsx(A,{className:"h-5 w-5 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Próxima cobrança:"}),s.jsxs("p",{className:"text-sm mt-1",children:["Sua próxima cobrança de R$ 19,90 será em ",new Date(new Date().setMonth(new Date().getMonth()+1)).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex flex-col space-y-2 mt-6",children:[s.jsx(a,{asChild:!0,children:s.jsx(e,{to:"/client/dashboard",children:"Explorar Recursos Premium"})}),s.jsx(a,{variant:"outline",asChild:!0,children:s.jsx(e,{to:"/client/payment-methods",children:"Gerenciar Métodos de Pagamento"})})]})]})]}):r==="processing"?s.jsxs(n,{children:[s.jsxs(d,{className:"pb-4",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(S,{className:"h-16 w-16 text-yellow-500"})}),s.jsx(m,{className:"text-center text-2xl",children:"Assinatura em Processamento"}),s.jsx(x,{className:"text-center",children:"Sua assinatura está sendo processada pela operadora do cartão."})]}),s.jsxs(c,{className:"pt-0 space-y-4",children:[s.jsxs("div",{className:"rounded-lg bg-yellow-50 p-4 text-yellow-800",children:[s.jsx("p",{children:"Informações importantes:"}),s.jsxs("ul",{className:"mt-2 list-disc list-inside text-sm",children:[s.jsx("li",{children:"O processamento pode levar alguns minutos"}),s.jsx("li",{children:"Você receberá uma notificação quando for concluído"}),s.jsx("li",{children:"Não é necessário refazer a assinatura"})]})]}),s.jsx("div",{className:"flex flex-col space-y-2 mt-6",children:s.jsx(a,{asChild:!0,children:s.jsx(e,{to:"/client/dashboard",children:"Voltar ao Dashboard"})})})]})]}):s.jsxs(n,{children:[s.jsxs(d,{className:"pb-4",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(P,{className:"h-16 w-16 text-red-500"})}),s.jsx(m,{className:"text-center text-2xl",children:"Falha na Assinatura"}),s.jsx(x,{className:"text-center",children:"Ocorreu um problema ao processar sua assinatura."})]}),s.jsxs(c,{className:"pt-0 space-y-4",children:[s.jsxs("div",{className:"rounded-lg bg-red-50 p-4 text-red-800",children:[s.jsx("p",{children:"Possíveis causas:"}),s.jsxs("ul",{className:"mt-2 list-disc list-inside text-sm",children:[s.jsx("li",{children:"Cartão recusado pela operadora"}),s.jsx("li",{children:"Fundos insuficientes"}),s.jsx("li",{children:"Informações incorretas do cartão"}),s.jsx("li",{children:"Problema temporário no processamento"})]})]}),s.jsxs("div",{className:"flex flex-col space-y-2 mt-6",children:[s.jsx(a,{asChild:!0,children:s.jsx(e,{to:"/client/subscribe",children:"Tentar Novamente"})}),s.jsx(a,{variant:"outline",asChild:!0,children:s.jsx(e,{to:"/client/payment-methods",children:"Gerenciar Métodos de Pagamento"})})]})]})]})]})]})}export{k as default};
