import{j as e}from"./ui-UIpCtT3r.js";import{r as A,a as D}from"./vendor-vA4cx1mx.js";import{u as S}from"./router-CxXythJb.js";import{u as L,b as M,C as p,g as f,B as c}from"./index-C8-zpcKL.js";import{D as P,a as z,b as q,c as O,d as B,e as F}from"./dialog-B9ckTsk5.js";import{C as g}from"./client-layout-DkJA58XK.js";import{U as I}from"./user-CXc1AnQW.js";import{C as U}from"./calendar-CEG0wbcY.js";import{C as G}from"./credit-card-CEItYo9H.js";import{M as H}from"./map-pin-DhYkN1aN.js";import{C as R}from"./circle-help-BAOtwWti.js";import{H as V}from"./headphones-DK-jaWcl.js";import{L as $}from"./log-out-BVXZMdHH.js";import"./navbar-vyjn30u5.js";import"./proxy-B2Nma8Bt.js";import"./search-ChrBAPJG.js";import"./calendar-check-B0nV5Uhw.js";function ce(){var m,u;const[,t]=S(),{user:a,isLoading:d}=L(),{toast:r}=M(),[j,n]=A.useState(!1);D.useEffect(()=>{!d&&!a&&t("/auth")},[a,d,t]);const b=()=>{try{t("/client/personal-info")}catch{r({title:"Erro de navegação",description:"Não foi possível acessar as configurações pessoais.",variant:"destructive"})}},v=()=>{try{t("/client/payment-methods")}catch{r({title:"Erro de navegação",description:"Não foi possível acessar os métodos de pagamento.",variant:"destructive"})}},N=()=>{try{t("/client/addresses")}catch{r({title:"Erro de navegação",description:"Não foi possível acessar os endereços.",variant:"destructive"})}},w=()=>{try{t("/client/appointments")}catch{r({title:"Erro de navegação",description:"Não foi possível acessar os agendamentos.",variant:"destructive"})}},y=()=>{try{t("/faq")}catch{r({title:"Erro de navegação",description:"Não foi possível acessar as perguntas frequentes.",variant:"destructive"})}},C=()=>{try{t("/client/support")}catch{r({title:"Erro de navegação",description:"Não foi possível acessar o suporte.",variant:"destructive"})}},k=()=>{n(!0)},E=()=>{try{n(!1),localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken"),window.authToken&&(window.authToken=void 0),document.cookie="authToken=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="authToken=; path=/; domain="+window.location.hostname+"; expires=Thu, 01 Jan 1970 00:00:00 GMT","caches"in window&&caches.keys().then(s=>{s.forEach(l=>{caches.delete(l)})}),r({title:"Logout realizado",description:"Você saiu da sua conta com sucesso."}),window.location.reload()}catch{r({title:"Erro no logout",description:"Ocorreu um erro ao sair da conta.",variant:"destructive"})}};return a?e.jsxs(g,{children:[e.jsxs("div",{className:"h-48 bg-gradient-to-br from-[#3EB9AA] to-[#2A9D8F] relative flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 w-17 h-28 bg-white rounded-full overflow-hidden border-4 border-white shadow-lg flex items-center justify-center group z-10",children:[a!=null&&a.profileImage?e.jsx("img",{src:a.profileImage,alt:a.name||"User",className:"w-full h-full object-cover",style:{borderRadius:"50%"},onError:s=>{s.currentTarget.onerror=null,s.currentTarget.src="/src/assets/service-images/perfil de usuario.png"}}):e.jsx("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-[#3EB9AA] to-[#2A9D8F] flex items-center justify-center text-white text-4xl font-bold",children:((m=a==null?void 0:a.name)==null?void 0:m.charAt(0))||"C"}),e.jsx("button",{type:"button",onClick:()=>{const s=document.createElement("input");s.type="file",s.accept="image/*",s.onchange=async l=>{var x;const i=(x=l.target.files)==null?void 0:x[0];if(i){if(!i.type.startsWith("image/")){alert("O arquivo selecionado não é uma imagem válida");return}if(i.size>5*1024*1024){alert("O arquivo é muito grande. Tamanho máximo: 5MB");return}const h=new FormData;h.append("image",i);try{const o=await fetch(`/api/users/${a==null?void 0:a.id}/profile-image-cloudinary`,{method:"POST",body:h,headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!o.ok){const T=await o.json();throw new Error(T.error||"Erro ao fazer upload da imagem")}window.location.reload()}catch(o){alert(`Erro ao fazer upload: ${o instanceof Error?o.message:"Erro desconhecido"}`)}}},s.click()},className:"absolute bottom-2 right-2 bg-primary text-white p-2 rounded-full shadow-lg border-2 border-white hover:bg-primary/80 transition-colors","aria-label":"Alterar foto de perfil",title:"Alterar foto de perfil",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536M9 13l6-6m2 2a2.828 2.828 0 11-4-4 2.828 2.828 0 014 4z"})})})]}),e.jsxs("div",{className:"pt-32 flex flex-col items-center",children:[e.jsx("h1",{className:"text-xl font-bold text-white text-center",children:(a==null?void 0:a.name)||((u=a==null?void 0:a.email)==null?void 0:u.split("@")[0])||"Usuário"}),e.jsx("p",{className:"text-white/80 text-sm text-center",children:(a==null?void 0:a.email)||"Email não informado"})]})]}),e.jsxs("div",{className:"p-4 pt-16 max-w-md mx-auto",children:[e.jsx(p,{className:"border border-neutral-200 mb-8",children:e.jsxs(f,{className:"p-0 divide-y divide-neutral-100",children:[e.jsxs("button",{onClick:b,className:"w-full p-5 flex items-center gap-4 hover:bg-neutral-50 transition-colors rounded-t-2xl","aria-label":"Informações Pessoais",children:[e.jsx("span",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(I,{className:"h-6 w-6 text-primary"})}),e.jsxs("span",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Informações Pessoais"}),e.jsx("span",{className:"text-sm text-neutral-500",children:"Edite seus dados pessoais"})]})]}),e.jsxs("button",{onClick:w,className:"w-full p-5 flex items-center gap-4 hover:bg-neutral-50 transition-colors","aria-label":"Meus Agendamentos",children:[e.jsx("span",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(U,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("span",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Meus Agendamentos"}),e.jsx("span",{className:"text-sm text-neutral-500",children:"Visualize e gerencie seus agendamentos"})]})]}),e.jsxs("button",{onClick:v,className:"w-full p-5 flex items-center gap-4 hover:bg-neutral-50 transition-colors","aria-label":"Métodos de Pagamento",children:[e.jsx("span",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(G,{className:"h-6 w-6 text-green-600"})}),e.jsxs("span",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Métodos de Pagamento"}),e.jsx("span",{className:"text-sm text-neutral-500",children:"Gerencie seus cartões e métodos de pagamento"})]})]}),e.jsxs("button",{onClick:N,className:"w-full p-5 flex items-center gap-4 hover:bg-neutral-50 transition-colors rounded-b-2xl","aria-label":"Endereços",children:[e.jsx("span",{className:"w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center",children:e.jsx(H,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("span",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Endereços"}),e.jsx("span",{className:"text-sm text-neutral-500",children:"Gerencie seus endereços"})]})]})]})}),e.jsx(p,{className:"border border-neutral-200 mb-8",children:e.jsxs(f,{className:"p-0 divide-y divide-neutral-100",children:[e.jsxs("button",{onClick:y,className:"w-full p-5 flex items-center gap-4 hover:bg-neutral-50 transition-colors rounded-t-2xl","aria-label":"Perguntas Frequentes",children:[e.jsx("span",{className:"w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx(R,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("span",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Perguntas Frequentes"}),e.jsx("span",{className:"text-sm text-neutral-500",children:"Tire suas dúvidas mais comuns"})]})]}),e.jsxs("button",{onClick:C,className:"w-full p-5 flex items-center gap-4 hover:bg-neutral-50 transition-colors rounded-b-2xl","aria-label":"Suporte",children:[e.jsx("span",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(V,{className:"h-6 w-6 text-red-500"})}),e.jsxs("span",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium text-red-500",children:"Suporte"}),e.jsx("span",{className:"text-sm text-neutral-500",children:"Entre em contato com nossa equipe"})]})]})]})}),e.jsxs(c,{variant:"outline",className:"w-full border-2 border-red-500 text-red-600 font-bold py-4 rounded-2xl text-lg hover:bg-red-50 hover:text-red-700 transition-colors mb-4",onClick:k,"aria-label":"Sair da conta",children:[e.jsx($,{className:"mr-2 h-5 w-5"}),"Sair da conta"]})]}),e.jsx(P,{open:j,onOpenChange:n,children:e.jsxs(z,{className:"z-[10001] bg-white border-2 border-gray-200 shadow-2xl max-w-sm mx-auto",children:[e.jsxs(q,{className:"text-center pb-4",children:[e.jsx(O,{className:"text-gray-800 font-bold text-xl",children:"Sair da conta"}),e.jsx(B,{className:"text-gray-600 text-base mt-2",children:"Tem certeza que deseja sair da sua conta? Você será redirecionado para a tela de login."})]}),e.jsxs(F,{className:"gap-3 pt-4",children:[e.jsx(c,{variant:"outline",onClick:()=>n(!1),className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-50 h-12",children:"Cancelar"}),e.jsx(c,{variant:"destructive",onClick:E,className:"flex-1 bg-red-600 hover:bg-red-700 text-white h-12",children:"Sair"})]})]})})]}):e.jsx(g,{children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando perfil..."})]})})})}export{ce as default};
